/*! For license information please see infobip.rtc.js.LICENSE.txt */
(()=>{var t={630:function(t){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=90)}({17:function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var r=n(18),i=function(){function t(){}return t.getFirstMatch=function(t,e){var n=e.match(t);return n&&n.length>0&&n[1]||""},t.getSecondMatch=function(t,e){var n=e.match(t);return n&&n.length>1&&n[2]||""},t.matchAndReturnConst=function(t,e,n){if(t.test(e))return n},t.getWindowsVersionName=function(t){switch(t){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},t.getMacOSVersionName=function(t){var e=t.split(".").splice(0,2).map((function(t){return parseInt(t,10)||0}));if(e.push(0),10===e[0])switch(e[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},t.getAndroidVersionName=function(t){var e=t.split(".").splice(0,2).map((function(t){return parseInt(t,10)||0}));if(e.push(0),!(1===e[0]&&e[1]<5))return 1===e[0]&&e[1]<6?"Cupcake":1===e[0]&&e[1]>=6?"Donut":2===e[0]&&e[1]<2?"Eclair":2===e[0]&&2===e[1]?"Froyo":2===e[0]&&e[1]>2?"Gingerbread":3===e[0]?"Honeycomb":4===e[0]&&e[1]<1?"Ice Cream Sandwich":4===e[0]&&e[1]<4?"Jelly Bean":4===e[0]&&e[1]>=4?"KitKat":5===e[0]?"Lollipop":6===e[0]?"Marshmallow":7===e[0]?"Nougat":8===e[0]?"Oreo":9===e[0]?"Pie":void 0},t.getVersionPrecision=function(t){return t.split(".").length},t.compareVersions=function(e,n,r){void 0===r&&(r=!1);var i=t.getVersionPrecision(e),o=t.getVersionPrecision(n),a=Math.max(i,o),s=0,c=t.map([e,n],(function(e){var n=a-t.getVersionPrecision(e),r=e+new Array(n+1).join(".0");return t.map(r.split("."),(function(t){return new Array(20-t.length).join("0")+t})).reverse()}));for(r&&(s=a-Math.min(i,o)),a-=1;a>=s;){if(c[0][a]>c[1][a])return 1;if(c[0][a]===c[1][a]){if(a===s)return 0;a-=1}else if(c[0][a]<c[1][a])return-1}},t.map=function(t,e){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(t,e);for(n=0;n<t.length;n+=1)r.push(e(t[n]));return r},t.find=function(t,e){var n,r;if(Array.prototype.find)return Array.prototype.find.call(t,e);for(n=0,r=t.length;n<r;n+=1){var i=t[n];if(e(i,n))return i}},t.assign=function(t){for(var e,n,r=t,i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(Object.assign)return Object.assign.apply(Object,[t].concat(o));var s=function(){var t=o[e];"object"==typeof t&&null!==t&&Object.keys(t).forEach((function(e){r[e]=t[e]}))};for(e=0,n=o.length;e<n;e+=1)s();return t},t.getBrowserAlias=function(t){return r.BROWSER_ALIASES_MAP[t]},t.getBrowserTypeByAlias=function(t){return r.BROWSER_MAP[t]||""},t}();e.default=i,t.exports=e.default},18:function(t,e,n){"use strict";e.__esModule=!0,e.ENGINE_MAP=e.OS_MAP=e.PLATFORMS_MAP=e.BROWSER_MAP=e.BROWSER_ALIASES_MAP=void 0,e.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},e.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},e.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},e.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},e.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},o=n(18);function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(){}var e,n;return t.getParser=function(t,e){if(void 0===e&&(e=!1),"string"!=typeof t)throw new Error("UserAgent should be a string");return new i.default(t,e)},t.parse=function(t){return new i.default(t).getResult()},e=t,n=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}],null&&a(e.prototype,null),n&&a(e,n),t}();e.default=s,t.exports=e.default},91:function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var r=c(n(92)),i=c(n(93)),o=c(n(94)),a=c(n(95)),s=c(n(17));function c(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(t,e){if(void 0===e&&(e=!1),null==t||""===t)throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},!0!==e&&this.parse()}var e=t.prototype;return e.getUA=function(){return this._ua},e.test=function(t){return t.test(this._ua)},e.parseBrowser=function(){var t=this;this.parsedResult.browser={};var e=s.default.find(r.default,(function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some((function(e){return t.test(e)}));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser},e.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},e.getBrowserName=function(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},e.getBrowserVersion=function(){return this.getBrowser().version},e.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},e.parseOS=function(){var t=this;this.parsedResult.os={};var e=s.default.find(i.default,(function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some((function(e){return t.test(e)}));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os},e.getOSName=function(t){var e=this.getOS().name;return t?String(e).toLowerCase()||"":e||""},e.getOSVersion=function(){return this.getOS().version},e.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},e.getPlatformType=function(t){void 0===t&&(t=!1);var e=this.getPlatform().type;return t?String(e).toLowerCase()||"":e||""},e.parsePlatform=function(){var t=this;this.parsedResult.platform={};var e=s.default.find(o.default,(function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some((function(e){return t.test(e)}));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform},e.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},e.getEngineName=function(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},e.parseEngine=function(){var t=this;this.parsedResult.engine={};var e=s.default.find(a.default,(function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some((function(e){return t.test(e)}));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine},e.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},e.getResult=function(){return s.default.assign({},this.parsedResult)},e.satisfies=function(t){var e=this,n={},r=0,i={},o=0;if(Object.keys(t).forEach((function(e){var a=t[e];"string"==typeof a?(i[e]=a,o+=1):"object"==typeof a&&(n[e]=a,r+=1)})),r>0){var a=Object.keys(n),c=s.default.find(a,(function(t){return e.isOS(t)}));if(c){var u=this.satisfies(n[c]);if(void 0!==u)return u}var l=s.default.find(a,(function(t){return e.isPlatform(t)}));if(l){var d=this.satisfies(n[l]);if(void 0!==d)return d}}if(o>0){var p=Object.keys(i),f=s.default.find(p,(function(t){return e.isBrowser(t,!0)}));if(void 0!==f)return this.compareVersion(i[f])}},e.isBrowser=function(t,e){void 0===e&&(e=!1);var n=this.getBrowserName().toLowerCase(),r=t.toLowerCase(),i=s.default.getBrowserTypeByAlias(r);return e&&i&&(r=i.toLowerCase()),r===n},e.compareVersion=function(t){var e=[0],n=t,r=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===t[0]||"<"===t[0]?(n=t.substr(1),"="===t[1]?(r=!0,n=t.substr(2)):e=[],">"===t[0]?e.push(1):e.push(-1)):"="===t[0]?n=t.substr(1):"~"===t[0]&&(r=!0,n=t.substr(1)),e.indexOf(s.default.compareVersions(i,n,r))>-1},e.isOS=function(t){return this.getOSName(!0)===String(t).toLowerCase()},e.isPlatform=function(t){return this.getPlatformType(!0)===String(t).toLowerCase()},e.isEngine=function(t){return this.getEngineName(!0)===String(t).toLowerCase()},e.is=function(t,e){return void 0===e&&(e=!1),this.isBrowser(t,e)||this.isOS(t)||this.isPlatform(t)},e.some=function(t){var e=this;return void 0===t&&(t=[]),t.some((function(t){return e.is(t)}))},t}();e.default=u,t.exports=e.default},92:function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(t){var e={name:"Googlebot"},n=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/opera/i],describe:function(t){var e={name:"Opera"},n=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opr\/|opios/i],describe:function(t){var e={name:"Opera"},n=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/SamsungBrowser/i],describe:function(t){var e={name:"Samsung Internet for Android"},n=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Whale/i],describe:function(t){var e={name:"NAVER Whale Browser"},n=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MZBrowser/i],describe:function(t){var e={name:"MZ Browser"},n=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/focus/i],describe:function(t){var e={name:"Focus"},n=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/swing/i],describe:function(t){var e={name:"Swing"},n=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/coast/i],describe:function(t){var e={name:"Opera Coast"},n=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(t){var e={name:"Opera Touch"},n=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/yabrowser/i],describe:function(t){var e={name:"Yandex Browser"},n=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/ucbrowser/i],describe:function(t){var e={name:"UC Browser"},n=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Maxthon|mxios/i],describe:function(t){var e={name:"Maxthon"},n=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/epiphany/i],describe:function(t){var e={name:"Epiphany"},n=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/puffin/i],describe:function(t){var e={name:"Puffin"},n=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sleipnir/i],describe:function(t){var e={name:"Sleipnir"},n=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/k-meleon/i],describe:function(t){var e={name:"K-Meleon"},n=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/micromessenger/i],describe:function(t){var e={name:"WeChat"},n=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/qqbrowser/i],describe:function(t){var e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},n=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/msie|trident/i],describe:function(t){var e={name:"Internet Explorer"},n=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/\sedg\//i],describe:function(t){var e={name:"Microsoft Edge"},n=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/edg([ea]|ios)/i],describe:function(t){var e={name:"Microsoft Edge"},n=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/vivaldi/i],describe:function(t){var e={name:"Vivaldi"},n=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/seamonkey/i],describe:function(t){var e={name:"SeaMonkey"},n=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sailfish/i],describe:function(t){var e={name:"Sailfish"},n=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return n&&(e.version=n),e}},{test:[/silk/i],describe:function(t){var e={name:"Amazon Silk"},n=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/phantom/i],describe:function(t){var e={name:"PhantomJS"},n=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/slimerjs/i],describe:function(t){var e={name:"SlimerJS"},n=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var e={name:"BlackBerry"},n=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var e={name:"WebOS Browser"},n=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/bada/i],describe:function(t){var e={name:"Bada"},n=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/tizen/i],describe:function(t){var e={name:"Tizen"},n=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/qupzilla/i],describe:function(t){var e={name:"QupZilla"},n=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/firefox|iceweasel|fxios/i],describe:function(t){var e={name:"Firefox"},n=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/electron/i],describe:function(t){var e={name:"Electron"},n=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MiuiBrowser/i],describe:function(t){var e={name:"Miui"},n=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/chromium/i],describe:function(t){var e={name:"Chromium"},n=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/chrome|crios|crmo/i],describe:function(t){var e={name:"Chrome"},n=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/GSA/i],describe:function(t){var e={name:"Google Search"},n=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:function(t){var e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe:function(t){var e={name:"Android Browser"},n=i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/playstation 4/i],describe:function(t){var e={name:"PlayStation 4"},n=i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/safari|applewebkit/i],describe:function(t){var e={name:"Safari"},n=i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/.*/i],describe:function(t){var e=-1!==t.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(e,t),version:i.default.getSecondMatch(e,t)}}}];e.default=a,t.exports=e.default},93:function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/Roku\/DVP/],describe:function(t){var e=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:o.OS_MAP.Roku,version:e}}},{test:[/windows phone/i],describe:function(t){var e=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:o.OS_MAP.WindowsPhone,version:e}}},{test:[/windows /i],describe:function(t){var e=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),n=i.default.getWindowsVersionName(e);return{name:o.OS_MAP.Windows,version:e,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(t){var e={name:o.OS_MAP.iOS},n=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return n&&(e.version=n),e}},{test:[/macintosh/i],describe:function(t){var e=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),n=i.default.getMacOSVersionName(e),r={name:o.OS_MAP.MacOS,version:e};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(t){var e=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:e}}},{test:function(t){var e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe:function(t){var e=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),n=i.default.getAndroidVersionName(e),r={name:o.OS_MAP.Android,version:e};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var e=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),n={name:o.OS_MAP.WebOS};return e&&e.length&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var e=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||i.default.getFirstMatch(/\bbb(\d+)/i,t);return{name:o.OS_MAP.BlackBerry,version:e}}},{test:[/bada/i],describe:function(t){var e=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:o.OS_MAP.Bada,version:e}}},{test:[/tizen/i],describe:function(t){var e=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:o.OS_MAP.Tizen,version:e}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(t){var e=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:o.OS_MAP.PlayStation4,version:e}}}];e.default=a,t.exports=e.default},94:function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(t){var e=i.default.getFirstMatch(/(can-l01)/i,t)&&"Nova",n={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return e&&(n.model=e),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(t){var e=t.test(/ipod|iphone/i),n=t.test(/like (ipod|iphone)/i);return e&&!n},describe:function(t){var e=i.default.getFirstMatch(/(ipod|iphone)/i,t);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(t){return"blackberry"===t.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(t){return"bada"===t.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(t){return"windows phone"===t.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(t){var e=Number(String(t.getOSVersion()).split(".")[0]);return"android"===t.getOSName(!0)&&e>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(t){return"android"===t.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(t){return"macos"===t.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(t){return"windows"===t.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(t){return"linux"===t.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(t){return"playstation 4"===t.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(t){return"roku"===t.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];e.default=a,t.exports=e.default},95:function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:function(t){return"microsoft edge"===t.getBrowserName(!0)},describe:function(t){if(/\sedg\//i.test(t))return{name:o.ENGINE_MAP.Blink};var e=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:o.ENGINE_MAP.EdgeHTML,version:e}}},{test:[/trident/i],describe:function(t){var e={name:o.ENGINE_MAP.Trident},n=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:function(t){return t.test(/presto/i)},describe:function(t){var e={name:o.ENGINE_MAP.Presto},n=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:function(t){var e=t.test(/gecko/i),n=t.test(/like gecko/i);return e&&!n},describe:function(t){var e={name:o.ENGINE_MAP.Gecko},n=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(t){var e={name:o.ENGINE_MAP.WebKit},n=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}}];e.default=a,t.exports=e.default}})},343:t=>{"use strict";var e,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var i=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}v(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&v(t,"error",e,{once:!0})}(t,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function u(t,e,n,r){var i,o,a,u;if(s(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=c(t))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=a.length,u=l,console&&console.warn&&console.warn(u)}return t}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function p(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):h(i,i.length)}function f(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function v(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){r.once&&t.removeEventListener(e,i),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=o[t];if(void 0===c)return!1;if("function"==typeof c)r(c,this,e);else{var u=c.length,l=h(c,u);for(n=0;n<u;++n)r(l[n],this,e)}return!0},o.prototype.addListener=function(t,e){return u(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return u(this,t,e,!0)},o.prototype.once=function(t,e){return s(e),this.on(t,d(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return s(e),this.prependListener(t,d(this,t,e)),this},o.prototype.removeListener=function(t,e){var n,r,i,o,a;if(s(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},o.prototype.listeners=function(t){return p(this,t,!0)},o.prototype.rawListeners=function(t){return p(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):f.call(t,e)},o.prototype.listenerCount=f,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},784:function(t,e,n){var r;t=n.nmd(t),function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",c=32,u=128,l=1/0,d=9007199254740991,p=NaN,f=4294967295,h=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",c],["partialRight",64],["rearg",256]],v="[object Arguments]",m="[object Array]",y="[object Boolean]",g="[object Date]",E="[object Error]",_="[object Function]",C="[object GeneratorFunction]",b="[object Map]",S="[object Number]",R="[object Object]",O="[object Promise]",T="[object RegExp]",A="[object Set]",w="[object String]",I="[object Symbol]",D="[object WeakMap]",P="[object ArrayBuffer]",N="[object DataView]",M="[object Float32Array]",k="[object Float64Array]",L="[object Int8Array]",j="[object Int16Array]",x="[object Int32Array]",F="[object Uint8Array]",V="[object Uint8ClampedArray]",U="[object Uint16Array]",B="[object Uint32Array]",H=/\b__p \+= '';/g,G=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,J=/&(?:amp|lt|gt|quot|#39);/g,z=/[&<>"']/g,Q=RegExp(J.source),q=RegExp(z.source),K=/<%-([\s\S]+?)%>/g,Y=/<%([\s\S]+?)%>/g,$=/<%=([\s\S]+?)%>/g,Z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),rt=/^\s+/,it=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,at=/\{\n\/\* \[wrapped with (.+)\] \*/,st=/,? & /,ct=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ut=/[()=,{}\[\]\/\s]/,lt=/\\(\\)?/g,dt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pt=/\w*$/,ft=/^[-+]0x[0-9a-f]+$/i,ht=/^0b[01]+$/i,vt=/^\[object .+?Constructor\]$/,mt=/^0o[0-7]+$/i,yt=/^(?:0|[1-9]\d*)$/,gt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Et=/($^)/,_t=/['\n\r\u2028\u2029\\]/g,Ct="\\ud800-\\udfff",bt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",St="\\u2700-\\u27bf",Rt="a-z\\xdf-\\xf6\\xf8-\\xff",Ot="A-Z\\xc0-\\xd6\\xd8-\\xde",Tt="\\ufe0e\\ufe0f",At="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",wt="["+Ct+"]",It="["+At+"]",Dt="["+bt+"]",Pt="\\d+",Nt="["+St+"]",Mt="["+Rt+"]",kt="[^"+Ct+At+Pt+St+Rt+Ot+"]",Lt="\\ud83c[\\udffb-\\udfff]",jt="[^"+Ct+"]",xt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ft="[\\ud800-\\udbff][\\udc00-\\udfff]",Vt="["+Ot+"]",Ut="\\u200d",Bt="(?:"+Mt+"|"+kt+")",Ht="(?:"+Vt+"|"+kt+")",Gt="(?:['’](?:d|ll|m|re|s|t|ve))?",Wt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Jt="(?:"+Dt+"|"+Lt+")?",zt="["+Tt+"]?",Qt=zt+Jt+"(?:"+Ut+"(?:"+[jt,xt,Ft].join("|")+")"+zt+Jt+")*",qt="(?:"+[Nt,xt,Ft].join("|")+")"+Qt,Kt="(?:"+[jt+Dt+"?",Dt,xt,Ft,wt].join("|")+")",Yt=RegExp("['’]","g"),$t=RegExp(Dt,"g"),Zt=RegExp(Lt+"(?="+Lt+")|"+Kt+Qt,"g"),Xt=RegExp([Vt+"?"+Mt+"+"+Gt+"(?="+[It,Vt,"$"].join("|")+")",Ht+"+"+Wt+"(?="+[It,Vt+Bt,"$"].join("|")+")",Vt+"?"+Bt+"+"+Gt,Vt+"+"+Wt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pt,qt].join("|"),"g"),te=RegExp("["+Ut+Ct+bt+Tt+"]"),ee=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ne=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],re=-1,ie={};ie[M]=ie[k]=ie[L]=ie[j]=ie[x]=ie[F]=ie[V]=ie[U]=ie[B]=!0,ie[v]=ie[m]=ie[P]=ie[y]=ie[N]=ie[g]=ie[E]=ie[_]=ie[b]=ie[S]=ie[R]=ie[T]=ie[A]=ie[w]=ie[D]=!1;var oe={};oe[v]=oe[m]=oe[P]=oe[N]=oe[y]=oe[g]=oe[M]=oe[k]=oe[L]=oe[j]=oe[x]=oe[b]=oe[S]=oe[R]=oe[T]=oe[A]=oe[w]=oe[I]=oe[F]=oe[V]=oe[U]=oe[B]=!0,oe[E]=oe[_]=oe[D]=!1;var ae={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},se=parseFloat,ce=parseInt,ue="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,le="object"==typeof self&&self&&self.Object===Object&&self,de=ue||le||Function("return this")(),pe=e&&!e.nodeType&&e,fe=pe&&t&&!t.nodeType&&t,he=fe&&fe.exports===pe,ve=he&&ue.process,me=function(){try{return fe&&fe.require&&fe.require("util").types||ve&&ve.binding&&ve.binding("util")}catch(t){}}(),ye=me&&me.isArrayBuffer,ge=me&&me.isDate,Ee=me&&me.isMap,_e=me&&me.isRegExp,Ce=me&&me.isSet,be=me&&me.isTypedArray;function Se(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Re(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function Oe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Te(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Ae(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function we(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Ie(t,e){return!(null==t||!t.length)&&Ve(t,e,0)>-1}function De(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Pe(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Ne(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Me(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function ke(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Le(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var je=Ge("length");function xe(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Fe(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Ve(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Fe(t,Be,n)}function Ue(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function Be(t){return t!=t}function He(t,e){var n=null==t?0:t.length;return n?ze(t,e)/n:p}function Ge(t){return function(e){return null==e?i:e[t]}}function We(t){return function(e){return null==t?i:t[e]}}function Je(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function ze(t,e){for(var n,r=-1,o=t.length;++r<o;){var a=e(t[r]);a!==i&&(n=n===i?a:n+a)}return n}function Qe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function qe(t){return t?t.slice(0,pn(t)+1).replace(rt,""):t}function Ke(t){return function(e){return t(e)}}function Ye(t,e){return Pe(e,(function(e){return t[e]}))}function $e(t,e){return t.has(e)}function Ze(t,e){for(var n=-1,r=t.length;++n<r&&Ve(e,t[n],0)>-1;);return n}function Xe(t,e){for(var n=t.length;n--&&Ve(e,t[n],0)>-1;);return n}var tn=We({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),en=We({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nn(t){return"\\"+ae[t]}function rn(t){return te.test(t)}function on(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function an(t,e){return function(n){return t(e(n))}}function sn(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==s||(t[n]=s,o[i++]=n)}return o}function cn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function un(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function ln(t){return rn(t)?function(t){for(var e=Zt.lastIndex=0;Zt.test(t);)++e;return e}(t):je(t)}function dn(t){return rn(t)?function(t){return t.match(Zt)||[]}(t):function(t){return t.split("")}(t)}function pn(t){for(var e=t.length;e--&&it.test(t.charAt(e)););return e}var fn=We({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),hn=function t(e){var n,r=(e=null==e?de:hn.defaults(de.Object(),e,hn.pick(de,ne))).Array,it=e.Date,Ct=e.Error,bt=e.Function,St=e.Math,Rt=e.Object,Ot=e.RegExp,Tt=e.String,At=e.TypeError,wt=r.prototype,It=bt.prototype,Dt=Rt.prototype,Pt=e["__core-js_shared__"],Nt=It.toString,Mt=Dt.hasOwnProperty,kt=0,Lt=(n=/[^.]+$/.exec(Pt&&Pt.keys&&Pt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",jt=Dt.toString,xt=Nt.call(Rt),Ft=de._,Vt=Ot("^"+Nt.call(Mt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ut=he?e.Buffer:i,Bt=e.Symbol,Ht=e.Uint8Array,Gt=Ut?Ut.allocUnsafe:i,Wt=an(Rt.getPrototypeOf,Rt),Jt=Rt.create,zt=Dt.propertyIsEnumerable,Qt=wt.splice,qt=Bt?Bt.isConcatSpreadable:i,Kt=Bt?Bt.iterator:i,Zt=Bt?Bt.toStringTag:i,te=function(){try{var t=co(Rt,"defineProperty");return t({},"",{}),t}catch(t){}}(),ae=e.clearTimeout!==de.clearTimeout&&e.clearTimeout,ue=it&&it.now!==de.Date.now&&it.now,le=e.setTimeout!==de.setTimeout&&e.setTimeout,pe=St.ceil,fe=St.floor,ve=Rt.getOwnPropertySymbols,me=Ut?Ut.isBuffer:i,je=e.isFinite,We=wt.join,vn=an(Rt.keys,Rt),mn=St.max,yn=St.min,gn=it.now,En=e.parseInt,_n=St.random,Cn=wt.reverse,bn=co(e,"DataView"),Sn=co(e,"Map"),Rn=co(e,"Promise"),On=co(e,"Set"),Tn=co(e,"WeakMap"),An=co(Rt,"create"),wn=Tn&&new Tn,In={},Dn=xo(bn),Pn=xo(Sn),Nn=xo(Rn),Mn=xo(On),kn=xo(Tn),Ln=Bt?Bt.prototype:i,jn=Ln?Ln.valueOf:i,xn=Ln?Ln.toString:i;function Fn(t){if(ts(t)&&!Ga(t)&&!(t instanceof Hn)){if(t instanceof Bn)return t;if(Mt.call(t,"__wrapped__"))return Fo(t)}return new Bn(t)}var Vn=function(){function t(){}return function(e){if(!Xa(e))return{};if(Jt)return Jt(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Un(){}function Bn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Hn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Wn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Jn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function zn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Jn;++e<n;)this.add(t[e])}function Qn(t){var e=this.__data__=new Wn(t);this.size=e.size}function qn(t,e){var n=Ga(t),r=!n&&Ha(t),i=!n&&!r&&Qa(t),o=!n&&!r&&!i&&cs(t),a=n||r||i||o,s=a?Qe(t.length,Tt):[],c=s.length;for(var u in t)!e&&!Mt.call(t,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||mo(u,c))||s.push(u);return s}function Kn(t){var e=t.length;return e?t[Jr(0,e-1)]:i}function Yn(t,e){return No(Ti(t),or(e,0,t.length))}function $n(t){return No(Ti(t))}function Zn(t,e,n){(n!==i&&!Va(t[e],n)||n===i&&!(e in t))&&rr(t,e,n)}function Xn(t,e,n){var r=t[e];Mt.call(t,e)&&Va(r,n)&&(n!==i||e in t)||rr(t,e,n)}function tr(t,e){for(var n=t.length;n--;)if(Va(t[n][0],e))return n;return-1}function er(t,e,n,r){return lr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function nr(t,e){return t&&Ai(e,Ds(e),t)}function rr(t,e,n){"__proto__"==e&&te?te(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ir(t,e){for(var n=-1,o=e.length,a=r(o),s=null==t;++n<o;)a[n]=s?i:Os(t,e[n]);return a}function or(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function ar(t,e,n,r,o,a){var s,c=1&e,u=2&e,l=4&e;if(n&&(s=o?n(t,r,o,a):n(t)),s!==i)return s;if(!Xa(t))return t;var d=Ga(t);if(d){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Mt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!c)return Ti(t,s)}else{var p=po(t),f=p==_||p==C;if(Qa(t))return _i(t,c);if(p==R||p==v||f&&!o){if(s=u||f?{}:ho(t),!c)return u?function(t,e){return Ai(t,lo(t),e)}(t,function(t,e){return t&&Ai(e,Ps(e),t)}(s,t)):function(t,e){return Ai(t,uo(t),e)}(t,nr(s,t))}else{if(!oe[p])return o?t:{};s=function(t,e,n){var r,i=t.constructor;switch(e){case P:return Ci(t);case y:case g:return new i(+t);case N:return function(t,e){var n=e?Ci(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case M:case k:case L:case j:case x:case F:case V:case U:case B:return bi(t,n);case b:return new i;case S:case w:return new i(t);case T:return function(t){var e=new t.constructor(t.source,pt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case A:return new i;case I:return r=t,jn?Rt(jn.call(r)):{}}}(t,p,c)}}a||(a=new Qn);var h=a.get(t);if(h)return h;a.set(t,s),os(t)?t.forEach((function(r){s.add(ar(r,e,n,r,t,a))})):es(t)&&t.forEach((function(r,i){s.set(i,ar(r,e,n,i,t,a))}));var m=d?i:(l?u?eo:to:u?Ps:Ds)(t);return Oe(m||t,(function(r,i){m&&(r=t[i=r]),Xn(s,i,ar(r,e,n,i,t,a))})),s}function sr(t,e,n){var r=n.length;if(null==t)return!r;for(t=Rt(t);r--;){var o=n[r],a=e[o],s=t[o];if(s===i&&!(o in t)||!a(s))return!1}return!0}function cr(t,e,n){if("function"!=typeof t)throw new At(o);return wo((function(){t.apply(i,n)}),e)}function ur(t,e,n,r){var i=-1,o=Ie,a=!0,s=t.length,c=[],u=e.length;if(!s)return c;n&&(e=Pe(e,Ke(n))),r?(o=De,a=!1):e.length>=200&&(o=$e,a=!1,e=new zn(e));t:for(;++i<s;){var l=t[i],d=null==n?l:n(l);if(l=r||0!==l?l:0,a&&d==d){for(var p=u;p--;)if(e[p]===d)continue t;c.push(l)}else o(e,d,r)||c.push(l)}return c}Fn.templateSettings={escape:K,evaluate:Y,interpolate:$,variable:"",imports:{_:Fn}},Fn.prototype=Un.prototype,Fn.prototype.constructor=Fn,Bn.prototype=Vn(Un.prototype),Bn.prototype.constructor=Bn,Hn.prototype=Vn(Un.prototype),Hn.prototype.constructor=Hn,Gn.prototype.clear=function(){this.__data__=An?An(null):{},this.size=0},Gn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Gn.prototype.get=function(t){var e=this.__data__;if(An){var n=e[t];return n===a?i:n}return Mt.call(e,t)?e[t]:i},Gn.prototype.has=function(t){var e=this.__data__;return An?e[t]!==i:Mt.call(e,t)},Gn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=An&&e===i?a:e,this},Wn.prototype.clear=function(){this.__data__=[],this.size=0},Wn.prototype.delete=function(t){var e=this.__data__,n=tr(e,t);return!(n<0||(n==e.length-1?e.pop():Qt.call(e,n,1),--this.size,0))},Wn.prototype.get=function(t){var e=this.__data__,n=tr(e,t);return n<0?i:e[n][1]},Wn.prototype.has=function(t){return tr(this.__data__,t)>-1},Wn.prototype.set=function(t,e){var n=this.__data__,r=tr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Jn.prototype.clear=function(){this.size=0,this.__data__={hash:new Gn,map:new(Sn||Wn),string:new Gn}},Jn.prototype.delete=function(t){var e=ao(this,t).delete(t);return this.size-=e?1:0,e},Jn.prototype.get=function(t){return ao(this,t).get(t)},Jn.prototype.has=function(t){return ao(this,t).has(t)},Jn.prototype.set=function(t,e){var n=ao(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},zn.prototype.add=zn.prototype.push=function(t){return this.__data__.set(t,a),this},zn.prototype.has=function(t){return this.__data__.has(t)},Qn.prototype.clear=function(){this.__data__=new Wn,this.size=0},Qn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Qn.prototype.get=function(t){return this.__data__.get(t)},Qn.prototype.has=function(t){return this.__data__.has(t)},Qn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Wn){var r=n.__data__;if(!Sn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Jn(r)}return n.set(t,e),this.size=n.size,this};var lr=Di(gr),dr=Di(Er,!0);function pr(t,e){var n=!0;return lr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function fr(t,e,n){for(var r=-1,o=t.length;++r<o;){var a=t[r],s=e(a);if(null!=s&&(c===i?s==s&&!ss(s):n(s,c)))var c=s,u=a}return u}function hr(t,e){var n=[];return lr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function vr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=vo),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?vr(s,e-1,n,r,i):Ne(i,s):r||(i[i.length]=s)}return i}var mr=Pi(),yr=Pi(!0);function gr(t,e){return t&&mr(t,e,Ds)}function Er(t,e){return t&&yr(t,e,Ds)}function _r(t,e){return we(e,(function(e){return Ya(t[e])}))}function Cr(t,e){for(var n=0,r=(e=mi(e,t)).length;null!=t&&n<r;)t=t[jo(e[n++])];return n&&n==r?t:i}function br(t,e,n){var r=e(t);return Ga(t)?r:Ne(r,n(t))}function Sr(t){return null==t?t===i?"[object Undefined]":"[object Null]":Zt&&Zt in Rt(t)?function(t){var e=Mt.call(t,Zt),n=t[Zt];try{t[Zt]=i;var r=!0}catch(t){}var o=jt.call(t);return r&&(e?t[Zt]=n:delete t[Zt]),o}(t):function(t){return jt.call(t)}(t)}function Rr(t,e){return t>e}function Or(t,e){return null!=t&&Mt.call(t,e)}function Tr(t,e){return null!=t&&e in Rt(t)}function Ar(t,e,n){for(var o=n?De:Ie,a=t[0].length,s=t.length,c=s,u=r(s),l=1/0,d=[];c--;){var p=t[c];c&&e&&(p=Pe(p,Ke(e))),l=yn(p.length,l),u[c]=!n&&(e||a>=120&&p.length>=120)?new zn(c&&p):i}p=t[0];var f=-1,h=u[0];t:for(;++f<a&&d.length<l;){var v=p[f],m=e?e(v):v;if(v=n||0!==v?v:0,!(h?$e(h,m):o(d,m,n))){for(c=s;--c;){var y=u[c];if(!(y?$e(y,m):o(t[c],m,n)))continue t}h&&h.push(m),d.push(v)}}return d}function wr(t,e,n){var r=null==(t=Oo(t,e=mi(e,t)))?t:t[jo(Ko(e))];return null==r?i:Se(r,t,n)}function Ir(t){return ts(t)&&Sr(t)==v}function Dr(t,e,n,r,o){return t===e||(null==t||null==e||!ts(t)&&!ts(e)?t!=t&&e!=e:function(t,e,n,r,o,a){var s=Ga(t),c=Ga(e),u=s?m:po(t),l=c?m:po(e),d=(u=u==v?R:u)==R,p=(l=l==v?R:l)==R,f=u==l;if(f&&Qa(t)){if(!Qa(e))return!1;s=!0,d=!1}if(f&&!d)return a||(a=new Qn),s||cs(t)?Zi(t,e,n,r,o,a):function(t,e,n,r,i,o,a){switch(n){case N:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case P:return!(t.byteLength!=e.byteLength||!o(new Ht(t),new Ht(e)));case y:case g:case S:return Va(+t,+e);case E:return t.name==e.name&&t.message==e.message;case T:case w:return t==e+"";case b:var s=on;case A:var c=1&r;if(s||(s=cn),t.size!=e.size&&!c)return!1;var u=a.get(t);if(u)return u==e;r|=2,a.set(t,e);var l=Zi(s(t),s(e),r,i,o,a);return a.delete(t),l;case I:if(jn)return jn.call(t)==jn.call(e)}return!1}(t,e,u,n,r,o,a);if(!(1&n)){var h=d&&Mt.call(t,"__wrapped__"),_=p&&Mt.call(e,"__wrapped__");if(h||_){var C=h?t.value():t,O=_?e.value():e;return a||(a=new Qn),o(C,O,n,r,a)}}return!!f&&(a||(a=new Qn),function(t,e,n,r,o,a){var s=1&n,c=to(t),u=c.length;if(u!=to(e).length&&!s)return!1;for(var l=u;l--;){var d=c[l];if(!(s?d in e:Mt.call(e,d)))return!1}var p=a.get(t),f=a.get(e);if(p&&f)return p==e&&f==t;var h=!0;a.set(t,e),a.set(e,t);for(var v=s;++l<u;){var m=t[d=c[l]],y=e[d];if(r)var g=s?r(y,m,d,e,t,a):r(m,y,d,t,e,a);if(!(g===i?m===y||o(m,y,n,r,a):g)){h=!1;break}v||(v="constructor"==d)}if(h&&!v){var E=t.constructor,_=e.constructor;E==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof E&&E instanceof E&&"function"==typeof _&&_ instanceof _||(h=!1)}return a.delete(t),a.delete(e),h}(t,e,n,r,o,a))}(t,e,n,r,Dr,o))}function Pr(t,e,n,r){var o=n.length,a=o,s=!r;if(null==t)return!a;for(t=Rt(t);o--;){var c=n[o];if(s&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++o<a;){var u=(c=n[o])[0],l=t[u],d=c[1];if(s&&c[2]){if(l===i&&!(u in t))return!1}else{var p=new Qn;if(r)var f=r(l,d,u,t,e,p);if(!(f===i?Dr(d,l,3,r,p):f))return!1}}return!0}function Nr(t){return!(!Xa(t)||(e=t,Lt&&Lt in e))&&(Ya(t)?Vt:vt).test(xo(t));var e}function Mr(t){return"function"==typeof t?t:null==t?nc:"object"==typeof t?Ga(t)?Fr(t[0],t[1]):xr(t):dc(t)}function kr(t){if(!Co(t))return vn(t);var e=[];for(var n in Rt(t))Mt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Lr(t,e){return t<e}function jr(t,e){var n=-1,i=Ja(t)?r(t.length):[];return lr(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function xr(t){var e=so(t);return 1==e.length&&e[0][2]?So(e[0][0],e[0][1]):function(n){return n===t||Pr(n,t,e)}}function Fr(t,e){return go(t)&&bo(e)?So(jo(t),e):function(n){var r=Os(n,t);return r===i&&r===e?Ts(n,t):Dr(e,r,3)}}function Vr(t,e,n,r,o){t!==e&&mr(e,(function(a,s){if(o||(o=new Qn),Xa(a))!function(t,e,n,r,o,a,s){var c=To(t,n),u=To(e,n),l=s.get(u);if(l)Zn(t,n,l);else{var d=a?a(c,u,n+"",t,e,s):i,p=d===i;if(p){var f=Ga(u),h=!f&&Qa(u),v=!f&&!h&&cs(u);d=u,f||h||v?Ga(c)?d=c:za(c)?d=Ti(c):h?(p=!1,d=_i(u,!0)):v?(p=!1,d=bi(u,!0)):d=[]:rs(u)||Ha(u)?(d=c,Ha(c)?d=ms(c):Xa(c)&&!Ya(c)||(d=ho(u))):p=!1}p&&(s.set(u,d),o(d,u,r,a,s),s.delete(u)),Zn(t,n,d)}}(t,e,s,n,Vr,r,o);else{var c=r?r(To(t,s),a,s+"",t,e,o):i;c===i&&(c=a),Zn(t,s,c)}}),Ps)}function Ur(t,e){var n=t.length;if(n)return mo(e+=e<0?n:0,n)?t[e]:i}function Br(t,e,n){e=e.length?Pe(e,(function(t){return Ga(t)?function(e){return Cr(e,1===t.length?t[0]:t)}:t})):[nc];var r=-1;e=Pe(e,Ke(oo()));var i=jr(t,(function(t,n,i){var o=Pe(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return function(t,e){var r=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var c=Si(i[r],o[r]);if(c)return r>=s?c:c*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}));r--;)t[r]=t[r].value;return t}(i)}function Hr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=Cr(t,a);n(s,a)&&Yr(o,mi(a,t),s)}return o}function Gr(t,e,n,r){var i=r?Ue:Ve,o=-1,a=e.length,s=t;for(t===e&&(e=Ti(e)),n&&(s=Pe(t,Ke(n)));++o<a;)for(var c=0,u=e[o],l=n?n(u):u;(c=i(s,l,c,r))>-1;)s!==t&&Qt.call(s,c,1),Qt.call(t,c,1);return t}function Wr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;mo(i)?Qt.call(t,i,1):ci(t,i)}}return t}function Jr(t,e){return t+fe(_n()*(e-t+1))}function zr(t,e){var n="";if(!t||e<1||e>d)return n;do{e%2&&(n+=t),(e=fe(e/2))&&(t+=t)}while(e);return n}function Qr(t,e){return Io(Ro(t,e,nc),t+"")}function qr(t){return Kn(Vs(t))}function Kr(t,e){var n=Vs(t);return No(n,or(e,0,n.length))}function Yr(t,e,n,r){if(!Xa(t))return t;for(var o=-1,a=(e=mi(e,t)).length,s=a-1,c=t;null!=c&&++o<a;){var u=jo(e[o]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(o!=s){var d=c[u];(l=r?r(d,u,c):i)===i&&(l=Xa(d)?d:mo(e[o+1])?[]:{})}Xn(c,u,l),c=c[u]}return t}var $r=wn?function(t,e){return wn.set(t,e),t}:nc,Zr=te?function(t,e){return te(t,"toString",{configurable:!0,enumerable:!1,value:Xs(e),writable:!0})}:nc;function Xr(t){return No(Vs(t))}function ti(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var a=r(o);++i<o;)a[i]=t[i+e];return a}function ei(t,e){var n;return lr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ni(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!ss(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return ri(t,e,nc,n)}function ri(t,e,n,r){var o=0,a=null==t?0:t.length;if(0===a)return 0;for(var s=(e=n(e))!=e,c=null===e,u=ss(e),l=e===i;o<a;){var d=fe((o+a)/2),p=n(t[d]),f=p!==i,h=null===p,v=p==p,m=ss(p);if(s)var y=r||v;else y=l?v&&(r||f):c?v&&f&&(r||!h):u?v&&f&&!h&&(r||!m):!h&&!m&&(r?p<=e:p<e);y?o=d+1:a=d}return yn(a,4294967294)}function ii(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Va(s,c)){var c=s;o[i++]=0===a?0:a}}return o}function oi(t){return"number"==typeof t?t:ss(t)?p:+t}function ai(t){if("string"==typeof t)return t;if(Ga(t))return Pe(t,ai)+"";if(ss(t))return xn?xn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function si(t,e,n){var r=-1,i=Ie,o=t.length,a=!0,s=[],c=s;if(n)a=!1,i=De;else if(o>=200){var u=e?null:zi(t);if(u)return cn(u);a=!1,i=$e,c=new zn}else c=e?[]:s;t:for(;++r<o;){var l=t[r],d=e?e(l):l;if(l=n||0!==l?l:0,a&&d==d){for(var p=c.length;p--;)if(c[p]===d)continue t;e&&c.push(d),s.push(l)}else i(c,d,n)||(c!==s&&c.push(d),s.push(l))}return s}function ci(t,e){return null==(t=Oo(t,e=mi(e,t)))||delete t[jo(Ko(e))]}function ui(t,e,n,r){return Yr(t,e,n(Cr(t,e)),r)}function li(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ti(t,r?0:o,r?o+1:i):ti(t,r?o+1:0,r?i:o)}function di(t,e){var n=t;return n instanceof Hn&&(n=n.value()),Me(e,(function(t,e){return e.func.apply(e.thisArg,Ne([t],e.args))}),n)}function pi(t,e,n){var i=t.length;if(i<2)return i?si(t[0]):[];for(var o=-1,a=r(i);++o<i;)for(var s=t[o],c=-1;++c<i;)c!=o&&(a[o]=ur(a[o]||s,t[c],e,n));return si(vr(a,1),e,n)}function fi(t,e,n){for(var r=-1,o=t.length,a=e.length,s={};++r<o;){var c=r<a?e[r]:i;n(s,t[r],c)}return s}function hi(t){return za(t)?t:[]}function vi(t){return"function"==typeof t?t:nc}function mi(t,e){return Ga(t)?t:go(t,e)?[t]:Lo(ys(t))}var yi=Qr;function gi(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ti(t,e,n)}var Ei=ae||function(t){return de.clearTimeout(t)};function _i(t,e){if(e)return t.slice();var n=t.length,r=Gt?Gt(n):new t.constructor(n);return t.copy(r),r}function Ci(t){var e=new t.constructor(t.byteLength);return new Ht(e).set(new Ht(t)),e}function bi(t,e){var n=e?Ci(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Si(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,a=ss(t),s=e!==i,c=null===e,u=e==e,l=ss(e);if(!c&&!l&&!a&&t>e||a&&s&&u&&!c&&!l||r&&s&&u||!n&&u||!o)return 1;if(!r&&!a&&!l&&t<e||l&&n&&o&&!r&&!a||c&&n&&o||!s&&o||!u)return-1}return 0}function Ri(t,e,n,i){for(var o=-1,a=t.length,s=n.length,c=-1,u=e.length,l=mn(a-s,0),d=r(u+l),p=!i;++c<u;)d[c]=e[c];for(;++o<s;)(p||o<a)&&(d[n[o]]=t[o]);for(;l--;)d[c++]=t[o++];return d}function Oi(t,e,n,i){for(var o=-1,a=t.length,s=-1,c=n.length,u=-1,l=e.length,d=mn(a-c,0),p=r(d+l),f=!i;++o<d;)p[o]=t[o];for(var h=o;++u<l;)p[h+u]=e[u];for(;++s<c;)(f||o<a)&&(p[h+n[s]]=t[o++]);return p}function Ti(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function Ai(t,e,n,r){var o=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var c=e[a],u=r?r(n[c],t[c],c,n,t):i;u===i&&(u=t[c]),o?rr(n,c,u):Xn(n,c,u)}return n}function wi(t,e){return function(n,r){var i=Ga(n)?Re:er,o=e?e():{};return i(n,t,oo(r,2),o)}}function Ii(t){return Qr((function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=t.length>3&&"function"==typeof a?(o--,a):i,s&&yo(n[0],n[1],s)&&(a=o<3?i:a,o=1),e=Rt(e);++r<o;){var c=n[r];c&&t(e,c,r,a)}return e}))}function Di(t,e){return function(n,r){if(null==n)return n;if(!Ja(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Rt(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Pi(t){return function(e,n,r){for(var i=-1,o=Rt(e),a=r(e),s=a.length;s--;){var c=a[t?s:++i];if(!1===n(o[c],c,o))break}return e}}function Ni(t){return function(e){var n=rn(e=ys(e))?dn(e):i,r=n?n[0]:e.charAt(0),o=n?gi(n,1).join(""):e.slice(1);return r[t]()+o}}function Mi(t){return function(e){return Me(Ys(Hs(e).replace(Yt,"")),t,"")}}function ki(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Vn(t.prototype),r=t.apply(n,e);return Xa(r)?r:n}}function Li(t){return function(e,n,r){var o=Rt(e);if(!Ja(e)){var a=oo(n,3);e=Ds(e),n=function(t){return a(o[t],t,o)}}var s=t(e,n,r);return s>-1?o[a?e[s]:s]:i}}function ji(t){return Xi((function(e){var n=e.length,r=n,a=Bn.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new At(o);if(a&&!c&&"wrapper"==ro(s))var c=new Bn([],!0)}for(r=c?r:n;++r<n;){var u=ro(s=e[r]),l="wrapper"==u?no(s):i;c=l&&Eo(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?c[ro(l[0])].apply(c,l[3]):1==s.length&&Eo(s)?c[u]():c.thru(s)}return function(){var t=arguments,r=t[0];if(c&&1==t.length&&Ga(r))return c.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function xi(t,e,n,o,a,s,c,l,d,p){var f=e&u,h=1&e,v=2&e,m=24&e,y=512&e,g=v?i:ki(t);return function u(){for(var E=arguments.length,_=r(E),C=E;C--;)_[C]=arguments[C];if(m)var b=io(u),S=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(_,b);if(o&&(_=Ri(_,o,a,m)),s&&(_=Oi(_,s,c,m)),E-=S,m&&E<p){var R=sn(_,b);return Wi(t,e,xi,u.placeholder,n,_,R,l,d,p-E)}var O=h?n:this,T=v?O[t]:t;return E=_.length,l?_=function(t,e){for(var n=t.length,r=yn(e.length,n),o=Ti(t);r--;){var a=e[r];t[r]=mo(a,n)?o[a]:i}return t}(_,l):y&&E>1&&_.reverse(),f&&d<E&&(_.length=d),this&&this!==de&&this instanceof u&&(T=g||ki(T)),T.apply(O,_)}}function Fi(t,e){return function(n,r){return function(t,e,n,r){return gr(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Vi(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=ai(n),r=ai(r)):(n=oi(n),r=oi(r)),o=t(n,r)}return o}}function Ui(t){return Xi((function(e){return e=Pe(e,Ke(oo())),Qr((function(n){var r=this;return t(e,(function(t){return Se(t,r,n)}))}))}))}function Bi(t,e){var n=(e=e===i?" ":ai(e)).length;if(n<2)return n?zr(e,t):e;var r=zr(e,pe(t/ln(e)));return rn(e)?gi(dn(r),0,t).join(""):r.slice(0,t)}function Hi(t){return function(e,n,o){return o&&"number"!=typeof o&&yo(e,n,o)&&(n=o=i),e=ps(e),n===i?(n=e,e=0):n=ps(n),function(t,e,n,i){for(var o=-1,a=mn(pe((e-t)/(n||1)),0),s=r(a);a--;)s[i?a:++o]=t,t+=n;return s}(e,n,o=o===i?e<n?1:-1:ps(o),t)}}function Gi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=vs(e),n=vs(n)),t(e,n)}}function Wi(t,e,n,r,o,a,s,u,l,d){var p=8&e;e|=p?c:64,4&(e&=~(p?64:c))||(e&=-4);var f=[t,e,o,p?a:i,p?s:i,p?i:a,p?i:s,u,l,d],h=n.apply(i,f);return Eo(t)&&Ao(h,f),h.placeholder=r,Do(h,t,e)}function Ji(t){var e=St[t];return function(t,n){if(t=vs(t),(n=null==n?0:yn(fs(n),292))&&je(t)){var r=(ys(t)+"e").split("e");return+((r=(ys(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var zi=On&&1/cn(new On([,-0]))[1]==l?function(t){return new On(t)}:sc;function Qi(t){return function(e){var n=po(e);return n==b?on(e):n==A?un(e):function(t,e){return Pe(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function qi(t,e,n,a,l,d,p,f){var h=2&e;if(!h&&"function"!=typeof t)throw new At(o);var v=a?a.length:0;if(v||(e&=-97,a=l=i),p=p===i?p:mn(fs(p),0),f=f===i?f:fs(f),v-=l?l.length:0,64&e){var m=a,y=l;a=l=i}var g=h?i:no(t),E=[t,e,n,a,l,m,y,d,p,f];if(g&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,a=r==u&&8==n||r==u&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!a)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var c=e[3];if(c){var l=t[3];t[3]=l?Ri(l,c,e[4]):c,t[4]=l?sn(t[3],s):e[4]}(c=e[5])&&(l=t[5],t[5]=l?Oi(l,c,e[6]):c,t[6]=l?sn(t[5],s):e[6]),(c=e[7])&&(t[7]=c),r&u&&(t[8]=null==t[8]?e[8]:yn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(E,g),t=E[0],e=E[1],n=E[2],a=E[3],l=E[4],!(f=E[9]=E[9]===i?h?0:t.length:mn(E[9]-v,0))&&24&e&&(e&=-25),e&&1!=e)_=8==e||16==e?function(t,e,n){var o=ki(t);return function a(){for(var s=arguments.length,c=r(s),u=s,l=io(a);u--;)c[u]=arguments[u];var d=s<3&&c[0]!==l&&c[s-1]!==l?[]:sn(c,l);return(s-=d.length)<n?Wi(t,e,xi,a.placeholder,i,c,d,i,i,n-s):Se(this&&this!==de&&this instanceof a?o:t,this,c)}}(t,e,f):e!=c&&33!=e||l.length?xi.apply(i,E):function(t,e,n,i){var o=1&e,a=ki(t);return function e(){for(var s=-1,c=arguments.length,u=-1,l=i.length,d=r(l+c),p=this&&this!==de&&this instanceof e?a:t;++u<l;)d[u]=i[u];for(;c--;)d[u++]=arguments[++s];return Se(p,o?n:this,d)}}(t,e,n,a);else var _=function(t,e,n){var r=1&e,i=ki(t);return function e(){return(this&&this!==de&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return Do((g?$r:Ao)(_,E),t,e)}function Ki(t,e,n,r){return t===i||Va(t,Dt[n])&&!Mt.call(r,n)?e:t}function Yi(t,e,n,r,o,a){return Xa(t)&&Xa(e)&&(a.set(e,t),Vr(t,e,i,Yi,a),a.delete(e)),t}function $i(t){return rs(t)?i:t}function Zi(t,e,n,r,o,a){var s=1&n,c=t.length,u=e.length;if(c!=u&&!(s&&u>c))return!1;var l=a.get(t),d=a.get(e);if(l&&d)return l==e&&d==t;var p=-1,f=!0,h=2&n?new zn:i;for(a.set(t,e),a.set(e,t);++p<c;){var v=t[p],m=e[p];if(r)var y=s?r(m,v,p,e,t,a):r(v,m,p,t,e,a);if(y!==i){if(y)continue;f=!1;break}if(h){if(!Le(e,(function(t,e){if(!$e(h,e)&&(v===t||o(v,t,n,r,a)))return h.push(e)}))){f=!1;break}}else if(v!==m&&!o(v,m,n,r,a)){f=!1;break}}return a.delete(t),a.delete(e),f}function Xi(t){return Io(Ro(t,i,Wo),t+"")}function to(t){return br(t,Ds,uo)}function eo(t){return br(t,Ps,lo)}var no=wn?function(t){return wn.get(t)}:sc;function ro(t){for(var e=t.name+"",n=In[e],r=Mt.call(In,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function io(t){return(Mt.call(Fn,"placeholder")?Fn:t).placeholder}function oo(){var t=Fn.iteratee||rc;return t=t===rc?Mr:t,arguments.length?t(arguments[0],arguments[1]):t}function ao(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function so(t){for(var e=Ds(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,bo(i)]}return e}function co(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Nr(n)?n:i}var uo=ve?function(t){return null==t?[]:(t=Rt(t),we(ve(t),(function(e){return zt.call(t,e)})))}:hc,lo=ve?function(t){for(var e=[];t;)Ne(e,uo(t)),t=Wt(t);return e}:hc,po=Sr;function fo(t,e,n){for(var r=-1,i=(e=mi(e,t)).length,o=!1;++r<i;){var a=jo(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Za(i)&&mo(a,i)&&(Ga(t)||Ha(t))}function ho(t){return"function"!=typeof t.constructor||Co(t)?{}:Vn(Wt(t))}function vo(t){return Ga(t)||Ha(t)||!!(qt&&t&&t[qt])}function mo(t,e){var n=typeof t;return!!(e=null==e?d:e)&&("number"==n||"symbol"!=n&&yt.test(t))&&t>-1&&t%1==0&&t<e}function yo(t,e,n){if(!Xa(n))return!1;var r=typeof e;return!!("number"==r?Ja(n)&&mo(e,n.length):"string"==r&&e in n)&&Va(n[e],t)}function go(t,e){if(Ga(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ss(t))||X.test(t)||!Z.test(t)||null!=e&&t in Rt(e)}function Eo(t){var e=ro(t),n=Fn[e];if("function"!=typeof n||!(e in Hn.prototype))return!1;if(t===n)return!0;var r=no(n);return!!r&&t===r[0]}(bn&&po(new bn(new ArrayBuffer(1)))!=N||Sn&&po(new Sn)!=b||Rn&&po(Rn.resolve())!=O||On&&po(new On)!=A||Tn&&po(new Tn)!=D)&&(po=function(t){var e=Sr(t),n=e==R?t.constructor:i,r=n?xo(n):"";if(r)switch(r){case Dn:return N;case Pn:return b;case Nn:return O;case Mn:return A;case kn:return D}return e});var _o=Pt?Ya:vc;function Co(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Dt)}function bo(t){return t==t&&!Xa(t)}function So(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in Rt(n))}}function Ro(t,e,n){return e=mn(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,a=mn(i.length-e,0),s=r(a);++o<a;)s[o]=i[e+o];o=-1;for(var c=r(e+1);++o<e;)c[o]=i[o];return c[e]=n(s),Se(t,this,c)}}function Oo(t,e){return e.length<2?t:Cr(t,ti(e,0,-1))}function To(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Ao=Po($r),wo=le||function(t,e){return de.setTimeout(t,e)},Io=Po(Zr);function Do(t,e,n){var r=e+"";return Io(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ot,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Oe(h,(function(n){var r="_."+n[0];e&n[1]&&!Ie(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(at);return e?e[1].split(st):[]}(r),n)))}function Po(t){var e=0,n=0;return function(){var r=gn(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function No(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var a=Jr(n,o),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var Mo,ko,Lo=(Mo=Ma((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,r,i){e.push(r?i.replace(lt,"$1"):n||t)})),e}),(function(t){return 500===ko.size&&ko.clear(),t})),ko=Mo.cache,Mo);function jo(t){if("string"==typeof t||ss(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function xo(t){if(null!=t){try{return Nt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Fo(t){if(t instanceof Hn)return t.clone();var e=new Bn(t.__wrapped__,t.__chain__);return e.__actions__=Ti(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Vo=Qr((function(t,e){return za(t)?ur(t,vr(e,1,za,!0)):[]})),Uo=Qr((function(t,e){var n=Ko(e);return za(n)&&(n=i),za(t)?ur(t,vr(e,1,za,!0),oo(n,2)):[]})),Bo=Qr((function(t,e){var n=Ko(e);return za(n)&&(n=i),za(t)?ur(t,vr(e,1,za,!0),i,n):[]}));function Ho(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:fs(n);return i<0&&(i=mn(r+i,0)),Fe(t,oo(e,3),i)}function Go(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=fs(n),o=n<0?mn(r+o,0):yn(o,r-1)),Fe(t,oo(e,3),o,!0)}function Wo(t){return null!=t&&t.length?vr(t,1):[]}function Jo(t){return t&&t.length?t[0]:i}var zo=Qr((function(t){var e=Pe(t,hi);return e.length&&e[0]===t[0]?Ar(e):[]})),Qo=Qr((function(t){var e=Ko(t),n=Pe(t,hi);return e===Ko(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Ar(n,oo(e,2)):[]})),qo=Qr((function(t){var e=Ko(t),n=Pe(t,hi);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Ar(n,i,e):[]}));function Ko(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Yo=Qr($o);function $o(t,e){return t&&t.length&&e&&e.length?Gr(t,e):t}var Zo=Xi((function(t,e){var n=null==t?0:t.length,r=ir(t,e);return Wr(t,Pe(e,(function(t){return mo(t,n)?+t:t})).sort(Si)),r}));function Xo(t){return null==t?t:Cn.call(t)}var ta=Qr((function(t){return si(vr(t,1,za,!0))})),ea=Qr((function(t){var e=Ko(t);return za(e)&&(e=i),si(vr(t,1,za,!0),oo(e,2))})),na=Qr((function(t){var e=Ko(t);return e="function"==typeof e?e:i,si(vr(t,1,za,!0),i,e)}));function ra(t){if(!t||!t.length)return[];var e=0;return t=we(t,(function(t){if(za(t))return e=mn(t.length,e),!0})),Qe(e,(function(e){return Pe(t,Ge(e))}))}function ia(t,e){if(!t||!t.length)return[];var n=ra(t);return null==e?n:Pe(n,(function(t){return Se(e,i,t)}))}var oa=Qr((function(t,e){return za(t)?ur(t,e):[]})),aa=Qr((function(t){return pi(we(t,za))})),sa=Qr((function(t){var e=Ko(t);return za(e)&&(e=i),pi(we(t,za),oo(e,2))})),ca=Qr((function(t){var e=Ko(t);return e="function"==typeof e?e:i,pi(we(t,za),i,e)})),ua=Qr(ra),la=Qr((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,ia(t,n)}));function da(t){var e=Fn(t);return e.__chain__=!0,e}function pa(t,e){return e(t)}var fa=Xi((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return ir(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Hn&&mo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:pa,args:[o],thisArg:i}),new Bn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(o)})),ha=wi((function(t,e,n){Mt.call(t,n)?++t[n]:rr(t,n,1)})),va=Li(Ho),ma=Li(Go);function ya(t,e){return(Ga(t)?Oe:lr)(t,oo(e,3))}function ga(t,e){return(Ga(t)?Te:dr)(t,oo(e,3))}var Ea=wi((function(t,e,n){Mt.call(t,n)?t[n].push(e):rr(t,n,[e])})),_a=Qr((function(t,e,n){var i=-1,o="function"==typeof e,a=Ja(t)?r(t.length):[];return lr(t,(function(t){a[++i]=o?Se(e,t,n):wr(t,e,n)})),a})),Ca=wi((function(t,e,n){rr(t,n,e)}));function ba(t,e){return(Ga(t)?Pe:jr)(t,oo(e,3))}var Sa=wi((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Ra=Qr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&yo(t,e[0],e[1])?e=[]:n>2&&yo(e[0],e[1],e[2])&&(e=[e[0]]),Br(t,vr(e,1),[])})),Oa=ue||function(){return de.Date.now()};function Ta(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,qi(t,u,i,i,i,i,e)}function Aa(t,e){var n;if("function"!=typeof e)throw new At(o);return t=fs(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var wa=Qr((function(t,e,n){var r=1;if(n.length){var i=sn(n,io(wa));r|=c}return qi(t,r,e,n,i)})),Ia=Qr((function(t,e,n){var r=3;if(n.length){var i=sn(n,io(Ia));r|=c}return qi(e,r,t,n,i)}));function Da(t,e,n){var r,a,s,c,u,l,d=0,p=!1,f=!1,h=!0;if("function"!=typeof t)throw new At(o);function v(e){var n=r,o=a;return r=a=i,d=e,c=t.apply(o,n)}function m(t){var n=t-l;return l===i||n>=e||n<0||f&&t-d>=s}function y(){var t=Oa();if(m(t))return g(t);u=wo(y,function(t){var n=e-(t-l);return f?yn(n,s-(t-d)):n}(t))}function g(t){return u=i,h&&r?v(t):(r=a=i,c)}function E(){var t=Oa(),n=m(t);if(r=arguments,a=this,l=t,n){if(u===i)return function(t){return d=t,u=wo(y,e),p?v(t):c}(l);if(f)return Ei(u),u=wo(y,e),v(l)}return u===i&&(u=wo(y,e)),c}return e=vs(e)||0,Xa(n)&&(p=!!n.leading,s=(f="maxWait"in n)?mn(vs(n.maxWait)||0,e):s,h="trailing"in n?!!n.trailing:h),E.cancel=function(){u!==i&&Ei(u),d=0,r=l=a=u=i},E.flush=function(){return u===i?c:g(Oa())},E}var Pa=Qr((function(t,e){return cr(t,1,e)})),Na=Qr((function(t,e,n){return cr(t,vs(e)||0,n)}));function Ma(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new At(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ma.Cache||Jn),n}function ka(t){if("function"!=typeof t)throw new At(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ma.Cache=Jn;var La=yi((function(t,e){var n=(e=1==e.length&&Ga(e[0])?Pe(e[0],Ke(oo())):Pe(vr(e,1),Ke(oo()))).length;return Qr((function(r){for(var i=-1,o=yn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return Se(t,this,r)}))})),ja=Qr((function(t,e){var n=sn(e,io(ja));return qi(t,c,i,e,n)})),xa=Qr((function(t,e){var n=sn(e,io(xa));return qi(t,64,i,e,n)})),Fa=Xi((function(t,e){return qi(t,256,i,i,i,e)}));function Va(t,e){return t===e||t!=t&&e!=e}var Ua=Gi(Rr),Ba=Gi((function(t,e){return t>=e})),Ha=Ir(function(){return arguments}())?Ir:function(t){return ts(t)&&Mt.call(t,"callee")&&!zt.call(t,"callee")},Ga=r.isArray,Wa=ye?Ke(ye):function(t){return ts(t)&&Sr(t)==P};function Ja(t){return null!=t&&Za(t.length)&&!Ya(t)}function za(t){return ts(t)&&Ja(t)}var Qa=me||vc,qa=ge?Ke(ge):function(t){return ts(t)&&Sr(t)==g};function Ka(t){if(!ts(t))return!1;var e=Sr(t);return e==E||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!rs(t)}function Ya(t){if(!Xa(t))return!1;var e=Sr(t);return e==_||e==C||"[object AsyncFunction]"==e||"[object Proxy]"==e}function $a(t){return"number"==typeof t&&t==fs(t)}function Za(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=d}function Xa(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ts(t){return null!=t&&"object"==typeof t}var es=Ee?Ke(Ee):function(t){return ts(t)&&po(t)==b};function ns(t){return"number"==typeof t||ts(t)&&Sr(t)==S}function rs(t){if(!ts(t)||Sr(t)!=R)return!1;var e=Wt(t);if(null===e)return!0;var n=Mt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Nt.call(n)==xt}var is=_e?Ke(_e):function(t){return ts(t)&&Sr(t)==T},os=Ce?Ke(Ce):function(t){return ts(t)&&po(t)==A};function as(t){return"string"==typeof t||!Ga(t)&&ts(t)&&Sr(t)==w}function ss(t){return"symbol"==typeof t||ts(t)&&Sr(t)==I}var cs=be?Ke(be):function(t){return ts(t)&&Za(t.length)&&!!ie[Sr(t)]},us=Gi(Lr),ls=Gi((function(t,e){return t<=e}));function ds(t){if(!t)return[];if(Ja(t))return as(t)?dn(t):Ti(t);if(Kt&&t[Kt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Kt]());var e=po(t);return(e==b?on:e==A?cn:Vs)(t)}function ps(t){return t?(t=vs(t))===l||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function fs(t){var e=ps(t),n=e%1;return e==e?n?e-n:e:0}function hs(t){return t?or(fs(t),0,f):0}function vs(t){if("number"==typeof t)return t;if(ss(t))return p;if(Xa(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Xa(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=qe(t);var n=ht.test(t);return n||mt.test(t)?ce(t.slice(2),n?2:8):ft.test(t)?p:+t}function ms(t){return Ai(t,Ps(t))}function ys(t){return null==t?"":ai(t)}var gs=Ii((function(t,e){if(Co(e)||Ja(e))Ai(e,Ds(e),t);else for(var n in e)Mt.call(e,n)&&Xn(t,n,e[n])})),Es=Ii((function(t,e){Ai(e,Ps(e),t)})),_s=Ii((function(t,e,n,r){Ai(e,Ps(e),t,r)})),Cs=Ii((function(t,e,n,r){Ai(e,Ds(e),t,r)})),bs=Xi(ir),Ss=Qr((function(t,e){t=Rt(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&yo(e[0],e[1],o)&&(r=1);++n<r;)for(var a=e[n],s=Ps(a),c=-1,u=s.length;++c<u;){var l=s[c],d=t[l];(d===i||Va(d,Dt[l])&&!Mt.call(t,l))&&(t[l]=a[l])}return t})),Rs=Qr((function(t){return t.push(i,Yi),Se(Ms,i,t)}));function Os(t,e,n){var r=null==t?i:Cr(t,e);return r===i?n:r}function Ts(t,e){return null!=t&&fo(t,e,Tr)}var As=Fi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=jt.call(e)),t[e]=n}),Xs(nc)),ws=Fi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=jt.call(e)),Mt.call(t,e)?t[e].push(n):t[e]=[n]}),oo),Is=Qr(wr);function Ds(t){return Ja(t)?qn(t):kr(t)}function Ps(t){return Ja(t)?qn(t,!0):function(t){if(!Xa(t))return function(t){var e=[];if(null!=t)for(var n in Rt(t))e.push(n);return e}(t);var e=Co(t),n=[];for(var r in t)("constructor"!=r||!e&&Mt.call(t,r))&&n.push(r);return n}(t)}var Ns=Ii((function(t,e,n){Vr(t,e,n)})),Ms=Ii((function(t,e,n,r){Vr(t,e,n,r)})),ks=Xi((function(t,e){var n={};if(null==t)return n;var r=!1;e=Pe(e,(function(e){return e=mi(e,t),r||(r=e.length>1),e})),Ai(t,eo(t),n),r&&(n=ar(n,7,$i));for(var i=e.length;i--;)ci(n,e[i]);return n})),Ls=Xi((function(t,e){return null==t?{}:function(t,e){return Hr(t,e,(function(e,n){return Ts(t,n)}))}(t,e)}));function js(t,e){if(null==t)return{};var n=Pe(eo(t),(function(t){return[t]}));return e=oo(e),Hr(t,n,(function(t,n){return e(t,n[0])}))}var xs=Qi(Ds),Fs=Qi(Ps);function Vs(t){return null==t?[]:Ye(t,Ds(t))}var Us=Mi((function(t,e,n){return e=e.toLowerCase(),t+(n?Bs(e):e)}));function Bs(t){return Ks(ys(t).toLowerCase())}function Hs(t){return(t=ys(t))&&t.replace(gt,tn).replace($t,"")}var Gs=Mi((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Ws=Mi((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Js=Ni("toLowerCase"),zs=Mi((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Qs=Mi((function(t,e,n){return t+(n?" ":"")+Ks(e)})),qs=Mi((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ks=Ni("toUpperCase");function Ys(t,e,n){return t=ys(t),(e=n?i:e)===i?function(t){return ee.test(t)}(t)?function(t){return t.match(Xt)||[]}(t):function(t){return t.match(ct)||[]}(t):t.match(e)||[]}var $s=Qr((function(t,e){try{return Se(t,i,e)}catch(t){return Ka(t)?t:new Ct(t)}})),Zs=Xi((function(t,e){return Oe(e,(function(e){e=jo(e),rr(t,e,wa(t[e],t))})),t}));function Xs(t){return function(){return t}}var tc=ji(),ec=ji(!0);function nc(t){return t}function rc(t){return Mr("function"==typeof t?t:ar(t,1))}var ic=Qr((function(t,e){return function(n){return wr(n,t,e)}})),oc=Qr((function(t,e){return function(n){return wr(t,n,e)}}));function ac(t,e,n){var r=Ds(e),i=_r(e,r);null!=n||Xa(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=_r(e,Ds(e)));var o=!(Xa(n)&&"chain"in n&&!n.chain),a=Ya(t);return Oe(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=Ti(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Ne([this.value()],arguments))})})),t}function sc(){}var cc=Ui(Pe),uc=Ui(Ae),lc=Ui(Le);function dc(t){return go(t)?Ge(jo(t)):function(t){return function(e){return Cr(e,t)}}(t)}var pc=Hi(),fc=Hi(!0);function hc(){return[]}function vc(){return!1}var mc,yc=Vi((function(t,e){return t+e}),0),gc=Ji("ceil"),Ec=Vi((function(t,e){return t/e}),1),_c=Ji("floor"),Cc=Vi((function(t,e){return t*e}),1),bc=Ji("round"),Sc=Vi((function(t,e){return t-e}),0);return Fn.after=function(t,e){if("function"!=typeof e)throw new At(o);return t=fs(t),function(){if(--t<1)return e.apply(this,arguments)}},Fn.ary=Ta,Fn.assign=gs,Fn.assignIn=Es,Fn.assignInWith=_s,Fn.assignWith=Cs,Fn.at=bs,Fn.before=Aa,Fn.bind=wa,Fn.bindAll=Zs,Fn.bindKey=Ia,Fn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ga(t)?t:[t]},Fn.chain=da,Fn.chunk=function(t,e,n){e=(n?yo(t,e,n):e===i)?1:mn(fs(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var a=0,s=0,c=r(pe(o/e));a<o;)c[s++]=ti(t,a,a+=e);return c},Fn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Fn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Ne(Ga(n)?Ti(n):[n],vr(e,1))},Fn.cond=function(t){var e=null==t?0:t.length,n=oo();return t=e?Pe(t,(function(t){if("function"!=typeof t[1])throw new At(o);return[n(t[0]),t[1]]})):[],Qr((function(n){for(var r=-1;++r<e;){var i=t[r];if(Se(i[0],this,n))return Se(i[1],this,n)}}))},Fn.conforms=function(t){return function(t){var e=Ds(t);return function(n){return sr(n,t,e)}}(ar(t,1))},Fn.constant=Xs,Fn.countBy=ha,Fn.create=function(t,e){var n=Vn(t);return null==e?n:nr(n,e)},Fn.curry=function t(e,n,r){var o=qi(e,8,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Fn.curryRight=function t(e,n,r){var o=qi(e,16,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Fn.debounce=Da,Fn.defaults=Ss,Fn.defaultsDeep=Rs,Fn.defer=Pa,Fn.delay=Na,Fn.difference=Vo,Fn.differenceBy=Uo,Fn.differenceWith=Bo,Fn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=n||e===i?1:fs(e))<0?0:e,r):[]},Fn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,0,(e=r-(e=n||e===i?1:fs(e)))<0?0:e):[]},Fn.dropRightWhile=function(t,e){return t&&t.length?li(t,oo(e,3),!0,!0):[]},Fn.dropWhile=function(t,e){return t&&t.length?li(t,oo(e,3),!0):[]},Fn.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&yo(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=fs(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:fs(r))<0&&(r+=o),r=n>r?0:hs(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Fn.filter=function(t,e){return(Ga(t)?we:hr)(t,oo(e,3))},Fn.flatMap=function(t,e){return vr(ba(t,e),1)},Fn.flatMapDeep=function(t,e){return vr(ba(t,e),l)},Fn.flatMapDepth=function(t,e,n){return n=n===i?1:fs(n),vr(ba(t,e),n)},Fn.flatten=Wo,Fn.flattenDeep=function(t){return null!=t&&t.length?vr(t,l):[]},Fn.flattenDepth=function(t,e){return null!=t&&t.length?vr(t,e=e===i?1:fs(e)):[]},Fn.flip=function(t){return qi(t,512)},Fn.flow=tc,Fn.flowRight=ec,Fn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Fn.functions=function(t){return null==t?[]:_r(t,Ds(t))},Fn.functionsIn=function(t){return null==t?[]:_r(t,Ps(t))},Fn.groupBy=Ea,Fn.initial=function(t){return null!=t&&t.length?ti(t,0,-1):[]},Fn.intersection=zo,Fn.intersectionBy=Qo,Fn.intersectionWith=qo,Fn.invert=As,Fn.invertBy=ws,Fn.invokeMap=_a,Fn.iteratee=rc,Fn.keyBy=Ca,Fn.keys=Ds,Fn.keysIn=Ps,Fn.map=ba,Fn.mapKeys=function(t,e){var n={};return e=oo(e,3),gr(t,(function(t,r,i){rr(n,e(t,r,i),t)})),n},Fn.mapValues=function(t,e){var n={};return e=oo(e,3),gr(t,(function(t,r,i){rr(n,r,e(t,r,i))})),n},Fn.matches=function(t){return xr(ar(t,1))},Fn.matchesProperty=function(t,e){return Fr(t,ar(e,1))},Fn.memoize=Ma,Fn.merge=Ns,Fn.mergeWith=Ms,Fn.method=ic,Fn.methodOf=oc,Fn.mixin=ac,Fn.negate=ka,Fn.nthArg=function(t){return t=fs(t),Qr((function(e){return Ur(e,t)}))},Fn.omit=ks,Fn.omitBy=function(t,e){return js(t,ka(oo(e)))},Fn.once=function(t){return Aa(2,t)},Fn.orderBy=function(t,e,n,r){return null==t?[]:(Ga(e)||(e=null==e?[]:[e]),Ga(n=r?i:n)||(n=null==n?[]:[n]),Br(t,e,n))},Fn.over=cc,Fn.overArgs=La,Fn.overEvery=uc,Fn.overSome=lc,Fn.partial=ja,Fn.partialRight=xa,Fn.partition=Sa,Fn.pick=Ls,Fn.pickBy=js,Fn.property=dc,Fn.propertyOf=function(t){return function(e){return null==t?i:Cr(t,e)}},Fn.pull=Yo,Fn.pullAll=$o,Fn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Gr(t,e,oo(n,2)):t},Fn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Gr(t,e,i,n):t},Fn.pullAt=Zo,Fn.range=pc,Fn.rangeRight=fc,Fn.rearg=Fa,Fn.reject=function(t,e){return(Ga(t)?we:hr)(t,ka(oo(e,3)))},Fn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=oo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Wr(t,i),n},Fn.rest=function(t,e){if("function"!=typeof t)throw new At(o);return Qr(t,e=e===i?e:fs(e))},Fn.reverse=Xo,Fn.sampleSize=function(t,e,n){return e=(n?yo(t,e,n):e===i)?1:fs(e),(Ga(t)?Yn:Kr)(t,e)},Fn.set=function(t,e,n){return null==t?t:Yr(t,e,n)},Fn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Yr(t,e,n,r)},Fn.shuffle=function(t){return(Ga(t)?$n:Xr)(t)},Fn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&yo(t,e,n)?(e=0,n=r):(e=null==e?0:fs(e),n=n===i?r:fs(n)),ti(t,e,n)):[]},Fn.sortBy=Ra,Fn.sortedUniq=function(t){return t&&t.length?ii(t):[]},Fn.sortedUniqBy=function(t,e){return t&&t.length?ii(t,oo(e,2)):[]},Fn.split=function(t,e,n){return n&&"number"!=typeof n&&yo(t,e,n)&&(e=n=i),(n=n===i?f:n>>>0)?(t=ys(t))&&("string"==typeof e||null!=e&&!is(e))&&!(e=ai(e))&&rn(t)?gi(dn(t),0,n):t.split(e,n):[]},Fn.spread=function(t,e){if("function"!=typeof t)throw new At(o);return e=null==e?0:mn(fs(e),0),Qr((function(n){var r=n[e],i=gi(n,0,e);return r&&Ne(i,r),Se(t,this,i)}))},Fn.tail=function(t){var e=null==t?0:t.length;return e?ti(t,1,e):[]},Fn.take=function(t,e,n){return t&&t.length?ti(t,0,(e=n||e===i?1:fs(e))<0?0:e):[]},Fn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=r-(e=n||e===i?1:fs(e)))<0?0:e,r):[]},Fn.takeRightWhile=function(t,e){return t&&t.length?li(t,oo(e,3),!1,!0):[]},Fn.takeWhile=function(t,e){return t&&t.length?li(t,oo(e,3)):[]},Fn.tap=function(t,e){return e(t),t},Fn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new At(o);return Xa(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Da(t,e,{leading:r,maxWait:e,trailing:i})},Fn.thru=pa,Fn.toArray=ds,Fn.toPairs=xs,Fn.toPairsIn=Fs,Fn.toPath=function(t){return Ga(t)?Pe(t,jo):ss(t)?[t]:Ti(Lo(ys(t)))},Fn.toPlainObject=ms,Fn.transform=function(t,e,n){var r=Ga(t),i=r||Qa(t)||cs(t);if(e=oo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Xa(t)&&Ya(o)?Vn(Wt(t)):{}}return(i?Oe:gr)(t,(function(t,r,i){return e(n,t,r,i)})),n},Fn.unary=function(t){return Ta(t,1)},Fn.union=ta,Fn.unionBy=ea,Fn.unionWith=na,Fn.uniq=function(t){return t&&t.length?si(t):[]},Fn.uniqBy=function(t,e){return t&&t.length?si(t,oo(e,2)):[]},Fn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?si(t,i,e):[]},Fn.unset=function(t,e){return null==t||ci(t,e)},Fn.unzip=ra,Fn.unzipWith=ia,Fn.update=function(t,e,n){return null==t?t:ui(t,e,vi(n))},Fn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:ui(t,e,vi(n),r)},Fn.values=Vs,Fn.valuesIn=function(t){return null==t?[]:Ye(t,Ps(t))},Fn.without=oa,Fn.words=Ys,Fn.wrap=function(t,e){return ja(vi(e),t)},Fn.xor=aa,Fn.xorBy=sa,Fn.xorWith=ca,Fn.zip=ua,Fn.zipObject=function(t,e){return fi(t||[],e||[],Xn)},Fn.zipObjectDeep=function(t,e){return fi(t||[],e||[],Yr)},Fn.zipWith=la,Fn.entries=xs,Fn.entriesIn=Fs,Fn.extend=Es,Fn.extendWith=_s,ac(Fn,Fn),Fn.add=yc,Fn.attempt=$s,Fn.camelCase=Us,Fn.capitalize=Bs,Fn.ceil=gc,Fn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=vs(n))==n?n:0),e!==i&&(e=(e=vs(e))==e?e:0),or(vs(t),e,n)},Fn.clone=function(t){return ar(t,4)},Fn.cloneDeep=function(t){return ar(t,5)},Fn.cloneDeepWith=function(t,e){return ar(t,5,e="function"==typeof e?e:i)},Fn.cloneWith=function(t,e){return ar(t,4,e="function"==typeof e?e:i)},Fn.conformsTo=function(t,e){return null==e||sr(t,e,Ds(e))},Fn.deburr=Hs,Fn.defaultTo=function(t,e){return null==t||t!=t?e:t},Fn.divide=Ec,Fn.endsWith=function(t,e,n){t=ys(t),e=ai(e);var r=t.length,o=n=n===i?r:or(fs(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},Fn.eq=Va,Fn.escape=function(t){return(t=ys(t))&&q.test(t)?t.replace(z,en):t},Fn.escapeRegExp=function(t){return(t=ys(t))&&nt.test(t)?t.replace(et,"\\$&"):t},Fn.every=function(t,e,n){var r=Ga(t)?Ae:pr;return n&&yo(t,e,n)&&(e=i),r(t,oo(e,3))},Fn.find=va,Fn.findIndex=Ho,Fn.findKey=function(t,e){return xe(t,oo(e,3),gr)},Fn.findLast=ma,Fn.findLastIndex=Go,Fn.findLastKey=function(t,e){return xe(t,oo(e,3),Er)},Fn.floor=_c,Fn.forEach=ya,Fn.forEachRight=ga,Fn.forIn=function(t,e){return null==t?t:mr(t,oo(e,3),Ps)},Fn.forInRight=function(t,e){return null==t?t:yr(t,oo(e,3),Ps)},Fn.forOwn=function(t,e){return t&&gr(t,oo(e,3))},Fn.forOwnRight=function(t,e){return t&&Er(t,oo(e,3))},Fn.get=Os,Fn.gt=Ua,Fn.gte=Ba,Fn.has=function(t,e){return null!=t&&fo(t,e,Or)},Fn.hasIn=Ts,Fn.head=Jo,Fn.identity=nc,Fn.includes=function(t,e,n,r){t=Ja(t)?t:Vs(t),n=n&&!r?fs(n):0;var i=t.length;return n<0&&(n=mn(i+n,0)),as(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Ve(t,e,n)>-1},Fn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:fs(n);return i<0&&(i=mn(r+i,0)),Ve(t,e,i)},Fn.inRange=function(t,e,n){return e=ps(e),n===i?(n=e,e=0):n=ps(n),function(t,e,n){return t>=yn(e,n)&&t<mn(e,n)}(t=vs(t),e,n)},Fn.invoke=Is,Fn.isArguments=Ha,Fn.isArray=Ga,Fn.isArrayBuffer=Wa,Fn.isArrayLike=Ja,Fn.isArrayLikeObject=za,Fn.isBoolean=function(t){return!0===t||!1===t||ts(t)&&Sr(t)==y},Fn.isBuffer=Qa,Fn.isDate=qa,Fn.isElement=function(t){return ts(t)&&1===t.nodeType&&!rs(t)},Fn.isEmpty=function(t){if(null==t)return!0;if(Ja(t)&&(Ga(t)||"string"==typeof t||"function"==typeof t.splice||Qa(t)||cs(t)||Ha(t)))return!t.length;var e=po(t);if(e==b||e==A)return!t.size;if(Co(t))return!kr(t).length;for(var n in t)if(Mt.call(t,n))return!1;return!0},Fn.isEqual=function(t,e){return Dr(t,e)},Fn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?Dr(t,e,i,n):!!r},Fn.isError=Ka,Fn.isFinite=function(t){return"number"==typeof t&&je(t)},Fn.isFunction=Ya,Fn.isInteger=$a,Fn.isLength=Za,Fn.isMap=es,Fn.isMatch=function(t,e){return t===e||Pr(t,e,so(e))},Fn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Pr(t,e,so(e),n)},Fn.isNaN=function(t){return ns(t)&&t!=+t},Fn.isNative=function(t){if(_o(t))throw new Ct("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Nr(t)},Fn.isNil=function(t){return null==t},Fn.isNull=function(t){return null===t},Fn.isNumber=ns,Fn.isObject=Xa,Fn.isObjectLike=ts,Fn.isPlainObject=rs,Fn.isRegExp=is,Fn.isSafeInteger=function(t){return $a(t)&&t>=-9007199254740991&&t<=d},Fn.isSet=os,Fn.isString=as,Fn.isSymbol=ss,Fn.isTypedArray=cs,Fn.isUndefined=function(t){return t===i},Fn.isWeakMap=function(t){return ts(t)&&po(t)==D},Fn.isWeakSet=function(t){return ts(t)&&"[object WeakSet]"==Sr(t)},Fn.join=function(t,e){return null==t?"":We.call(t,e)},Fn.kebabCase=Gs,Fn.last=Ko,Fn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=fs(n))<0?mn(r+o,0):yn(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):Fe(t,Be,o,!0)},Fn.lowerCase=Ws,Fn.lowerFirst=Js,Fn.lt=us,Fn.lte=ls,Fn.max=function(t){return t&&t.length?fr(t,nc,Rr):i},Fn.maxBy=function(t,e){return t&&t.length?fr(t,oo(e,2),Rr):i},Fn.mean=function(t){return He(t,nc)},Fn.meanBy=function(t,e){return He(t,oo(e,2))},Fn.min=function(t){return t&&t.length?fr(t,nc,Lr):i},Fn.minBy=function(t,e){return t&&t.length?fr(t,oo(e,2),Lr):i},Fn.stubArray=hc,Fn.stubFalse=vc,Fn.stubObject=function(){return{}},Fn.stubString=function(){return""},Fn.stubTrue=function(){return!0},Fn.multiply=Cc,Fn.nth=function(t,e){return t&&t.length?Ur(t,fs(e)):i},Fn.noConflict=function(){return de._===this&&(de._=Ft),this},Fn.noop=sc,Fn.now=Oa,Fn.pad=function(t,e,n){t=ys(t);var r=(e=fs(e))?ln(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Bi(fe(i),n)+t+Bi(pe(i),n)},Fn.padEnd=function(t,e,n){t=ys(t);var r=(e=fs(e))?ln(t):0;return e&&r<e?t+Bi(e-r,n):t},Fn.padStart=function(t,e,n){t=ys(t);var r=(e=fs(e))?ln(t):0;return e&&r<e?Bi(e-r,n)+t:t},Fn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),En(ys(t).replace(rt,""),e||0)},Fn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&yo(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=ps(t),e===i?(e=t,t=0):e=ps(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=_n();return yn(t+o*(e-t+se("1e-"+((o+"").length-1))),e)}return Jr(t,e)},Fn.reduce=function(t,e,n){var r=Ga(t)?Me:Je,i=arguments.length<3;return r(t,oo(e,4),n,i,lr)},Fn.reduceRight=function(t,e,n){var r=Ga(t)?ke:Je,i=arguments.length<3;return r(t,oo(e,4),n,i,dr)},Fn.repeat=function(t,e,n){return e=(n?yo(t,e,n):e===i)?1:fs(e),zr(ys(t),e)},Fn.replace=function(){var t=arguments,e=ys(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Fn.result=function(t,e,n){var r=-1,o=(e=mi(e,t)).length;for(o||(o=1,t=i);++r<o;){var a=null==t?i:t[jo(e[r])];a===i&&(r=o,a=n),t=Ya(a)?a.call(t):a}return t},Fn.round=bc,Fn.runInContext=t,Fn.sample=function(t){return(Ga(t)?Kn:qr)(t)},Fn.size=function(t){if(null==t)return 0;if(Ja(t))return as(t)?ln(t):t.length;var e=po(t);return e==b||e==A?t.size:kr(t).length},Fn.snakeCase=zs,Fn.some=function(t,e,n){var r=Ga(t)?Le:ei;return n&&yo(t,e,n)&&(e=i),r(t,oo(e,3))},Fn.sortedIndex=function(t,e){return ni(t,e)},Fn.sortedIndexBy=function(t,e,n){return ri(t,e,oo(n,2))},Fn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ni(t,e);if(r<n&&Va(t[r],e))return r}return-1},Fn.sortedLastIndex=function(t,e){return ni(t,e,!0)},Fn.sortedLastIndexBy=function(t,e,n){return ri(t,e,oo(n,2),!0)},Fn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ni(t,e,!0)-1;if(Va(t[n],e))return n}return-1},Fn.startCase=Qs,Fn.startsWith=function(t,e,n){return t=ys(t),n=null==n?0:or(fs(n),0,t.length),e=ai(e),t.slice(n,n+e.length)==e},Fn.subtract=Sc,Fn.sum=function(t){return t&&t.length?ze(t,nc):0},Fn.sumBy=function(t,e){return t&&t.length?ze(t,oo(e,2)):0},Fn.template=function(t,e,n){var r=Fn.templateSettings;n&&yo(t,e,n)&&(e=i),t=ys(t),e=_s({},e,r,Ki);var o,a,s=_s({},e.imports,r.imports,Ki),c=Ds(s),u=Ye(s,c),l=0,d=e.interpolate||Et,p="__p += '",f=Ot((e.escape||Et).source+"|"+d.source+"|"+(d===$?dt:Et).source+"|"+(e.evaluate||Et).source+"|$","g"),h="//# sourceURL="+(Mt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++re+"]")+"\n";t.replace(f,(function(e,n,r,i,s,c){return r||(r=i),p+=t.slice(l,c).replace(_t,nn),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+e.length,e})),p+="';\n";var v=Mt.call(e,"variable")&&e.variable;if(v){if(ut.test(v))throw new Ct("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(a?p.replace(H,""):p).replace(G,"$1").replace(W,"$1;"),p="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=$s((function(){return bt(c,h+"return "+p).apply(i,u)}));if(m.source=p,Ka(m))throw m;return m},Fn.times=function(t,e){if((t=fs(t))<1||t>d)return[];var n=f,r=yn(t,f);e=oo(e),t-=f;for(var i=Qe(r,e);++n<t;)e(n);return i},Fn.toFinite=ps,Fn.toInteger=fs,Fn.toLength=hs,Fn.toLower=function(t){return ys(t).toLowerCase()},Fn.toNumber=vs,Fn.toSafeInteger=function(t){return t?or(fs(t),-9007199254740991,d):0===t?t:0},Fn.toString=ys,Fn.toUpper=function(t){return ys(t).toUpperCase()},Fn.trim=function(t,e,n){if((t=ys(t))&&(n||e===i))return qe(t);if(!t||!(e=ai(e)))return t;var r=dn(t),o=dn(e);return gi(r,Ze(r,o),Xe(r,o)+1).join("")},Fn.trimEnd=function(t,e,n){if((t=ys(t))&&(n||e===i))return t.slice(0,pn(t)+1);if(!t||!(e=ai(e)))return t;var r=dn(t);return gi(r,0,Xe(r,dn(e))+1).join("")},Fn.trimStart=function(t,e,n){if((t=ys(t))&&(n||e===i))return t.replace(rt,"");if(!t||!(e=ai(e)))return t;var r=dn(t);return gi(r,Ze(r,dn(e))).join("")},Fn.truncate=function(t,e){var n=30,r="...";if(Xa(e)){var o="separator"in e?e.separator:o;n="length"in e?fs(e.length):n,r="omission"in e?ai(e.omission):r}var a=(t=ys(t)).length;if(rn(t)){var s=dn(t);a=s.length}if(n>=a)return t;var c=n-ln(r);if(c<1)return r;var u=s?gi(s,0,c).join(""):t.slice(0,c);if(o===i)return u+r;if(s&&(c+=u.length-c),is(o)){if(t.slice(c).search(o)){var l,d=u;for(o.global||(o=Ot(o.source,ys(pt.exec(o))+"g")),o.lastIndex=0;l=o.exec(d);)var p=l.index;u=u.slice(0,p===i?c:p)}}else if(t.indexOf(ai(o),c)!=c){var f=u.lastIndexOf(o);f>-1&&(u=u.slice(0,f))}return u+r},Fn.unescape=function(t){return(t=ys(t))&&Q.test(t)?t.replace(J,fn):t},Fn.uniqueId=function(t){var e=++kt;return ys(t)+e},Fn.upperCase=qs,Fn.upperFirst=Ks,Fn.each=ya,Fn.eachRight=ga,Fn.first=Jo,ac(Fn,(mc={},gr(Fn,(function(t,e){Mt.call(Fn.prototype,e)||(mc[e]=t)})),mc),{chain:!1}),Fn.VERSION="4.17.21",Oe(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Fn[t].placeholder=Fn})),Oe(["drop","take"],(function(t,e){Hn.prototype[t]=function(n){n=n===i?1:mn(fs(n),0);var r=this.__filtered__&&!e?new Hn(this):this.clone();return r.__filtered__?r.__takeCount__=yn(n,r.__takeCount__):r.__views__.push({size:yn(n,f),type:t+(r.__dir__<0?"Right":"")}),r},Hn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Oe(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Hn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:oo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Oe(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Hn.prototype[t]=function(){return this[n](1).value()[0]}})),Oe(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Hn.prototype[t]=function(){return this.__filtered__?new Hn(this):this[n](1)}})),Hn.prototype.compact=function(){return this.filter(nc)},Hn.prototype.find=function(t){return this.filter(t).head()},Hn.prototype.findLast=function(t){return this.reverse().find(t)},Hn.prototype.invokeMap=Qr((function(t,e){return"function"==typeof t?new Hn(this):this.map((function(n){return wr(n,t,e)}))})),Hn.prototype.reject=function(t){return this.filter(ka(oo(t)))},Hn.prototype.slice=function(t,e){t=fs(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Hn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=fs(e))<0?n.dropRight(-e):n.take(e-t)),n)},Hn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Hn.prototype.toArray=function(){return this.take(f)},gr(Hn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=Fn[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);o&&(Fn.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,c=e instanceof Hn,u=s[0],l=c||Ga(e),d=function(t){var e=o.apply(Fn,Ne([t],s));return r&&p?e[0]:e};l&&n&&"function"==typeof u&&1!=u.length&&(c=l=!1);var p=this.__chain__,f=!!this.__actions__.length,h=a&&!p,v=c&&!f;if(!a&&l){e=v?e:new Hn(this);var m=t.apply(e,s);return m.__actions__.push({func:pa,args:[d],thisArg:i}),new Bn(m,p)}return h&&v?t.apply(this,s):(m=this.thru(d),h?r?m.value()[0]:m.value():m)})})),Oe(["pop","push","shift","sort","splice","unshift"],(function(t){var e=wt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Fn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Ga(i)?i:[],t)}return this[n]((function(n){return e.apply(Ga(n)?n:[],t)}))}})),gr(Hn.prototype,(function(t,e){var n=Fn[e];if(n){var r=n.name+"";Mt.call(In,r)||(In[r]=[]),In[r].push({name:e,func:n})}})),In[xi(i,2).name]=[{name:"wrapper",func:i}],Hn.prototype.clone=function(){var t=new Hn(this.__wrapped__);return t.__actions__=Ti(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ti(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ti(this.__views__),t},Hn.prototype.reverse=function(){if(this.__filtered__){var t=new Hn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Hn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ga(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=yn(e,t+a);break;case"takeRight":t=mn(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,c=s-a,u=r?s:a-1,l=this.__iteratees__,d=l.length,p=0,f=yn(c,this.__takeCount__);if(!n||!r&&i==c&&f==c)return di(t,this.__actions__);var h=[];t:for(;c--&&p<f;){for(var v=-1,m=t[u+=e];++v<d;){var y=l[v],g=y.iteratee,E=y.type,_=g(m);if(2==E)m=_;else if(!_){if(1==E)continue t;break t}}h[p++]=m}return h},Fn.prototype.at=fa,Fn.prototype.chain=function(){return da(this)},Fn.prototype.commit=function(){return new Bn(this.value(),this.__chain__)},Fn.prototype.next=function(){this.__values__===i&&(this.__values__=ds(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},Fn.prototype.plant=function(t){for(var e,n=this;n instanceof Un;){var r=Fo(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},Fn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Hn){var e=t;return this.__actions__.length&&(e=new Hn(this)),(e=e.reverse()).__actions__.push({func:pa,args:[Xo],thisArg:i}),new Bn(e,this.__chain__)}return this.thru(Xo)},Fn.prototype.toJSON=Fn.prototype.valueOf=Fn.prototype.value=function(){return di(this.__wrapped__,this.__actions__)},Fn.prototype.first=Fn.prototype.head,Kt&&(Fn.prototype[Kt]=function(){return this}),Fn}();de._=hn,(r=function(){return hn}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},84:function(t,e,n){var r,i;!function(o,a){"use strict";r=function(){var t=function(){},e="undefined",n=typeof window!==e&&typeof window.navigator!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"];function i(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(e,n){for(var i=0;i<r.length;i++){var o=r[i];this[o]=i<e?t:this.methodFactory(o,e,n)}this.log=this.debug}function s(t,n,r){return function(){typeof console!==e&&(a.call(this,n,r),this[t].apply(this,arguments))}}function c(r,a,c){return function(r){return"debug"===r&&(r="log"),typeof console!==e&&("trace"===r&&n?o:void 0!==console[r]?i(console,r):void 0!==console.log?i(console,"log"):t)}(r)||s.apply(this,arguments)}function u(t,n,i){var o,s=this,u="loglevel";function l(){var t;if(typeof window!==e&&u){try{t=window.localStorage[u]}catch(t){}if(typeof t===e)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(u)+"=");-1!==r&&(t=/^([^;]+)/.exec(n.slice(r))[1])}catch(t){}return void 0===s.levels[t]&&(t=void 0),t}}"string"==typeof t?u+=":"+t:"symbol"==typeof t&&(u=void 0),s.name=t,s.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},s.methodFactory=i||c,s.getLevel=function(){return o},s.setLevel=function(n,i){if("string"==typeof n&&void 0!==s.levels[n.toUpperCase()]&&(n=s.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=s.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(o=n,!1!==i&&function(t){var n=(r[t]||"silent").toUpperCase();if(typeof window!==e&&u){try{return void(window.localStorage[u]=n)}catch(t){}try{window.document.cookie=encodeURIComponent(u)+"="+n+";"}catch(t){}}}(n),a.call(s,n,t),typeof console===e&&n<s.levels.SILENT)return"No console available for logging"},s.setDefaultLevel=function(t){l()||s.setLevel(t,!1)},s.enableAll=function(t){s.setLevel(s.levels.TRACE,t)},s.disableAll=function(t){s.setLevel(s.levels.SILENT,t)};var d=l();null==d&&(d=null==n?"WARN":n),s.setLevel(d,!1)}var l=new u,d={};l.getLogger=function(t){if("symbol"!=typeof t&&"string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=d[t];return e||(e=d[t]=new u(t,l.getLevel(),l.methodFactory)),e};var p=typeof window!==e?window.log:void 0;return l.noConflict=function(){return typeof window!==e&&window.log===l&&(window.log=p),l},l.getLoggers=function(){return d},l.default=l,l},void 0===(i=r.call(e,n,e,t))||(t.exports=i)}()},347:t=>{"use strict";const e={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};e.localCName=e.generateIdentifier(),e.splitLines=function(t){return t.trim().split("\n").map((t=>t.trim()))},e.splitSections=function(t){return t.split("\nm=").map(((t,e)=>(e>0?"m="+t:t).trim()+"\r\n"))},e.getDescription=function(t){const n=e.splitSections(t);return n&&n[0]},e.getMediaSections=function(t){const n=e.splitSections(t);return n.shift(),n},e.matchPrefix=function(t,n){return e.splitLines(t).filter((t=>0===t.indexOf(n)))},e.parseCandidate=function(t){let e;e=0===t.indexOf("a=candidate:")?t.substring(12).split(" "):t.substring(10).split(" ");const n={foundation:e[0],component:{1:"rtp",2:"rtcp"}[e[1]]||e[1],protocol:e[2].toLowerCase(),priority:parseInt(e[3],10),ip:e[4],address:e[4],port:parseInt(e[5],10),type:e[7]};for(let t=8;t<e.length;t+=2)switch(e[t]){case"raddr":n.relatedAddress=e[t+1];break;case"rport":n.relatedPort=parseInt(e[t+1],10);break;case"tcptype":n.tcpType=e[t+1];break;case"ufrag":n.ufrag=e[t+1],n.usernameFragment=e[t+1];break;default:void 0===n[e[t]]&&(n[e[t]]=e[t+1])}return n},e.writeCandidate=function(t){const e=[];e.push(t.foundation);const n=t.component;"rtp"===n?e.push(1):"rtcp"===n?e.push(2):e.push(n),e.push(t.protocol.toUpperCase()),e.push(t.priority),e.push(t.address||t.ip),e.push(t.port);const r=t.type;return e.push("typ"),e.push(r),"host"!==r&&t.relatedAddress&&t.relatedPort&&(e.push("raddr"),e.push(t.relatedAddress),e.push("rport"),e.push(t.relatedPort)),t.tcpType&&"tcp"===t.protocol.toLowerCase()&&(e.push("tcptype"),e.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(e.push("ufrag"),e.push(t.usernameFragment||t.ufrag)),"candidate:"+e.join(" ")},e.parseIceOptions=function(t){return t.substring(14).split(" ")},e.parseRtpMap=function(t){let e=t.substring(9).split(" ");const n={payloadType:parseInt(e.shift(),10)};return e=e[0].split("/"),n.name=e[0],n.clockRate=parseInt(e[1],10),n.channels=3===e.length?parseInt(e[2],10):1,n.numChannels=n.channels,n},e.writeRtpMap=function(t){let e=t.payloadType;void 0!==t.preferredPayloadType&&(e=t.preferredPayloadType);const n=t.channels||t.numChannels||1;return"a=rtpmap:"+e+" "+t.name+"/"+t.clockRate+(1!==n?"/"+n:"")+"\r\n"},e.parseExtmap=function(t){const e=t.substring(9).split(" ");return{id:parseInt(e[0],10),direction:e[0].indexOf("/")>0?e[0].split("/")[1]:"sendrecv",uri:e[1],attributes:e.slice(2).join(" ")}},e.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&"sendrecv"!==t.direction?"/"+t.direction:"")+" "+t.uri+(t.attributes?" "+t.attributes:"")+"\r\n"},e.parseFmtp=function(t){const e={};let n;const r=t.substring(t.indexOf(" ")+1).split(";");for(let t=0;t<r.length;t++)n=r[t].trim().split("="),e[n[0].trim()]=n[1];return e},e.writeFmtp=function(t){let e="",n=t.payloadType;if(void 0!==t.preferredPayloadType&&(n=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){const r=[];Object.keys(t.parameters).forEach((e=>{void 0!==t.parameters[e]?r.push(e+"="+t.parameters[e]):r.push(e)})),e+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return e},e.parseRtcpFb=function(t){const e=t.substring(t.indexOf(" ")+1).split(" ");return{type:e.shift(),parameter:e.join(" ")}},e.writeRtcpFb=function(t){let e="",n=t.payloadType;return void 0!==t.preferredPayloadType&&(n=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach((t=>{e+="a=rtcp-fb:"+n+" "+t.type+(t.parameter&&t.parameter.length?" "+t.parameter:"")+"\r\n"})),e},e.parseSsrcMedia=function(t){const e=t.indexOf(" "),n={ssrc:parseInt(t.substring(7,e),10)},r=t.indexOf(":",e);return r>-1?(n.attribute=t.substring(e+1,r),n.value=t.substring(r+1)):n.attribute=t.substring(e+1),n},e.parseSsrcGroup=function(t){const e=t.substring(13).split(" ");return{semantics:e.shift(),ssrcs:e.map((t=>parseInt(t,10)))}},e.getMid=function(t){const n=e.matchPrefix(t,"a=mid:")[0];if(n)return n.substring(6)},e.parseFingerprint=function(t){const e=t.substring(14).split(" ");return{algorithm:e[0].toLowerCase(),value:e[1].toUpperCase()}},e.getDtlsParameters=function(t,n){return{role:"auto",fingerprints:e.matchPrefix(t+n,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(t,e){let n="a=setup:"+e+"\r\n";return t.fingerprints.forEach((t=>{n+="a=fingerprint:"+t.algorithm+" "+t.value+"\r\n"})),n},e.parseCryptoLine=function(t){const e=t.substring(9).split(" ");return{tag:parseInt(e[0],10),cryptoSuite:e[1],keyParams:e[2],sessionParams:e.slice(3)}},e.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+("object"==typeof t.keyParams?e.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+"\r\n"},e.parseCryptoKeyParams=function(t){if(0!==t.indexOf("inline:"))return null;const e=t.substring(7).split("|");return{keyMethod:"inline",keySalt:e[0],lifeTime:e[1],mkiValue:e[2]?e[2].split(":")[0]:void 0,mkiLength:e[2]?e[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},e.getCryptoParameters=function(t,n){return e.matchPrefix(t+n,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(t,n){const r=e.matchPrefix(t+n,"a=ice-ufrag:")[0],i=e.matchPrefix(t+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substring(12),password:i.substring(10)}:null},e.writeIceParameters=function(t){let e="a=ice-ufrag:"+t.usernameFragment+"\r\na=ice-pwd:"+t.password+"\r\n";return t.iceLite&&(e+="a=ice-lite\r\n"),e},e.parseRtpParameters=function(t){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=e.splitLines(t)[0].split(" ");n.profile=r[2];for(let i=3;i<r.length;i++){const o=r[i],a=e.matchPrefix(t,"a=rtpmap:"+o+" ")[0];if(a){const r=e.parseRtpMap(a),i=e.matchPrefix(t,"a=fmtp:"+o+" ");switch(r.parameters=i.length?e.parseFmtp(i[0]):{},r.rtcpFeedback=e.matchPrefix(t,"a=rtcp-fb:"+o+" ").map(e.parseRtcpFb),n.codecs.push(r),r.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(r.name.toUpperCase())}}}e.matchPrefix(t,"a=extmap:").forEach((t=>{n.headerExtensions.push(e.parseExtmap(t))}));const i=e.matchPrefix(t,"a=rtcp-fb:* ").map(e.parseRtcpFb);return n.codecs.forEach((t=>{i.forEach((e=>{t.rtcpFeedback.find((t=>t.type===e.type&&t.parameter===e.parameter))||t.rtcpFeedback.push(e)}))})),n},e.writeRtpDescription=function(t,n){let r="";r+="m="+t+" ",r+=n.codecs.length>0?"9":"0",r+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=n.codecs.map((t=>void 0!==t.preferredPayloadType?t.preferredPayloadType:t.payloadType)).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((t=>{r+=e.writeRtpMap(t),r+=e.writeFmtp(t),r+=e.writeRtcpFb(t)}));let i=0;return n.codecs.forEach((t=>{t.maxptime>i&&(i=t.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((t=>{r+=e.writeExtmap(t)})),r},e.parseRtpEncodingParameters=function(t){const n=[],r=e.parseRtpParameters(t),i=-1!==r.fecMechanisms.indexOf("RED"),o=-1!==r.fecMechanisms.indexOf("ULPFEC"),a=e.matchPrefix(t,"a=ssrc:").map((t=>e.parseSsrcMedia(t))).filter((t=>"cname"===t.attribute)),s=a.length>0&&a[0].ssrc;let c;const u=e.matchPrefix(t,"a=ssrc-group:FID").map((t=>t.substring(17).split(" ").map((t=>parseInt(t,10)))));u.length>0&&u[0].length>1&&u[0][0]===s&&(c=u[0][1]),r.codecs.forEach((t=>{if("RTX"===t.name.toUpperCase()&&t.parameters.apt){let e={ssrc:s,codecPayloadType:parseInt(t.parameters.apt,10)};s&&c&&(e.rtx={ssrc:c}),n.push(e),i&&(e=JSON.parse(JSON.stringify(e)),e.fec={ssrc:s,mechanism:o?"red+ulpfec":"red"},n.push(e))}})),0===n.length&&s&&n.push({ssrc:s});let l=e.matchPrefix(t,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substring(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substring(5),10)*.95-16e3:void 0,n.forEach((t=>{t.maxBitrate=l}))),n},e.parseRtcpParameters=function(t){const n={},r=e.matchPrefix(t,"a=ssrc:").map((t=>e.parseSsrcMedia(t))).filter((t=>"cname"===t.attribute))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);const i=e.matchPrefix(t,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;const o=e.matchPrefix(t,"a=rtcp-mux");return n.mux=o.length>0,n},e.writeRtcpParameters=function(t){let e="";return t.reducedSize&&(e+="a=rtcp-rsize\r\n"),t.mux&&(e+="a=rtcp-mux\r\n"),void 0!==t.ssrc&&t.cname&&(e+="a=ssrc:"+t.ssrc+" cname:"+t.cname+"\r\n"),e},e.parseMsid=function(t){let n;const r=e.matchPrefix(t,"a=msid:");if(1===r.length)return n=r[0].substring(7).split(" "),{stream:n[0],track:n[1]};const i=e.matchPrefix(t,"a=ssrc:").map((t=>e.parseSsrcMedia(t))).filter((t=>"msid"===t.attribute));return i.length>0?(n=i[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},e.parseSctpDescription=function(t){const n=e.parseMLine(t),r=e.matchPrefix(t,"a=max-message-size:");let i;r.length>0&&(i=parseInt(r[0].substring(19),10)),isNaN(i)&&(i=65536);const o=e.matchPrefix(t,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:n.fmt,maxMessageSize:i};const a=e.matchPrefix(t,"a=sctpmap:");if(a.length>0){const t=a[0].substring(10).split(" ");return{port:parseInt(t[0],10),protocol:t[1],maxMessageSize:i}}},e.writeSctpDescription=function(t,e){let n=[];return n="DTLS/SCTP"!==t.protocol?["m="+t.kind+" 9 "+t.protocol+" "+e.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+e.port+"\r\n"]:["m="+t.kind+" 9 "+t.protocol+" "+e.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+e.port+" "+e.protocol+" 65535\r\n"],void 0!==e.maxMessageSize&&n.push("a=max-message-size:"+e.maxMessageSize+"\r\n"),n.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(t,n,r){let i;const o=void 0!==n?n:2;return i=t||e.generateSessionId(),"v=0\r\no="+(r||"thisisadapterortc")+" "+i+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},e.getDirection=function(t,n){const r=e.splitLines(t);for(let t=0;t<r.length;t++)switch(r[t]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[t].substring(2)}return n?e.getDirection(n):"sendrecv"},e.getKind=function(t){return e.splitLines(t)[0].split(" ")[0].substring(2)},e.isRejected=function(t){return"0"===t.split(" ",2)[1]},e.parseMLine=function(t){const n=e.splitLines(t)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},e.parseOLine=function(t){const n=e.matchPrefix(t,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},e.isValidSDP=function(t){if("string"!=typeof t||0===t.length)return!1;const n=e.splitLines(t);for(let t=0;t<n.length;t++)if(n[t].length<2||"="!==n[t].charAt(1))return!1;return!0},t.exports=e}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var r={};(()=>{"use strict";n.r(r),n.d(r,{ApplicationCallOptions:()=>ai,Audio:()=>xn,AudioOptions:()=>ri,AudioQualityMode:()=>ti,AudioStats:()=>cr,CallOptions:()=>Qi,CallStatus:()=>Nn,CallsApiEvent:()=>qr,CameraOrientation:()=>Cn,CurrentMediaStats:()=>lr,DataChannelEvent:()=>ui,DeclineOptions:()=>Fo,Endpoint:()=>Lr,EndpointType:()=>Nr,FileFormat:()=>Lo,IncomingApplicationCallEvent:()=>Hi,IncomingWebrtcCallEvent:()=>wo,InfobipApplication:()=>ko,InfobipRTCEvent:()=>Oo,Media:()=>jn,MediaDevice:()=>Ri,NetworkQuality:()=>Ln,Participant:()=>kn,PhoneCallOptions:()=>Zi,PhoneCallRecordingOptions:()=>Yi,PhoneEndpoint:()=>xr,RTCMediaDevice:()=>Oi,RecordingOptions:()=>qi,RoomCallOptions:()=>Po,RoomCallRecordingOptions:()=>Do,SipEndpoint:()=>Vr,State:()=>Mn,TotalMediaStats:()=>ur,User:()=>Mo,ViberCallOptions:()=>_o,ViberCallRecordingOptions:()=>go,ViberEndpoint:()=>Fr,VideoOptions:()=>ei,WebrtcCallOptions:()=>vo,WebrtcCallRecordingOptions:()=>fo,WebrtcEndpoint:()=>jr,createInfobipRtc:()=>xo});var t={};n.r(t),n.d(t,{fixNegotiationNeeded:()=>I,shimAddTrackRemoveTrack:()=>A,shimAddTrackRemoveTrackWithNative:()=>T,shimGetDisplayMedia:()=>_,shimGetSendersWithDtmf:()=>S,shimGetStats:()=>R,shimGetUserMedia:()=>E,shimMediaStream:()=>C,shimOnTrack:()=>b,shimPeerConnection:()=>w,shimSenderReceiverGetStats:()=>O});var e={};n.r(e),n.d(e,{shimAddTransceiver:()=>F,shimCreateAnswer:()=>B,shimCreateOffer:()=>U,shimGetDisplayMedia:()=>P,shimGetParameters:()=>V,shimGetUserMedia:()=>D,shimOnTrack:()=>N,shimPeerConnection:()=>M,shimRTCDataChannel:()=>x,shimReceiverGetStats:()=>L,shimRemoveStream:()=>j,shimSenderGetStats:()=>k});var i={};n.r(i),n.d(i,{shimAudioContext:()=>Y,shimCallbacksAPI:()=>W,shimConstraints:()=>z,shimCreateOfferLegacy:()=>K,shimGetUserMedia:()=>J,shimLocalStreamsAPI:()=>H,shimRTCIceServerUrls:()=>Q,shimRemoteStreamsAPI:()=>G,shimTrackEventTransceiver:()=>q});var o={};n.r(o),n.d(o,{removeExtmapAllowMixed:()=>rt,shimAddIceCandidateNullOrEmpty:()=>it,shimConnectionState:()=>nt,shimMaxMessageSize:()=>tt,shimRTCIceCandidate:()=>X,shimSendThrowTypeError:()=>et});let a=!0,s=!0;function c(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)}function u(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(t,r){if(t!==e)return i.apply(this,arguments);const o=t=>{const e=n(t);e&&(r.handleEvent?r.handleEvent(e):r(e))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(r,o),i.apply(this,[t,o])};const o=r.removeEventListener;r.removeEventListener=function(t,n){if(t!==e||!this._eventMap||!this._eventMap[e])return o.apply(this,arguments);if(!this._eventMap[e].has(n))return o.apply(this,arguments);const r=this._eventMap[e].get(n);return this._eventMap[e].delete(n),0===this._eventMap[e].size&&delete this._eventMap[e],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[t,r])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(t){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),t&&this.addEventListener(e,this["_on"+e]=t)},enumerable:!0,configurable:!0})}function l(t){return"boolean"!=typeof t?new Error("Argument type: "+typeof t+". Please use a boolean."):(a=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function d(t){return"boolean"!=typeof t?new Error("Argument type: "+typeof t+". Please use a boolean."):(s=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function p(){if("object"==typeof window){if(a)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function f(t,e){s&&console.warn(t+" is deprecated, please use "+e+" instead.")}function h(t){return"[object Object]"===Object.prototype.toString.call(t)}function v(t){return h(t)?Object.keys(t).reduce((function(e,n){const r=h(t[n]),i=r?v(t[n]):t[n],o=r&&!Object.keys(i).length;return void 0===i||o?e:Object.assign(e,{[n]:i})}),{}):t}function m(t,e,n){e&&!n.has(e.id)&&(n.set(e.id,e),Object.keys(e).forEach((r=>{r.endsWith("Id")?m(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach((e=>{m(t,t.get(e),n)}))})))}function y(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===e)return i;const o=[];return t.forEach((t=>{"track"===t.type&&t.trackIdentifier===e.id&&o.push(t)})),o.forEach((e=>{t.forEach((n=>{n.type===r&&n.trackId===e.id&&m(t,n,i)}))})),i}const g=p;function E(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(t){if("object"!=typeof t||t.mandatory||t.optional)return t;const e={};return Object.keys(t).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"==typeof t[n]?t[n]:{ideal:t[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const i=function(t,e){return t?t+e.charAt(0).toUpperCase()+e.slice(1):"deviceId"===e?"sourceId":e};if(void 0!==r.ideal){e.optional=e.optional||[];let t={};"number"==typeof r.ideal?(t[i("min",n)]=r.ideal,e.optional.push(t),t={},t[i("max",n)]=r.ideal,e.optional.push(t)):(t[i("",n)]=r.ideal,e.optional.push(t))}void 0!==r.exact&&"number"!=typeof r.exact?(e.mandatory=e.mandatory||{},e.mandatory[i("",n)]=r.exact):["min","max"].forEach((t=>{void 0!==r[t]&&(e.mandatory=e.mandatory||{},e.mandatory[i(t,n)]=r[t])}))})),t.advanced&&(e.optional=(e.optional||[]).concat(t.advanced)),e},i=function(t,i){if(e.version>=61)return i(t);if((t=JSON.parse(JSON.stringify(t)))&&"object"==typeof t.audio){const e=function(t,e,n){e in t&&!(n in t)&&(t[n]=t[e],delete t[e])};e((t=JSON.parse(JSON.stringify(t))).audio,"autoGainControl","googAutoGainControl"),e(t.audio,"noiseSuppression","googNoiseSuppression"),t.audio=r(t.audio)}if(t&&"object"==typeof t.video){let o=t.video.facingMode;o=o&&("object"==typeof o?o:{ideal:o});const a=e.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||a)){let e;if(delete t.video.facingMode,"environment"===o.exact||"environment"===o.ideal?e=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(e=["front"]),e)return n.mediaDevices.enumerateDevices().then((n=>{let a=(n=n.filter((t=>"videoinput"===t.kind))).find((t=>e.some((e=>t.label.toLowerCase().includes(e)))));return!a&&n.length&&e.includes("back")&&(a=n[n.length-1]),a&&(t.video.deviceId=o.exact?{exact:a.deviceId}:{ideal:a.deviceId}),t.video=r(t.video),g("chrome: "+JSON.stringify(t)),i(t)}))}t.video=r(t.video)}return g("chrome: "+JSON.stringify(t)),i(t)},o=function(t){return e.version>=64?t:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[t.name]||t.name,message:t.message,constraint:t.constraint||t.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(t,e,r){i(t,(t=>{n.webkitGetUserMedia(t,e,(t=>{r&&r(o(t))}))}))}.bind(n),n.mediaDevices.getUserMedia){const t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return i(e,(e=>t(e).then((t=>{if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((t=>{t.stop()})),new DOMException("","NotFoundError");return t}),(t=>Promise.reject(o(t))))))}}}function _(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&("function"==typeof e?t.navigator.mediaDevices.getDisplayMedia=function(n){return e(n).then((e=>{const r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),t.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function C(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function b(t){if("object"==typeof t&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=e=>{e.stream.addEventListener("addtrack",(n=>{let r;r=t.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((t=>t.track&&t.track.id===n.track.id)):{track:n.track};const i=new Event("track");i.track=n.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[e.stream],this.dispatchEvent(i)})),e.stream.getTracks().forEach((n=>{let r;r=t.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((t=>t.track&&t.track.id===n.id)):{track:n};const i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=[e.stream],this.dispatchEvent(i)}))},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else u(t,"track",(t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t)))}function S(t){if("object"==typeof t&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(t,e){return{track:e,get dtmf(){return void 0===this._dtmf&&("audio"===e.kind?this._dtmf=t.createDTMFSender(e):this._dtmf=null),this._dtmf},_pc:t}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(t,r){let i=n.apply(this,arguments);return i||(i=e(this,t),this._senders.push(i)),i};const r=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(t){r.apply(this,arguments);const e=this._senders.indexOf(t);-1!==e&&this._senders.splice(e,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(t){this._senders=this._senders||[],n.apply(this,[t]),t.getTracks().forEach((t=>{this._senders.push(e(this,t))}))};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(t){this._senders=this._senders||[],r.apply(this,[t]),t.getTracks().forEach((t=>{const e=this._senders.find((e=>e.track===t));e&&this._senders.splice(this._senders.indexOf(e),1)}))}}else if("object"==typeof t&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const t=e.apply(this,[]);return t.forEach((t=>t._pc=this)),t},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function R(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[t,n,r]=arguments;if(arguments.length>0&&"function"==typeof t)return e.apply(this,arguments);if(0===e.length&&(0===arguments.length||"function"!=typeof t))return e.apply(this,[]);const i=function(t){const e={};return t.result().forEach((t=>{const n={id:t.id,timestamp:t.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[t.type]||t.type};t.names().forEach((e=>{n[e]=t.stat(e)})),e[n.id]=n})),e},o=function(t){return new Map(Object.keys(t).map((e=>[e,t[e]])))};if(arguments.length>=2){const r=function(t){n(o(i(t)))};return e.apply(this,[r,t])}return new Promise(((t,n)=>{e.apply(this,[function(e){t(o(i(e)))},n])})).then(n,r)}}function O(t){if(!("object"==typeof t&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const t=e.apply(this,[]);return t.forEach((t=>t._pc=this)),t});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const t=n.apply(this,arguments);return t._pc=this,t}),t.RTCRtpSender.prototype.getStats=function(){const t=this;return this._pc.getStats().then((e=>y(e,t.track,!0)))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const t=e.apply(this,[]);return t.forEach((t=>t._pc=this)),t}),u(t,"track",(t=>(t.receiver._pc=t.srcElement,t))),t.RTCRtpReceiver.prototype.getStats=function(){const t=this;return this._pc.getStats().then((e=>y(e,t.track,!1)))}}if(!("getStats"in t.RTCRtpSender.prototype)||!("getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const t=arguments[0];let e,n,r;return this.getSenders().forEach((n=>{n.track===t&&(e?r=!0:e=n)})),this.getReceivers().forEach((e=>(e.track===t&&(n?r=!0:n=e),e.track===t))),r||e&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):e?e.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function T(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((t=>this._shimmedLocalStreams[t][0]))};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(t,n){if(!n)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=e.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(t){this._shimmedLocalStreams=this._shimmedLocalStreams||{},t.getTracks().forEach((t=>{if(this.getSenders().find((e=>e.track===t)))throw new DOMException("Track already exists.","InvalidAccessError")}));const e=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter((t=>-1===e.indexOf(t)));this._shimmedLocalStreams[t.id]=[t].concat(r)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(t){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[t.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(t){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},t&&Object.keys(this._shimmedLocalStreams).forEach((e=>{const n=this._shimmedLocalStreams[e].indexOf(t);-1!==n&&this._shimmedLocalStreams[e].splice(n,1),1===this._shimmedLocalStreams[e].length&&delete this._shimmedLocalStreams[e]})),i.apply(this,arguments)}}function A(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return T(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((t=>this._reverseStreams[t.id]))};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(e){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},e.getTracks().forEach((t=>{if(this.getSenders().find((e=>e.track===t)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[e.id]){const n=new t.MediaStream(e.getTracks());this._streams[e.id]=n,this._reverseStreams[n.id]=e,e=n}r.apply(this,[e])};const i=t.RTCPeerConnection.prototype.removeStream;function o(t,e){let n=e.sdp;return Object.keys(t._reverseStreams||[]).forEach((e=>{const r=t._reverseStreams[e],i=t._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:e.type,sdp:n})}t.RTCPeerConnection.prototype.removeStream=function(t){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[t.id]||t]),delete this._reverseStreams[this._streams[t.id]?this._streams[t.id].id:t.id],delete this._streams[t.id]},t.RTCPeerConnection.prototype.addTrack=function(e,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((t=>t===e)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const i=this._streams[n.id];if(i)i.addTrack(e),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const r=new t.MediaStream([e]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find((t=>t.track===e))},["createOffer","createAnswer"].forEach((function(e){const n=t.RTCPeerConnection.prototype[e],r={[e](){const t=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[e=>{const n=o(this,e);t[0].apply(null,[n])},e=>{t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((t=>o(this,t)))}};t.RTCPeerConnection.prototype[e]=r[e]}));const a=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(t,e){let n=e.sdp;return Object.keys(t._reverseStreams||[]).forEach((e=>{const r=t._reverseStreams[e],i=t._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:e.type,sdp:n})}(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};const s=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const t=s.get.apply(this);return""===t.type?t:o(this,t)}}),t.RTCPeerConnection.prototype.removeTrack=function(t){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!t._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(t._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let e;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((e=>t.track===e))&&(e=this._streams[n])})),e&&(1===e.getTracks().length?this.removeStream(this._reverseStreams[e.id]):e.removeTrack(t.track),this.dispatchEvent(new Event("negotiationneeded")))}}function w(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(e){const n=t.RTCPeerConnection.prototype[e],r={[e](){return arguments[0]=new("addIceCandidate"===e?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};t.RTCPeerConnection.prototype[e]=r[e]}))}function I(t,e){u(t,"negotiationneeded",(t=>{const n=t.target;if(!(e.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return t}))}function D(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(t,e,r){f("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(t).then(e,r)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const t=function(t,e,n){e in t&&!(n in t)&&(t[n]=t[e],delete t[e])},e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),t(n.audio,"autoGainControl","mozAutoGainControl"),t(n.audio,"noiseSuppression","mozNoiseSuppression")),e(n)},r&&r.prototype.getSettings){const e=r.prototype.getSettings;r.prototype.getSettings=function(){const n=e.apply(this,arguments);return t(n,"mozAutoGainControl","autoGainControl"),t(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const e=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),t(n,"autoGainControl","mozAutoGainControl"),t(n,"noiseSuppression","mozNoiseSuppression")),e.apply(this,[n])}}}}function P(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const t=new DOMException("getDisplayMedia without video constraints is undefined");return t.name="NotFoundError",t.code=8,Promise.reject(t)}return!0===n.video?n.video={mediaSource:e}:n.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(n)})}function N(t){"object"==typeof t&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function M(t,e){if("object"!=typeof t||!t.RTCPeerConnection&&!t.mozRTCPeerConnection)return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(e){const n=t.RTCPeerConnection.prototype[e],r={[e](){return arguments[0]=new("addIceCandidate"===e?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};t.RTCPeerConnection.prototype[e]=r[e]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[t,i,o]=arguments;return r.apply(this,[t||null]).then((t=>{if(e.version<53&&!i)try{t.forEach((t=>{t.type=n[t.type]||t.type}))}catch(e){if("TypeError"!==e.name)throw e;t.forEach(((e,r)=>{t.set(r,Object.assign({},e,{type:n[e.type]||e.type}))}))}return t})).then(i,o)}}function k(t){if("object"!=typeof t||!t.RTCPeerConnection||!t.RTCRtpSender)return;if(t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const t=e.apply(this,[]);return t.forEach((t=>t._pc=this)),t});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const t=n.apply(this,arguments);return t._pc=this,t}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function L(t){if("object"!=typeof t||!t.RTCPeerConnection||!t.RTCRtpSender)return;if(t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const t=e.apply(this,[]);return t.forEach((t=>t._pc=this)),t}),u(t,"track",(t=>(t.receiver._pc=t.srcElement,t))),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function j(t){t.RTCPeerConnection&&!("removeStream"in t.RTCPeerConnection.prototype)&&(t.RTCPeerConnection.prototype.removeStream=function(t){f("removeStream","removeTrack"),this.getSenders().forEach((e=>{e.track&&t.getTracks().includes(e.track)&&this.removeTrack(e)}))})}function x(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function F(t){if("object"!=typeof t||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const t=arguments[1],n=t&&"sendEncodings"in t;n&&t.sendEncodings.forEach((t=>{if("rid"in t&&!/^[a-z0-9]{0,16}$/i.test(t.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in t&&!(parseFloat(t.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in t&&!(parseFloat(t.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const r=e.apply(this,arguments);if(n){const{sender:e}=r,n=e.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=t.sendEncodings,e.sendEncodings=t.sendEncodings,this.setParametersPromises.push(e.setParameters(n).then((()=>{delete e.sendEncodings})).catch((()=>{delete e.sendEncodings}))))}return r})}function V(t){if("object"!=typeof t||!t.RTCRtpSender)return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const t=e.apply(this,arguments);return"encodings"in t||(t.encodings=[].concat(this.sendEncodings||[{}])),t})}function U(t){if("object"!=typeof t||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>e.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):e.apply(this,arguments)}}function B(t){if("object"!=typeof t||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>e.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):e.apply(this,arguments)}}function H(t){if("object"==typeof t&&t.RTCPeerConnection){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(t){this._localStreams||(this._localStreams=[]),this._localStreams.includes(t)||this._localStreams.push(t),t.getAudioTracks().forEach((n=>e.call(this,n,t))),t.getVideoTracks().forEach((n=>e.call(this,n,t)))},t.RTCPeerConnection.prototype.addTrack=function(t,...n){return n&&n.forEach((t=>{this._localStreams?this._localStreams.includes(t)||this._localStreams.push(t):this._localStreams=[t]})),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const e=this._localStreams.indexOf(t);if(-1===e)return;this._localStreams.splice(e,1);const n=t.getTracks();this.getSenders().forEach((t=>{n.includes(t.track)&&this.removeTrack(t)}))})}}function G(t){if("object"==typeof t&&t.RTCPeerConnection&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=t=>{t.streams.forEach((t=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(t))return;this._remoteStreams.push(t);const e=new Event("addstream");e.stream=t,this.dispatchEvent(e)}))})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const t=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((e=>{if(t._remoteStreams||(t._remoteStreams=[]),t._remoteStreams.indexOf(e)>=0)return;t._remoteStreams.push(e);const n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}))}),e.apply(t,arguments)}}}function W(t){if("object"!=typeof t||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,o=e.setRemoteDescription,a=e.addIceCandidate;e.createOffer=function(t,e){const r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return e?(i.then(t,e),Promise.resolve()):i},e.createAnswer=function(t,e){const n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return e?(i.then(t,e),Promise.resolve()):i};let s=function(t,e,n){const r=i.apply(this,[t]);return n?(r.then(e,n),Promise.resolve()):r};e.setLocalDescription=s,s=function(t,e,n){const r=o.apply(this,[t]);return n?(r.then(e,n),Promise.resolve()):r},e.setRemoteDescription=s,s=function(t,e,n){const r=a.apply(this,[t]);return n?(r.then(e,n),Promise.resolve()):r},e.addIceCandidate=s}function J(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const t=e.mediaDevices,n=t.getUserMedia.bind(t);e.mediaDevices.getUserMedia=t=>n(z(t))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(t,n,r){e.mediaDevices.getUserMedia(t).then(n,r)}.bind(e))}function z(t){return t&&void 0!==t.video?Object.assign({},t,{video:v(t.video)}):t}function Q(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(t,n){if(t&&t.iceServers){const e=[];for(let n=0;n<t.iceServers.length;n++){let r=t.iceServers[n];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(f("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,e.push(r)):e.push(t.iceServers[n])}t.iceServers=e}return new e(t,n)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get:()=>e.generateCertificate})}function q(t){"object"==typeof t&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function K(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(t){if(t){void 0!==t.offerToReceiveAudio&&(t.offerToReceiveAudio=!!t.offerToReceiveAudio);const e=this.getTransceivers().find((t=>"audio"===t.receiver.track.kind));!1===t.offerToReceiveAudio&&e?"sendrecv"===e.direction?e.setDirection?e.setDirection("sendonly"):e.direction="sendonly":"recvonly"===e.direction&&(e.setDirection?e.setDirection("inactive"):e.direction="inactive"):!0!==t.offerToReceiveAudio||e||this.addTransceiver("audio"),void 0!==t.offerToReceiveVideo&&(t.offerToReceiveVideo=!!t.offerToReceiveVideo);const n=this.getTransceivers().find((t=>"video"===t.receiver.track.kind));!1===t.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==t.offerToReceiveVideo||n||this.addTransceiver("video")}return e.apply(this,arguments)}}function Y(t){"object"!=typeof t||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var $=n(347),Z=n.n($);function X(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(t){if("object"==typeof t&&t.candidate&&0===t.candidate.indexOf("a=")&&((t=JSON.parse(JSON.stringify(t))).candidate=t.candidate.substr(2)),t.candidate&&t.candidate.length){const n=new e(t),r=Z().parseCandidate(t.candidate),i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(t)},t.RTCIceCandidate.prototype=e.prototype,u(t,"icecandidate",(e=>(e.candidate&&Object.defineProperty(e,"candidate",{value:new t.RTCIceCandidate(e.candidate),writable:"false"}),e)))}function tt(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===e.browser&&e.version>=76){const{sdpSemantics:t}=this.getConfiguration();"plan-b"===t&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(t){if(!t||!t.sdp)return!1;const e=Z().splitSections(t.sdp);return e.shift(),e.some((t=>{const e=Z().parseMLine(t);return e&&"application"===e.kind&&-1!==e.protocol.indexOf("SCTP")}))}(arguments[0])){const t=function(t){const e=t.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===e||e.length<2)return-1;const n=parseInt(e[1],10);return n!=n?-1:n}(arguments[0]),n=function(t){let n=65536;return"firefox"===e.browser&&(n=e.version<57?-1===t?16384:2147483637:e.version<60?57===e.version?65535:65536:2147483637),n}(t),r=function(t,n){let r=65536;"firefox"===e.browser&&57===e.version&&(r=65535);const i=Z().matchPrefix(t.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===e.browser&&-1!==n&&(r=2147483637),r}(arguments[0],t);let i;i=0===n&&0===r?Number.POSITIVE_INFINITY:0===n||0===r?Math.max(n,r):Math.min(n,r);const o={};Object.defineProperty(o,"maxMessageSize",{get:()=>i}),this._sctp=o}return n.apply(this,arguments)}}function et(t){if(!t.RTCPeerConnection||!("createDataChannel"in t.RTCPeerConnection.prototype))return;function e(t,e){const n=t.send;t.send=function(){const r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===t.readyState&&e.sctp&&i>e.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+e.sctp.maxMessageSize+" bytes)");return n.apply(t,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const t=n.apply(this,arguments);return e(t,this),t},u(t,"datachannel",(t=>(e(t.channel,t.target),t)))}function nt(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((t=>{const n=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=t=>{const e=t.target;if(e._lastConnectionState!==e.connectionState){e._lastConnectionState=e.connectionState;const n=new Event("connectionstatechange",t);e.dispatchEvent(n)}return t},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function rt(t,e){if(!t.RTCPeerConnection)return;if("chrome"===e.browser&&e.version>=71)return;if("safari"===e.browser&&e.version>=605)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(e){if(e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")){const n=e.sdp.split("\n").filter((t=>"a=extmap-allow-mixed"!==t.trim())).join("\n");t.RTCSessionDescription&&e instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:e.type,sdp:n}):e.sdp=n}return n.apply(this,arguments)}}function it(t,e){if(!t.RTCPeerConnection||!t.RTCPeerConnection.prototype)return;const n=t.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===e.browser&&e.version<78||"firefox"===e.browser&&e.version<68||"safari"===e.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}!function({window:n}={},r={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const a=p,s=function(t){const e={browser:null,version:null};if(void 0===t||!t.navigator)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.mozGetUserMedia)e.browser="firefox",e.version=c(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===t.isSecureContext&&t.webkitRTCPeerConnection&&!t.RTCIceGatherer)e.browser="chrome",e.version=c(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!t.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return e.browser="Not a supported browser.",e;e.browser="safari",e.version=c(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype}return e}(n),u={browserDetails:s,commonShim:o,extractVersion:c,disableLog:l,disableWarnings:d,sdp:$};switch(s.browser){case"chrome":if(!t||!w||!r.shimChrome)return a("Chrome shim is not included in this adapter release."),u;if(null===s.version)return a("Chrome shim can not determine version, not shimming."),u;a("adapter.js shimming chrome."),u.browserShim=t,it(n,s),E(n,s),C(n),w(n,s),b(n),A(n,s),S(n),R(n),O(n),I(n,s),X(n),nt(n),tt(n,s),et(n),rt(n,s);break;case"firefox":if(!e||!M||!r.shimFirefox)return a("Firefox shim is not included in this adapter release."),u;a("adapter.js shimming firefox."),u.browserShim=e,it(n,s),D(n,s),M(n,s),N(n),j(n),k(n),L(n),x(n),F(n),V(n),U(n),B(n),X(n),nt(n),tt(n,s),et(n);break;case"safari":if(!i||!r.shimSafari)return a("Safari shim is not included in this adapter release."),u;a("adapter.js shimming safari."),u.browserShim=i,it(n,s),Q(n),K(n),W(n),H(n),G(n),q(n),J(n),Y(n),X(n),tt(n,s),et(n),rt(n,s);break;default:a("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window});var ot=n(343),at=n.n(ot);function st(t){this.message=t}st.prototype=new Error,st.prototype.name="InvalidCharacterError";var ct="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new st("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i=0,o=0,a="";r=e.charAt(o++);~r&&(n=i%4?64*n+r:r,i++%4)?a+=String.fromCharCode(255&n>>(-2*i&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return a};function ut(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(ct(t).replace(/(.)/g,(function(t,e){var n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(e)}catch(t){return ct(e)}}function lt(t){this.message=t}lt.prototype=new Error,lt.prototype.name="InvalidTokenError";const dt=function(t,e){if("string"!=typeof t)throw new lt("Invalid token specified");var n=!0===(e=e||{}).header?0:1;try{return JSON.parse(ut(t.split(".")[n]))}catch(t){throw new lt("Invalid token specified: "+t.message)}},pt=5e3,ft=15e3,ht=50,vt=1e3,mt=50;var yt;!function(t){t[t.OFFLINE=0]="OFFLINE",t[t.CONNECTING=1]="CONNECTING",t[t.RECONNECTING=2]="RECONNECTING",t[t.CONNECTED=3]="CONNECTED"}(yt||(yt={}));const gt=yt;var Et,_t=new Map([[yt.OFFLINE,"OFFLINE"],[yt.CONNECTING,"CONNECTING"],[yt.RECONNECTING,"RECONNECTING"],[yt.CONNECTED,"CONNECTED"]]);!function(t){t[t.MaxRetries=0]="MaxRetries"}(Et||(Et={}));var Ct=function(){function t(t,e,n,r,i){void 0===n&&(n=5e3),void 0===r&&(r=5),void 0===i&&(i=window.setTimeout.bind(window)),this.callable=t,this.delayFunction=e,this.maxDelayMs=n,this.maxRetries=r,this.timeoutFunction=i,this.awaitingTimeout=!1,this.iteration=0}return t.linearDelay=function(t,e){return e=e||t,function(n){return t+n*e}},t.fibonacciDelay=function(t){var e=(1+Math.pow(5,.5))/2,n=1-e;return function(r){return t*function(t){return Math.round((Math.pow(e,t)-Math.pow(n,t))/Math.pow(5,.5))}(r+1)}},t.exponentialDelay=function(t,e){return void 0===e&&(e=2),function(n){return Math.pow(e,n)*t}},t.prototype.retry=function(){var t,e=this;if(this.awaitingTimeout)return this;if(this.iteration>=this.maxRetries)return null===(t=this.reject)||void 0===t||t.call(this,Et.MaxRetries),this;var n=Math.min(this.maxDelayMs,this.delayFunction(this.iteration));return this.awaitingTimeout=!0,this.timeoutFunction((function(){e.awaitingTimeout=!1,e.callable(e.iteration++)}),n),this},t.prototype.catch=function(t){return this.reject=t,this},t}();const bt=Ct;var St=n(630),Rt=n.n(St);const Ot=function(){function t(){}return t.isMobile=function(){var t=this.browser.getOSName(!0);return t.includes("android")||t.includes("ios")},t.isWeb=function(){return!this.isMobile()},t.getBrowser=function(){return this.browser.getBrowser()},t.getOS=function(){return this.browser.getOS()},t.browser=Rt().getParser(window.navigator.userAgent),t}();var Tt,At,wt=function(){function t(t,e,n){this.eventEmitter=t,this.logger=e,this.token=n,this.status=gt.OFFLINE,this.url=this.generatePortunusUrl(dt(n)),this.deviceInfo=this.encodeDeviceInfo(),this.initRetry()}return t.prototype.connect=function(t){void 0===t&&(t=!1),this.ws=new WebSocket("wss://".concat(this.url),[this.token,this.deviceInfo]),this.status=t?gt.RECONNECTING:gt.CONNECTING,this.ws.onopen=this.onOpen.bind(this),this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=this.onMessage.bind(this),this.ws.onerror=this.onError.bind(this)},t.prototype.disconnect=function(){this.status===gt.CONNECTED&&this.ws.close(4e3,"USER_DISCONNECT"),this.status=gt.OFFLINE},t.prototype.send=function(t){var e;if(this.status===gt.CONNECTED){this.logSendingMessage(t);var n=JSON.stringify(t);this.ws.send(n)}else null===(e=this.logger)||void 0===e||e.error("Socket to Infobip WebRTC Gateway not opened, could not send ".concat(JSON.stringify(t),"!"))},t.prototype.setLogger=function(t){this.logger=t},t.prototype.encodeDeviceInfo=function(){var t=JSON.stringify(this.generateDeviceInfo());return this.base64EncodeUrl(window.btoa(t))},t.prototype.generatePortunusUrl=function(t){var e=t.location;return e?"io"===e?"portunus.ioinfobip.com":"iop1"===e?"portunus-iop1.ioinfobip.com":"portunus-"+e+".infobip.com":"portunus.infobip.com"},t.prototype.logSendingMessage=function(t){var e;"heartbeat"!==t.action&&"heartbeat_resp"!==t.action&&(null===(e=this.logger)||void 0===e||e.debug("Sending ".concat(JSON.stringify(t)," to Infobip WebRTC Gateway...")))},t.prototype.onOpen=function(){var t,e=this;null===(t=this.logger)||void 0===t||t.info("Socket to Infobip WebRTC Gateway opened."),this.status===gt.RECONNECTING&&this.eventEmitter.once("registered",(function(t){e.eventEmitter.emit("reconnected")})),this.status=gt.CONNECTED,this.scheduleHeartbeat(),this.initRetry()},t.prototype.onMessage=function(t){var e=JSON.parse(t.data);this.logReceivedMessage(e),"heartbeat_resp"!==e.event?"heartbeat"!==e.event?("registration_failed"===e.event&&this.disconnect(),this.eventEmitter.emit(e.event,e)):this.sendHeartbeatResponse():this.cancelHeartbeatCheck()},t.prototype.sendHeartbeatResponse=function(){this.send({action:"heartbeat_resp"})},t.prototype.logReceivedMessage=function(t){var e;"heartbeat_resp"!==t.event&&"heartbeat"!==t.event&&(null===(e=this.logger)||void 0===e||e.debug("Received message from Infobip Gateway: ".concat(JSON.stringify(t),".")))},t.prototype.onClose=function(t){var e;null===(e=this.logger)||void 0===e||e.info("Socket closed, code ".concat(t.code,", reason: ").concat(t.reason,"."));var n=this.status;this.status=gt.OFFLINE,this.cleanup(),n!==gt.OFFLINE&&t.code<4e3?(this.retry.retry(),n===gt.CONNECTED&&this.eventEmitter.emit("reconnecting")):this.eventEmitter.emit("disconnected",t)},t.prototype.cleanup=function(){clearInterval(this.heartbeat),this.cancelHeartbeatCheck(),this.ws.onopen=null,this.ws.onclose=null,this.ws.onmessage=null,this.ws.onerror=null,delete this.ws},t.prototype.onError=function(t){var e;null===(e=this.logger)||void 0===e||e.error("Socket error: ".concat(JSON.stringify(t),"."))},t.prototype.scheduleHeartbeat=function(){var t=this;this.heartbeat=setInterval((function(){t.ws.readyState===WebSocket.OPEN&&(t.send({action:"heartbeat"}),t.scheduleHeartbeatCheck())}),pt)},t.prototype.scheduleHeartbeatCheck=function(){var t,e=this;this.heartbeatCheck?null===(t=this.logger)||void 0===t||t.warn("Did not receive previous heartbeat response, skipping new heartbeat check."):this.heartbeatCheck=setTimeout((function(){var t;null===(t=e.logger)||void 0===t||t.info("No heartbeat response in ".concat(ft," milliseconds. Closing socket...")),e.onClose({code:3e3,reason:"Heartbeat timeout."})}),ft)},t.prototype.initRetry=function(){var t=this;this.retry=new bt((function(e){var n;null===(n=t.logger)||void 0===n||n.info("Reconnect attempt ".concat(e,"...")),t.connect(!0)}),bt.exponentialDelay(ht),vt,mt).catch((function(e){var n;null===(n=t.logger)||void 0===n||n.info("Reconnecting failed, reason: ".concat(e)),t.eventEmitter.emit("disconnected",{reason:"Connection error."})}))},t.prototype.generateDeviceInfo=function(){return{sdk:{type:"js",version:"2.1.28"},device:{browser:Ot.getBrowser(),os:Ot.getOS()}}},t.prototype.base64EncodeUrl=function(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},t.prototype.cancelHeartbeatCheck=function(){clearTimeout(this.heartbeatCheck),this.heartbeatCheck=void 0},t}(),It=(Tt=function(t,e){return Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Tt(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Tt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Dt=function(){return Dt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Dt.apply(this,arguments)},Pt=function(t,e,n,r){void 0===r&&(r=Date.now()),this.event=t,this.callId=e,this.data=n,this.timestamp=r},Nt=(It((function(t,e){return At.call(this,"ice-connection-change",t,e)||this}),At=Pt),function(t){function e(e,n){return t.call(this,"ice-selected-candidate-pair",e,n)||this}return It(e,t),e}(Pt)),Mt=function(t){function e(e,n,r,i,o,a){return t.call(this,e,r,{stats:o,peerConnection:i,conferenceId:n},a)||this}return It(e,t),e}(Pt),kt=(function(t){It((function(e,n){return t.call(this,"call-feedback",e,n)||this}),t)}(Pt),function(t){It((function(e,n){return t.call(this,"conference-feedback",e,Dt(Dt({},n),{conferenceId:e}))||this}),t)}(Pt),function(t){function e(e,n){return t.call(this,"error",e,n)||this}return It(e,t),e}(Pt));function Lt(t,e){return function(){return t.apply(e,arguments)}}const{toString:jt}=Object.prototype,{getPrototypeOf:xt}=Object,Ft=(Vt=Object.create(null),t=>{const e=jt.call(t);return Vt[e]||(Vt[e]=e.slice(8,-1).toLowerCase())});var Vt;const Ut=t=>(t=t.toLowerCase(),e=>Ft(e)===t),Bt=t=>e=>typeof e===t,{isArray:Ht}=Array,Gt=Bt("undefined"),Wt=Ut("ArrayBuffer"),Jt=Bt("string"),zt=Bt("function"),Qt=Bt("number"),qt=t=>null!==t&&"object"==typeof t,Kt=t=>{if("object"!==Ft(t))return!1;const e=xt(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)},Yt=Ut("Date"),$t=Ut("File"),Zt=Ut("Blob"),Xt=Ut("FileList"),te=Ut("URLSearchParams");function ee(t,e,{allOwnKeys:n=!1}={}){if(null==t)return;let r,i;if("object"!=typeof t&&(t=[t]),Ht(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function ne(t,e){e=e.toLowerCase();const n=Object.keys(t);let r,i=n.length;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const re="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,ie=t=>!Gt(t)&&t!==re,oe=(ae="undefined"!=typeof Uint8Array&&xt(Uint8Array),t=>ae&&t instanceof ae);var ae;const se=Ut("HTMLFormElement"),ce=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),ue=Ut("RegExp"),le=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};ee(n,((n,i)=>{let o;!1!==(o=e(n,i,t))&&(r[i]=o||n)})),Object.defineProperties(t,r)},de="abcdefghijklmnopqrstuvwxyz",pe="0123456789",fe={DIGIT:pe,ALPHA:de,ALPHA_DIGIT:de+de.toUpperCase()+pe},he=Ut("AsyncFunction"),ve={isArray:Ht,isArrayBuffer:Wt,isBuffer:function(t){return null!==t&&!Gt(t)&&null!==t.constructor&&!Gt(t.constructor)&&zt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{let e;return t&&("function"==typeof FormData&&t instanceof FormData||zt(t.append)&&("formdata"===(e=Ft(t))||"object"===e&&zt(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&Wt(t.buffer),e},isString:Jt,isNumber:Qt,isBoolean:t=>!0===t||!1===t,isObject:qt,isPlainObject:Kt,isUndefined:Gt,isDate:Yt,isFile:$t,isBlob:Zt,isRegExp:ue,isFunction:zt,isStream:t=>qt(t)&&zt(t.pipe),isURLSearchParams:te,isTypedArray:oe,isFileList:Xt,forEach:ee,merge:function t(){const{caseless:e}=ie(this)&&this||{},n={},r=(r,i)=>{const o=e&&ne(n,i)||i;Kt(n[o])&&Kt(r)?n[o]=t(n[o],r):Kt(r)?n[o]=t({},r):Ht(r)?n[o]=r.slice():n[o]=r};for(let t=0,e=arguments.length;t<e;t++)arguments[t]&&ee(arguments[t],r);return n},extend:(t,e,n,{allOwnKeys:r}={})=>(ee(e,((e,r)=>{n&&zt(e)?t[r]=Lt(e,n):t[r]=e}),{allOwnKeys:r}),t),trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject:(t,e,n,r)=>{let i,o,a;const s={};if(e=e||{},null==t)return e;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)a=i[o],r&&!r(a,t,e)||s[a]||(e[a]=t[a],s[a]=!0);t=!1!==n&&xt(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:Ft,kindOfTest:Ut,endsWith:(t,e,n)=>{t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return-1!==r&&r===n},toArray:t=>{if(!t)return null;if(Ht(t))return t;let e=t.length;if(!Qt(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},forEachEntry:(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=n.next())&&!r.done;){const n=r.value;e.call(t,n[0],n[1])}},matchAll:(t,e)=>{let n;const r=[];for(;null!==(n=t.exec(e));)r.push(n);return r},isHTMLForm:se,hasOwnProperty:ce,hasOwnProp:ce,reduceDescriptors:le,freezeMethods:t=>{le(t,((e,n)=>{if(zt(t)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=t[n];zt(r)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(t,e)=>{const n={},r=t=>{t.forEach((t=>{n[t]=!0}))};return Ht(t)?r(t):r(String(t).split(e)),n},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,n){return e.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(t,e)=>(t=+t,Number.isFinite(t)?t:e),findKey:ne,global:re,isContextDefined:ie,ALPHABET:fe,generateString:(t=16,e=fe.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n},isSpecCompliantForm:function(t){return!!(t&&zt(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:t=>{const e=new Array(10),n=(t,r)=>{if(qt(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[r]=t;const i=Ht(t)?[]:{};return ee(t,((t,e)=>{const o=n(t,r+1);!Gt(o)&&(i[e]=o)})),e[r]=void 0,i}}return t};return n(t,0)},isAsyncFn:he,isThenable:t=>t&&(qt(t)||zt(t))&&zt(t.then)&&zt(t.catch)};function me(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}ve.inherits(me,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ve.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const ye=me.prototype,ge={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((t=>{ge[t]={value:t}})),Object.defineProperties(me,ge),Object.defineProperty(ye,"isAxiosError",{value:!0}),me.from=(t,e,n,r,i,o)=>{const a=Object.create(ye);return ve.toFlatObject(t,a,(function(t){return t!==Error.prototype}),(t=>"isAxiosError"!==t)),me.call(a,t.message,e,n,r,i),a.cause=t,a.name=t.name,o&&Object.assign(a,o),a};const Ee=me;function _e(t){return ve.isPlainObject(t)||ve.isArray(t)}function Ce(t){return ve.endsWith(t,"[]")?t.slice(0,-2):t}function be(t,e,n){return t?t.concat(e).map((function(t,e){return t=Ce(t),!n&&e?"["+t+"]":t})).join(n?".":""):e}const Se=ve.toFlatObject(ve,{},null,(function(t){return/^is[A-Z]/.test(t)})),Re=function(t,e,n){if(!ve.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;const r=(n=ve.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!ve.isUndefined(e[t])}))).metaTokens,i=n.visitor||u,o=n.dots,a=n.indexes,s=(n.Blob||"undefined"!=typeof Blob&&Blob)&&ve.isSpecCompliantForm(e);if(!ve.isFunction(i))throw new TypeError("visitor must be a function");function c(t){if(null===t)return"";if(ve.isDate(t))return t.toISOString();if(!s&&ve.isBlob(t))throw new Ee("Blob is not supported. Use a Buffer instead.");return ve.isArrayBuffer(t)||ve.isTypedArray(t)?s&&"function"==typeof Blob?new Blob([t]):Buffer.from(t):t}function u(t,n,i){let s=t;if(t&&!i&&"object"==typeof t)if(ve.endsWith(n,"{}"))n=r?n:n.slice(0,-2),t=JSON.stringify(t);else if(ve.isArray(t)&&function(t){return ve.isArray(t)&&!t.some(_e)}(t)||(ve.isFileList(t)||ve.endsWith(n,"[]"))&&(s=ve.toArray(t)))return n=Ce(n),s.forEach((function(t,r){!ve.isUndefined(t)&&null!==t&&e.append(!0===a?be([n],r,o):null===a?n:n+"[]",c(t))})),!1;return!!_e(t)||(e.append(be(i,n,o),c(t)),!1)}const l=[],d=Object.assign(Se,{defaultVisitor:u,convertValue:c,isVisitable:_e});if(!ve.isObject(t))throw new TypeError("data must be an object");return function t(n,r){if(!ve.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),ve.forEach(n,(function(n,o){!0===(!(ve.isUndefined(n)||null===n)&&i.call(e,n,ve.isString(o)?o.trim():o,r,d))&&t(n,r?r.concat(o):[o])})),l.pop()}}(t),e};function Oe(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function Te(t,e){this._pairs=[],t&&Re(t,this,e)}const Ae=Te.prototype;Ae.append=function(t,e){this._pairs.push([t,e])},Ae.toString=function(t){const e=t?function(e){return t.call(this,e,Oe)}:Oe;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};const we=Te;function Ie(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function De(t,e,n){if(!e)return t;const r=n&&n.encode||Ie,i=n&&n.serialize;let o;if(o=i?i(e,n):ve.isURLSearchParams(e)?e.toString():new we(e,n).toString(r),o){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}const Pe=class{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ve.forEach(this.handlers,(function(e){null!==e&&t(e)}))}},Ne={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Me={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:we,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:(()=>{let t;return("undefined"==typeof navigator||"ReactNative"!==(t=navigator.product)&&"NativeScript"!==t&&"NS"!==t)&&"undefined"!=typeof window&&"undefined"!=typeof document})(),isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]},ke=function(t){function e(t,n,r,i){let o=t[i++];const a=Number.isFinite(+o),s=i>=t.length;return o=!o&&ve.isArray(r)?r.length:o,s?(ve.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!a):(r[o]&&ve.isObject(r[o])||(r[o]=[]),e(t,n,r[o],i)&&ve.isArray(r[o])&&(r[o]=function(t){const e={},n=Object.keys(t);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],e[o]=t[o];return e}(r[o])),!a)}if(ve.isFormData(t)&&ve.isFunction(t.entries)){const n={};return ve.forEachEntry(t,((t,r)=>{e(function(t){return ve.matchAll(/\w+|\[(\w*)]/g,t).map((t=>"[]"===t[0]?"":t[1]||t[0]))}(t),r,n,0)})),n}return null},Le={transitional:Ne,adapter:["xhr","http"],transformRequest:[function(t,e){const n=e.getContentType()||"",r=n.indexOf("application/json")>-1,i=ve.isObject(t);if(i&&ve.isHTMLForm(t)&&(t=new FormData(t)),ve.isFormData(t))return r&&r?JSON.stringify(ke(t)):t;if(ve.isArrayBuffer(t)||ve.isBuffer(t)||ve.isStream(t)||ve.isFile(t)||ve.isBlob(t))return t;if(ve.isArrayBufferView(t))return t.buffer;if(ve.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return Re(t,new Me.classes.URLSearchParams,Object.assign({visitor:function(t,e,n,r){return Me.isNode&&ve.isBuffer(t)?(this.append(e,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((o=ve.isFileList(t))||n.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return Re(o?{"files[]":t}:t,e&&new e,this.formSerializer)}}return i||r?(e.setContentType("application/json",!1),function(t,e,n){if(ve.isString(t))try{return(0,JSON.parse)(t),ve.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(0,JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||Le.transitional,n=e&&e.forcedJSONParsing,r="json"===this.responseType;if(t&&ve.isString(t)&&(n&&!this.responseType||r)){const n=!(e&&e.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(t){if(n){if("SyntaxError"===t.name)throw Ee.from(t,Ee.ERR_BAD_RESPONSE,this,null,this.response);throw t}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Me.classes.FormData,Blob:Me.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ve.forEach(["delete","get","head","post","put","patch"],(t=>{Le.headers[t]={}}));const je=Le,xe=ve.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Fe=Symbol("internals");function Ve(t){return t&&String(t).trim().toLowerCase()}function Ue(t){return!1===t||null==t?t:ve.isArray(t)?t.map(Ue):String(t)}function Be(t,e,n,r,i){return ve.isFunction(r)?r.call(this,e,n):(i&&(e=n),ve.isString(e)?ve.isString(r)?-1!==e.indexOf(r):ve.isRegExp(r)?r.test(e):void 0:void 0)}class He{constructor(t){t&&this.set(t)}set(t,e,n){const r=this;function i(t,e,n){const i=Ve(e);if(!i)throw new Error("header name must be a non-empty string");const o=ve.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||e]=Ue(t))}const o=(t,e)=>ve.forEach(t,((t,n)=>i(t,n,e)));return ve.isPlainObject(t)||t instanceof this.constructor?o(t,e):ve.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim())?o((t=>{const e={};let n,r,i;return t&&t.split("\n").forEach((function(t){i=t.indexOf(":"),n=t.substring(0,i).trim().toLowerCase(),r=t.substring(i+1).trim(),!n||e[n]&&xe[n]||("set-cookie"===n?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)})),e})(t),e):null!=t&&i(e,t,n),this}get(t,e){if(t=Ve(t)){const n=ve.findKey(this,t);if(n){const t=this[n];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}(t);if(ve.isFunction(e))return e.call(this,t,n);if(ve.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Ve(t)){const n=ve.findKey(this,t);return!(!n||void 0===this[n]||e&&!Be(0,this[n],n,e))}return!1}delete(t,e){const n=this;let r=!1;function i(t){if(t=Ve(t)){const i=ve.findKey(n,t);!i||e&&!Be(0,n[i],i,e)||(delete n[i],r=!0)}}return ve.isArray(t)?t.forEach(i):i(t),r}clear(t){const e=Object.keys(this);let n=e.length,r=!1;for(;n--;){const i=e[n];t&&!Be(0,this[i],i,t,!0)||(delete this[i],r=!0)}return r}normalize(t){const e=this,n={};return ve.forEach(this,((r,i)=>{const o=ve.findKey(n,i);if(o)return e[o]=Ue(r),void delete e[i];const a=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((t,e,n)=>e.toUpperCase()+n))}(i):String(i).trim();a!==i&&delete e[i],e[a]=Ue(r),n[a]=!0})),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return ve.forEach(this,((n,r)=>{null!=n&&!1!==n&&(e[r]=t&&ve.isArray(n)?n.join(", "):n)})),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([t,e])=>t+": "+e)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach((t=>n.set(t))),n}static accessor(t){const e=(this[Fe]=this[Fe]={accessors:{}}).accessors,n=this.prototype;function r(t){const r=Ve(t);e[r]||(function(t,e){const n=ve.toCamelCase(" "+e);["get","set","has"].forEach((r=>{Object.defineProperty(t,r+n,{value:function(t,n,i){return this[r].call(this,e,t,n,i)},configurable:!0})}))}(n,t),e[r]=!0)}return ve.isArray(t)?t.forEach(r):r(t),this}}He.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),ve.reduceDescriptors(He.prototype,(({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(t){this[n]=t}}})),ve.freezeMethods(He);const Ge=He;function We(t,e){const n=this||je,r=e||n,i=Ge.from(r.headers);let o=r.data;return ve.forEach(t,(function(t){o=t.call(n,o,i.normalize(),e?e.status:void 0)})),i.normalize(),o}function Je(t){return!(!t||!t.__CANCEL__)}function ze(t,e,n){Ee.call(this,null==t?"canceled":t,Ee.ERR_CANCELED,e,n),this.name="CanceledError"}ve.inherits(ze,Ee,{__CANCEL__:!0});const Qe=ze,qe=Me.isStandardBrowserEnv?{write:function(t,e,n,r,i,o){const a=[];a.push(t+"="+encodeURIComponent(e)),ve.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),ve.isString(r)&&a.push("path="+r),ve.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Ke(t,e){return t&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}const Ye=Me.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function r(n){let r=n;return t&&(e.setAttribute("href",r),r=e.href),e.setAttribute("href",r),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return n=r(window.location.href),function(t){const e=ve.isString(t)?r(t):t;return e.protocol===n.protocol&&e.host===n.host}}():function(){return!0};function $e(t,e){let n=0;const r=function(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i,o=0,a=0;return e=void 0!==e?e:1e3,function(s){const c=Date.now(),u=r[a];i||(i=c),n[o]=s,r[o]=c;let l=a,d=0;for(;l!==o;)d+=n[l++],l%=t;if(o=(o+1)%t,o===a&&(a=(a+1)%t),c-i<e)return;const p=u&&c-u;return p?Math.round(1e3*d/p):void 0}}(50,250);return i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,s=o-n,c=r(s);n=o;const u={loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:c||void 0,estimated:c&&a&&o<=a?(a-o)/c:void 0,event:i};u[e?"download":"upload"]=!0,t(u)}}const Ze={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(t){return new Promise((function(e,n){let r=t.data;const i=Ge.from(t.headers).normalize(),o=t.responseType;let a,s;function c(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}ve.isFormData(r)&&(Me.isStandardBrowserEnv||Me.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.getContentType(/^\s*multipart\/form-data/)?ve.isString(s=i.getContentType())&&i.setContentType(s.replace(/^\s*(multipart\/form-data);+/,"$1")):i.setContentType("multipart/form-data"));let u=new XMLHttpRequest;if(t.auth){const e=t.auth.username||"",n=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(e+":"+n))}const l=Ke(t.baseURL,t.url);function d(){if(!u)return;const r=Ge.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());!function(t,e,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(new Ee("Request failed with status code "+n.status,[Ee.ERR_BAD_REQUEST,Ee.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}((function(t){e(t),c()}),(function(t){n(t),c()}),{data:o&&"text"!==o&&"json"!==o?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:t,request:u}),u=null}if(u.open(t.method.toUpperCase(),De(l,t.params,t.paramsSerializer),!0),u.timeout=t.timeout,"onloadend"in u?u.onloadend=d:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(d)},u.onabort=function(){u&&(n(new Ee("Request aborted",Ee.ECONNABORTED,t,u)),u=null)},u.onerror=function(){n(new Ee("Network Error",Ee.ERR_NETWORK,t,u)),u=null},u.ontimeout=function(){let e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const r=t.transitional||Ne;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(new Ee(e,r.clarifyTimeoutError?Ee.ETIMEDOUT:Ee.ECONNABORTED,t,u)),u=null},Me.isStandardBrowserEnv){const e=Ye(l)&&t.xsrfCookieName&&qe.read(t.xsrfCookieName);e&&i.set(t.xsrfHeaderName,e)}void 0===r&&i.setContentType(null),"setRequestHeader"in u&&ve.forEach(i.toJSON(),(function(t,e){u.setRequestHeader(e,t)})),ve.isUndefined(t.withCredentials)||(u.withCredentials=!!t.withCredentials),o&&"json"!==o&&(u.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&u.addEventListener("progress",$e(t.onDownloadProgress,!0)),"function"==typeof t.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",$e(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=e=>{u&&(n(!e||e.type?new Qe(null,t,u):e),u.abort(),u=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const p=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(l);p&&-1===Me.protocols.indexOf(p)?n(new Ee("Unsupported protocol "+p+":",Ee.ERR_BAD_REQUEST,t)):u.send(r||null)}))}};ve.forEach(Ze,((t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(t){}Object.defineProperty(t,"adapterName",{value:e})}}));const Xe=t=>`- ${t}`,tn=t=>ve.isFunction(t)||null===t||!1===t,en=t=>{t=ve.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let o=0;o<e;o++){let e;if(n=t[o],r=n,!tn(n)&&(r=Ze[(e=String(n)).toLowerCase()],void 0===r))throw new Ee(`Unknown adapter '${e}'`);if(r)break;i[e||"#"+o]=r}if(!r){const t=Object.entries(i).map((([t,e])=>`adapter ${t} `+(!1===e?"is not supported by the environment":"is not available in the build")));let n=e?t.length>1?"since :\n"+t.map(Xe).join("\n"):" "+Xe(t[0]):"as no adapter specified";throw new Ee("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function nn(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Qe(null,t)}function rn(t){return nn(t),t.headers=Ge.from(t.headers),t.data=We.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1),en(t.adapter||je.adapter)(t).then((function(e){return nn(t),e.data=We.call(t,t.transformResponse,e),e.headers=Ge.from(e.headers),e}),(function(e){return Je(e)||(nn(t),e&&e.response&&(e.response.data=We.call(t,t.transformResponse,e.response),e.response.headers=Ge.from(e.response.headers))),Promise.reject(e)}))}const on=t=>t instanceof Ge?t.toJSON():t;function an(t,e){e=e||{};const n={};function r(t,e,n){return ve.isPlainObject(t)&&ve.isPlainObject(e)?ve.merge.call({caseless:n},t,e):ve.isPlainObject(e)?ve.merge({},e):ve.isArray(e)?e.slice():e}function i(t,e,n){return ve.isUndefined(e)?ve.isUndefined(t)?void 0:r(void 0,t,n):r(t,e,n)}function o(t,e){if(!ve.isUndefined(e))return r(void 0,e)}function a(t,e){return ve.isUndefined(e)?ve.isUndefined(t)?void 0:r(void 0,t):r(void 0,e)}function s(n,i,o){return o in e?r(n,i):o in t?r(void 0,n):void 0}const c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(t,e)=>i(on(t),on(e),!0)};return ve.forEach(Object.keys(Object.assign({},t,e)),(function(r){const o=c[r]||i,a=o(t[r],e[r],r);ve.isUndefined(a)&&o!==s||(n[r]=a)})),n}const sn={};["object","boolean","number","function","string","symbol"].forEach(((t,e)=>{sn[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));const cn={};sn.transitional=function(t,e,n){function r(t,e){return"[Axios v1.6.0] Transitional option '"+t+"'"+e+(n?". "+n:"")}return(n,i,o)=>{if(!1===t)throw new Ee(r(i," has been removed"+(e?" in "+e:"")),Ee.ERR_DEPRECATED);return e&&!cn[i]&&(cn[i]=!0,console.warn(r(i," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,i,o)}};const un={assertOptions:function(t,e,n){if("object"!=typeof t)throw new Ee("options must be an object",Ee.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const o=r[i],a=e[o];if(a){const e=t[o],n=void 0===e||a(e,o,t);if(!0!==n)throw new Ee("option "+o+" must be "+n,Ee.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Ee("Unknown option "+o,Ee.ERR_BAD_OPTION)}},validators:sn},ln=un.validators;class dn{constructor(t){this.defaults=t,this.interceptors={request:new Pe,response:new Pe}}request(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},e=an(this.defaults,e);const{transitional:n,paramsSerializer:r,headers:i}=e;void 0!==n&&un.assertOptions(n,{silentJSONParsing:ln.transitional(ln.boolean),forcedJSONParsing:ln.transitional(ln.boolean),clarifyTimeoutError:ln.transitional(ln.boolean)},!1),null!=r&&(ve.isFunction(r)?e.paramsSerializer={serialize:r}:un.assertOptions(r,{encode:ln.function,serialize:ln.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=i&&ve.merge(i.common,i[e.method]);i&&ve.forEach(["delete","get","head","post","put","patch","common"],(t=>{delete i[t]})),e.headers=Ge.concat(o,i);const a=[];let s=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(s=s&&t.synchronous,a.unshift(t.fulfilled,t.rejected))}));const c=[];let u;this.interceptors.response.forEach((function(t){c.push(t.fulfilled,t.rejected)}));let l,d=0;if(!s){const t=[rn.bind(this),void 0];for(t.unshift.apply(t,a),t.push.apply(t,c),l=t.length,u=Promise.resolve(e);d<l;)u=u.then(t[d++],t[d++]);return u}l=a.length;let p=e;for(d=0;d<l;){const t=a[d++],e=a[d++];try{p=t(p)}catch(t){e.call(this,t);break}}try{u=rn.call(this,p)}catch(t){return Promise.reject(t)}for(d=0,l=c.length;d<l;)u=u.then(c[d++],c[d++]);return u}getUri(t){return De(Ke((t=an(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}}ve.forEach(["delete","get","head","options"],(function(t){dn.prototype[t]=function(e,n){return this.request(an(n||{},{method:t,url:e,data:(n||{}).data}))}})),ve.forEach(["post","put","patch"],(function(t){function e(e){return function(n,r,i){return this.request(an(i||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}dn.prototype[t]=e(),dn.prototype[t+"Form"]=e(!0)}));const pn=dn;class fn{constructor(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(t){e=t}));const n=this;this.promise.then((t=>{if(!n._listeners)return;let e=n._listeners.length;for(;e-- >0;)n._listeners[e](t);n._listeners=null})),this.promise.then=t=>{let e;const r=new Promise((t=>{n.subscribe(t),e=t})).then(t);return r.cancel=function(){n.unsubscribe(e)},r},t((function(t,r,i){n.reason||(n.reason=new Qe(t,r,i),e(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}static source(){let t;return{token:new fn((function(e){t=e})),cancel:t}}}const hn=fn,vn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vn).forEach((([t,e])=>{vn[e]=t}));const mn=vn,yn=function t(e){const n=new pn(e),r=Lt(pn.prototype.request,n);return ve.extend(r,pn.prototype,n,{allOwnKeys:!0}),ve.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return t(an(e,n))},r}(je);yn.Axios=pn,yn.CanceledError=Qe,yn.CancelToken=hn,yn.isCancel=Je,yn.VERSION="1.6.0",yn.toFormData=Re,yn.AxiosError=Ee,yn.Cancel=yn.CanceledError,yn.all=function(t){return Promise.all(t)},yn.spread=function(t){return function(e){return t.apply(null,e)}},yn.isAxiosError=function(t){return ve.isObject(t)&&!0===t.isAxiosError},yn.mergeConfig=an,yn.AxiosHeaders=Ge,yn.formToJSON=t=>ke(ve.isHTMLForm(t)?new FormData(t):t),yn.getAdapter=en,yn.HttpStatusCode=mn,yn.default=yn;const gn=yn;var En,_n=function(t){void 0===t&&(t=null),this.period=t};!function(t){t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARNING=3]="WARNING",t[t.ERROR=4]="ERROR",t[t.OFF=5]="OFF"}(En||(En={}));var Cn,bn=new Map([[En.DEBUG,"DEBUG"],[En.INFO,"INFO"],[En.WARNING,"WARNING"],[En.ERROR,"ERROR"],[En.OFF,"OFF"]]),Sn=n(84),Rn=n.n(Sn),On=function(){function t(t,e,n,r){void 0===e&&(e=new _n),void 0===n&&(n="api.infobip.com"),void 0===r&&(r=En.ERROR),this.token=t,this.options=e,this.apiUrl=n,this.logLevel=r,this.logs=[],this.token=t,this.interval=this.createInterval(this,e.period),this.httpClient=gn.create({baseURL:"https://".concat(n),headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}})}return t.ifNotForbidden=function(e){return e.response&&e.response.status!==t.FORBIDDEN_STATUS_CODE},t.prototype.log=function(t){this.logs.push(t)},t.prototype.debug=function(t,e){this.logMessage(En.DEBUG,t,e)},t.prototype.info=function(t,e){this.logMessage(En.INFO,t,e)},t.prototype.warn=function(t,e){this.logMessage(En.WARNING,t,e)},t.prototype.error=function(t,e){this.logMessage(En.ERROR,t,e)},t.prototype.stop=function(){clearInterval(this.interval),this.sendLogs()},t.prototype.setOptions=function(t){t.period&&(clearInterval(this.interval),this.createInterval(this,t.period))},t.prototype.setApiUrl=function(t){t&&t!==this.apiUrl&&(this.apiUrl=t,this.httpClient=gn.create({baseURL:"https://".concat(t),headers:{Authorization:"Bearer ".concat(this.token),"Content-Type":"application/json"}}))},t.prototype.setLogLevel=function(t){En[t]&&(this.logLevel=En[t])},t.prototype.logMessage=function(t,e,n){switch(void 0===n&&(n=null),t){case En.DEBUG:Rn().debug(e);break;case En.INFO:Rn().info(e);break;case En.WARNING:Rn().warn(e);break;case En.ERROR:Rn().error(e)}t>=this.logLevel&&this.log(new Pt(bn.get(t),n,{message:e}))},t.prototype.sendLogs=function(){if(0!==this.logs.length){var e=this.logs;this.logs=[];var n=this;this.httpClient.request({method:"POST",url:"/webrtc/1/log",data:{logEvents:e}}).catch((function(r){t.ifNotForbidden(r)&&(n.logs=n.logs.concat(e))}))}},t.prototype.createInterval=function(e,n){return setInterval((function(){e.sendLogs()}),n||t.DEFAULT_PERIOD)},t.DEFAULT_PERIOD=5e3,t.FORBIDDEN_STATUS_CODE=403,t}();!function(t){t.FRONT="user",t.BACK="environment"}(Cn||(Cn={}));var Tn=n(784),An=n.n(Tn),wn=function(){return wn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},wn.apply(this,arguments)},In=function(){function t(){this.deviceKindNames={audioinput:"Microphone",audiooutput:"Speaker",videoinput:"Camera"},this.getMicrophoneDefaults=function(){return{noiseSuppression:!0,echoCancellation:!0}},this.getCameraDefaults=function(t){return void 0===t&&(t=!1),{width:t?1280:640,height:t?720:480,frameRate:30}},this.getScreenShareDefaults=function(){return{width:{max:1920},height:{max:1080},frameRate:8,cursor:"always"}}}return t.prototype.getAudioInputDevices=function(){var t=this;return this.getDevices("audioinput").then((function(e){return t.updateDevices(e)}))},t.prototype.getAudioOutputDevices=function(){var t=this;return this.getDevices("audiooutput").then((function(e){return t.updateDevices(e)}))},t.prototype.getVideoInputDevices=function(){var t=this;return this.getDevices("videoinput").then((function(e){return t.updateDevices(e)}))},t.prototype.setAudioInputDevice=function(t){this.audioInputDevice={deviceId:t,kind:"audioinput"}},t.prototype.unsetAudioInputDevice=function(){this.audioInputDevice=null},t.prototype.getAudioInputDevice=function(){var t;return null===(t=this.audioInputDevice)||void 0===t?void 0:t.deviceId},t.prototype.audioInputDeviceShouldChange=function(){var t=this;return this.getAudioInputDevices().then((function(e){return-1===e.findIndex((function(e){var n;return e.deviceId===(null===(n=t.audioInputDevice)||void 0===n?void 0:n.deviceId)}))&&e.length>0})).catch((function(){return!1}))},t.prototype.setVideoInputDevice=function(t){this.videoInputDevice={deviceId:t,kind:"videoinput"}},t.prototype.unsetVideoInputDevice=function(){this.videoInputDevice=null},t.prototype.getVideoInputDevice=function(){var t;return null===(t=this.videoInputDevice)||void 0===t?void 0:t.deviceId},t.prototype.getCameraOrientation=function(){return this.cameraOrientation},t.prototype.getLocalStream=function(t,e,n,r){var i=this;if(void 0===t&&(t=!0),void 0===e&&(e=!1),void 0===n&&(n=Cn.FRONT),void 0===r&&(r=!1),this.cameraOrientation=n,this.audioInputDevice||this.videoInputDevice)return this.getDevices().then((function(o){var a=i.getDeviceConstraint(o,i.audioInputDevice),s=i.getDeviceConstraint(o,i.videoInputDevice),c={audio:t&&i.getAudioConstraints(a),video:e&&i.getVideoConstraints(s,n,r)};return navigator.mediaDevices.getUserMedia(c)}));var o={audio:t&&this.getAudioConstraints(null),video:e&&this.getVideoConstraints(null,n,r)};return navigator.mediaDevices.getUserMedia(o)},t.prototype.getDisplayMedia=function(t){var e,n,r,i={video:this.getScreenShareDefaults()};return t&&(i.video.displaySurface=t.allowedDisplayOptions[0]),null!==(r=null===(n=(e=navigator.mediaDevices).getDisplayMedia)||void 0===n?void 0:n.call(e,i))&&void 0!==r?r:Promise.reject("Screen share is not supported.")},t.prototype.getAudioConstraints=function(t){return void 0===t&&(t=null),wn(wn({},this.getMicrophoneDefaults()),{deviceId:t})},t.prototype.getVideoConstraints=function(t,e,n){return void 0===t&&(t=null),void 0===e&&(e=Cn.FRONT),void 0===n&&(n=!1),wn(wn({},this.getCameraDefaults(n)),{facingMode:e,deviceId:t})},t.prototype.getDeviceConstraint=function(t,e){return e&&-1!==An().findIndex(t,{kind:e.kind,deviceId:e.deviceId})?{exact:e.deviceId}:null},t.prototype.getDevices=function(t){var e=this;return void 0===t&&(t=null),this.enumerateDevices(t).then((function(n){return 0===n.length?[]:n[0].label?e.filterDevices(n,t):e.getUserMediaDevices(t)}))},t.prototype.filterDevices=function(t,e){if(e){var n=t.filter((function(t){return t.kind===e}));return An().uniqBy(n,"deviceId")}return An().uniqBy(t,"deviceId")},t.prototype.getUserMediaDevices=function(t){var e=this,n="videoinput"===t?{video:!0}:{audio:!0};return navigator.mediaDevices.getUserMedia(n).then(this.stopTracks).then((function(){return e.enumerateDevices(t)}))},t.prototype.enumerateDevices=function(t){var e=this;return navigator.mediaDevices.enumerateDevices().then((function(n){return e.filterDevices(n,t)}))},t.prototype.stopTracks=function(t){t.getTracks().forEach((function(t){return t.stop()}))},t.prototype.updateDevices=function(t){var e=this;return t.map((function(t,n){return e.generateCustomMediaDeviceInfo(t,n+1)}))},t.prototype.generateCustomMediaDeviceInfo=function(t,e){var n=this.deviceKindNames[t.kind],r=t.toJSON();return t.label||(r.label="default"===t.deviceId?"Default ".concat(n):"".concat(n," ").concat(e)),r},t}(),Dn={NORMAL_HANGUP:{id:"10000",name:"NORMAL_HANGUP",description:"The call ended due to a hangup initiated by the caller, callee, or API"},ANSWERED_ELSEWHERE:{id:"10001",name:"ANSWERED_ELSEWHERE",description:"Another device answered the call"},MACHINE_DETECTED:{id:"10002",name:"MACHINE_DETECTED",description:"A voice machine answered the call"},HUMAN_DETECTED:{id:"10003",name:"HUMAN_DETECTED",description:"A person (not a voice machine) answered the call"},DEVICE_FORBIDDEN:{id:"10100",name:"DEVICE_FORBIDDEN",description:"Permission to use camera and/or microphone was denied"},DEVICE_NOT_FOUND:{id:"10101",name:"DEVICE_NOT_FOUND",description:"Camera and/or microphone not found"},DEVICE_UNAVAILABLE:{id:"10102",name:"DEVICE_UNAVAILABLE",description:"Camera and/or microphone not available"},MEDIA_ERROR:{id:"10103",name:"MEDIA_ERROR",description:"Media invalid or unavailable"},NO_ANSWER:{id:"10200",name:"NO_ANSWER",description:"The end user received a call but didn't answer it"},BUSY:{id:"10201",name:"BUSY",description:"The end user is currently busy to receive the voice call"},CANCELLED:{id:"10202",name:"CANCELLED",description:"The end user canceled the call"},REJECTED:{id:"10203",name:"REJECTED",description:"The destination cannot join the call at the moment"},FORBIDDEN:{id:"10300",name:"FORBIDDEN",description:"The received request was rejected"},INSUFFICIENT_FUNDS:{id:"10301",name:"INSUFFICIENT_FUNDS",description:"Insufficient funds to make a call"},UNAUTHENTICATED:{id:"10302",name:"UNAUTHENTICATED",description:"The request requires user authentication on the operator's end"},DESTINATION_NOT_FOUND:{id:"10303",name:"DESTINATION_NOT_FOUND",description:"The server has definitive information that the user does not exist"},DESTINATION_UNAVAILABLE:{id:"10304",name:"DESTINATION_UNAVAILABLE",description:"The destination is currently out of service"},INVALID_DESTINATION:{id:"10305",name:"INVALID_DESTINATION",description:"The specified destination is invalid"},INVALID_REQUEST:{id:"10306",name:"INVALID_REQUEST",description:"The format of the request is invalid"},REQUEST_TIMEOUT:{id:"10307",name:"REQUEST_TIMEOUT",description:"There was no coverage for a specific destination, or the end user could not be reached in time for the call"},NETWORK_ERROR:{id:"10308",name:"NETWORK_ERROR",description:"There has been a network connection error"},SERVICE_UNAVAILABLE:{id:"10309",name:"SERVICE_UNAVAILABLE",description:"Service currently unavailable"},UNKNOWN:{id:"10310",name:"UNKNOWN",description:"The call has ended due to an unknown reason"},FEATURE_UNAVAILABLE:{id:"10311",name:"FEATURE_UNAVAILABLE",description:"The requested feature is not enabled"},URL_NOT_FOUND:{id:"10400",name:"URL_NOT_FOUND",description:"The specified application URL does not exist or cannot be found"},URL_UNREACHABLE:{id:"10401",name:"URL_UNREACHABLE",description:"The specified application URL is unreachable"},INVALID_RESPONSE:{id:"10402",name:"INVALID_RESPONSE",description:"Specified application returned response with invalid format"}};const Pn=function(){function t(){}return t.getApplicationHangupStatus=function(t){if(!t||!t.name&&!t.message)return Dn.UNKNOWN;switch(t.name){case"NotAllowedError":return Dn.DEVICE_FORBIDDEN;case"NotFoundError":return Dn.DEVICE_NOT_FOUND;case"NotReadableError":return Dn.DEVICE_UNAVAILABLE}if((null==t?void 0:t.id)&&(null==t?void 0:t.name)&&(null==t?void 0:t.description))return{id:t.id,name:t.name,description:t.description};var e="";return t.name&&(e+=t.name+" "),t.message&&(e+=t.message),{id:"10310",name:"UNKNOWN",description:e}},t}();var Nn;!function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.CALLING=1]="CALLING",t[t.RINGING=2]="RINGING",t[t.CONNECTING=3]="CONNECTING",t[t.ESTABLISHED=4]="ESTABLISHED",t[t.FINISHED=5]="FINISHED"}(Nn||(Nn={}));var Mn,kn=function(){};!function(t){t.JOINING="JOINING",t.JOINED="JOINED"}(Mn||(Mn={}));var Ln,jn=function(t){this.audio=t},xn=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1),this.muted=t,this.deaf=e,this.talking=!1};!function(t){t[t.BAD=1]="BAD",t[t.POOR=2]="POOR",t[t.FAIR=3]="FAIR",t[t.GOOD=4]="GOOD",t[t.EXCELLENT=5]="EXCELLENT"}(Ln||(Ln={}));var Fn,Vn,Un,Bn=new Map([["opus",1],["pcmu",2],["pcma",2],["unknown",2]]),Hn=function(){function t(t){void 0===t&&(t=0),this.mos=t,this.networkQuality=this.getNetworkQuality()}return t.forRTCStats=function(e,n,r,i,o){var a=t.calculateMos(e,n,r,i,o);return new t(a)},t.forMos=function(e){return new t(e)},t.calculateMos=function(t,e,n,r,i){var o=t+2*e+10,a=r+n,s=o<160?93.2-o/40:93.2-(o-120)/10;if((s-=2.5*(0===a?0:100*r/a)*Bn.get(i))<0)return 1;var c=1+.035*s+7e-6*s*(s-60)*(100-s);return Math.round(100*(c+Number.EPSILON))/100},t.prototype.getNetworkQuality=function(){return this.mos>4.34?Ln.EXCELLENT:this.mos>4.03?Ln.GOOD:this.mos>3.6?Ln.FAIR:this.mos>3.1?Ln.POOR:Ln.BAD},t}(),Gn=function(){function t(t){this.bytesSent=0,this.bytesReceived=0,this.timestamp=Date.now(),this.isVideo=t}return t.prototype.toJSON=function(){return{bytesSent:this.bytesSent,bytesReceived:this.bytesReceived,currentRoundTripTime:this.currentRoundTripTime,availableOutgoingBitrate:this.availableOutgoingBitrate,mos:this.mos}},t}(),Wn=function(){function t(t){this.packetsReceived=0,this.bytesReceived=0,this.packetsLost=0,this.jitterBufferDelay=0,this.jitterBufferEmittedCount=0,this.averageJitterBufferDelay=0,this.id=t}return t.prototype.toJSON=function(){return{trackId:this.trackId,codec:this.codec,packetsReceived:this.packetsReceived,bytesReceived:this.bytesReceived,packetsLost:this.packetsLost,averageJitterBufferDelay:this.averageJitterBufferDelay,category:"remote"}},t}(),Jn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zn=function(){return zn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},zn.apply(this,arguments)},Qn=function(t){function e(e){var n=t.call(this,e)||this;return n.jitter=0,n.concealedSamples=0,n.concealmentEvents=0,n}return Jn(e,t),Object.defineProperty(e.prototype,"video",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return zn(zn({},t.prototype.toJSON.call(this)),{jitter:this.jitter,concealedSamples:this.concealedSamples,concealmentEvents:this.concealmentEvents})},e}(Wn),qn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kn=function(){return Kn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Kn.apply(this,arguments)},Yn=function(t){function e(e){var n=t.call(this,e)||this;return n.framesReceived=0,n.framesDecoded=0,n.keyFramesDecoded=0,n.framesDropped=0,n.nackCount=0,n.firCount=0,n.pliCount=0,n.qpSum=0,n.averageQP=0,n}return qn(e,t),Object.defineProperty(e.prototype,"video",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return Kn(Kn({},t.prototype.toJSON.call(this)),{frameWidth:this.frameWidth,frameHeight:this.frameHeight,framesReceived:this.framesReceived,framesDecoded:this.framesDecoded,keyFramesDecoded:this.keyFramesDecoded,framesDropped:this.framesDropped,nackCount:this.nackCount,firCount:this.firCount,pliCount:this.pliCount,averageQP:this.averageQP})},e}(Wn),$n=function(){function t(t){this.packetsSent=0,this.bytesSent=0,this.retransmittedPacketsSent=0,this.retransmittedBytesSent=0,this.id=t}return t.prototype.toJSON=function(){return{trackId:this.trackId,codec:this.codec,packetsSent:this.packetsSent,bytesSent:this.bytesSent,retransmittedPacketsSent:this.retransmittedPacketsSent,retransmittedBytesSent:this.retransmittedBytesSent,category:"local"}},t}(),Zn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xn=function(){return Xn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Xn.apply(this,arguments)},tr=function(t){function e(e){var n=t.call(this,e)||this;return n.framesSent=0,n.framesEncoded=0,n.keyFramesEncoded=0,n.nackCount=0,n.firCount=0,n.pliCount=0,n.qpSum=0,n.averageQP=0,n}return Zn(e,t),Object.defineProperty(e.prototype,"video",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return Xn(Xn({},t.prototype.toJSON.call(this)),{frameWidth:this.frameWidth,frameHeight:this.frameHeight,framesSent:this.framesSent,framesEncoded:this.framesEncoded,keyFramesEncoded:this.keyFramesEncoded,nackCount:this.nackCount,firCount:this.firCount,pliCount:this.pliCount,averageQP:this.averageQP,qualityLimitationReason:this.qualityLimitationReason})},e}($n),er=function(t,e){this.local=t,this.remote=e},nr=function(){function t(t){this._protocol=t.protocol,this._ip=t.ip||t.address,this._port=t.port,this._type=t.candidateType}return Object.defineProperty(t.prototype,"protocol",{get:function(){return this._protocol},set:function(t){this._protocol=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ip",{get:function(){return this._ip},set:function(t){this._ip=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"port",{get:function(){return this._port},set:function(t){this._port=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{protocol:this._protocol,ip:this._ip,port:this._port,type:this._type}},t}(),rr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ir=function(t){function e(e){return t.call(this,e)||this}return rr(e,t),Object.defineProperty(e.prototype,"video",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return t.prototype.toJSON.call(this)},e}($n),or=function(){function t(t,e,n){this.callStats=t,this.extractedRemoteStats=e,this.extractedLocalStats=n,this.callStats=t,this.extractedRemoteStats=e,this.extractedLocalStats=n}return Object.defineProperty(t.prototype,"localAudio",{get:function(){var t=Array.from(this.extractedLocalStats.values()).filter((function(t){return!t.video}));return t[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteAudio",{get:function(){var t=Array.from(this.extractedRemoteStats.values()).filter((function(t){return!t.video}));return t[0]},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{trackId:this.trackId,callStats:this.callStats.toJSON()}},t}(),ar=function(){function t(){}return t.extract=function(e,n){var r=new Gn(n),i=null,o=new Map,a=new Map;return e.forEach((function(n){if("transport"===n.type&&"connected"===n.dtlsState)i=e.get(n.selectedCandidatePairId);else if("inbound-rtp"===n.type){var s=n,c=t.extractInboundRTPStats(s);t.populateCodec(s,e,c),o.set(n.id,c)}else if("outbound-rtp"===n.type){var u=n;c=t.extractOutboundRTPStats(u),t.populateCodec(u,e,c),a.set(c.id,c)}else"remote-inbound-rtp"===n.type&&t.extractRTTIfMissing(r,n)})),i||(i=t.getSelectedCandidatePair(e)),i&&t.extractTransportMetrics(r,i),new or(r,o,a)},t.populateCodec=function(e,n,r){var i=e.codecId,o=i?n.get(i):t.extractCodecStatsReport(n);o&&(r.video?r.codec=t.extractVideoCodec(o):r.codec=t.extractAudioCodec(o))},t.extractSelectedCandidatePair=function(e){var n=null;if(e.forEach((function(t){"transport"===t.type&&t.selectedCandidatePairId&&(n=e.get(t.selectedCandidatePairId))})),n||(n=t.getSelectedCandidatePair(e)),!n)return null;var r=e.get(n.localCandidateId),i=e.get(n.remoteCandidateId),o=new nr(r),a=new nr(i);return new er(o,a)},t.getSelectedCandidatePair=function(t){var e=null;return t.forEach((function(t){"candidate-pair"===t.type&&t.selected&&(e=t)})),e},t.extractInboundRTPStats=function(e){var n;return"audio"===e.kind?(n=t.extractAudioRemoteMediaStats(e),t.extractCommonRemoteMediaStats(n,e)):(n=t.extractVideoRemoteMediaStats(e),t.extractCommonRemoteMediaStats(n,e)),n},t.extractOutboundRTPStats=function(e){var n;return"audio"===e.kind?(n=new ir(e.id),t.extractCommonLocalMediaStats(n,e)):(n=t.extractVideoLocalMediaStats(e),t.extractCommonLocalMediaStats(n,e)),n},t.extractCommonRemoteMediaStats=function(e,n){e.packetsReceived=n.packetsReceived,e.packetsLost=n.packetsLost,e.bytesReceived=n.bytesReceived,t.extractAverageJitterBufferDelay(e,n)},t.extractCommonLocalMediaStats=function(t,e){t.bytesSent=e.bytesSent,t.packetsSent=e.packetsSent,t.retransmittedBytesSent=e.retransmittedBytesSent,t.retransmittedPacketsSent=e.retransmittedPacketsSent},t.extractAudioRemoteMediaStats=function(t){var e=new Qn(t.id);return e.jitter=1e3*t.jitter,e.concealedSamples=t.concealedSamples,e.concealmentEvents=t.concealmentEvents,e},t.extractVideoRemoteMediaStats=function(t){var e=new Yn(t.id);return e.frameWidth=t.frameWidth,e.frameHeight=t.frameHeight,e.framesReceived=t.framesReceived,e.framesDropped=t.framesDropped,e.framesDecoded=t.framesDecoded,e.keyFramesDecoded=t.keyFramesDecoded,e.nackCount=t.nackCount,e.firCount=t.firCount,e.pliCount=t.pliCount,e.qpSum=t.qpSum,e.framesDecoded>0&&(e.averageQP=Math.round(e.qpSum/e.framesDecoded)),e},t.extractVideoLocalMediaStats=function(t){var e=new tr(t.id);return e.frameWidth=t.frameWidth,e.frameHeight=t.frameHeight,e.framesSent=t.framesSent,e.framesEncoded=t.framesEncoded,e.keyFramesEncoded=t.keyFramesEncoded,e.nackCount=t.nackCount,e.firCount=t.firCount,e.pliCount=t.pliCount,e.qpSum=t.qpSum,e.framesEncoded>0&&(e.averageQP=Math.round(e.qpSum/e.framesEncoded)),e.qualityLimitationReason=t.qualityLimitationReason,e},t.extractAverageJitterBufferDelay=function(t,e){return t.jitterBufferDelay=e.jitterBufferDelay,t.jitterBufferEmittedCount=e.jitterBufferEmittedCount,t.jitterBufferEmittedCount>0&&(t.averageJitterBufferDelay=Math.round(t.jitterBufferDelay/t.jitterBufferEmittedCount)),t},t.extractTransportMetrics=function(t,e){t.bytesReceived=e.bytesReceived,t.bytesSent=e.bytesSent,t.availableOutgoingBitrate=e.availableOutgoingBitrate,e.currentRoundTripTime&&(t.currentRoundTripTime=1e3*e.currentRoundTripTime)},t.extractRTTIfMissing=function(t,e){t.currentRoundTripTime||(t.currentRoundTripTime=1e3*e.roundTripTime)},t.extractCodecStatsReport=function(t){return Array.from(t.values()).find((function(t){return"codec"===t.type}))},t.extractAudioCodec=function(t){var e=t.mimeType;return e?e.toLowerCase().replace("audio/",""):null},t.extractVideoCodec=function(t){var e=t.mimeType;return e?e.toLowerCase().replace("video/",""):null},t}(),sr=function(){function t(){}return t.diff=function(e,n,r){if(!e)return n;var i=new Gn(r),o=new Map,a=new Map;return i.bytesSent=n.callStats.bytesSent-e.callStats.bytesSent,i.bytesReceived=n.callStats.bytesReceived-e.callStats.bytesReceived,i.currentRoundTripTime=n.callStats.currentRoundTripTime,i.availableOutgoingBitrate=n.callStats.availableOutgoingBitrate,t.calculateLocalDiff(o,e.extractedLocalStats,n.extractedLocalStats),t.calculateRemoteDiff(a,e.extractedRemoteStats,n.extractedRemoteStats),new or(i,a,o)},t.forEachStatsPair=function(t,e,n){e.forEach((function(e,r){var i=t.get(r);i&&n(i,e)}))},t.calculateRemoteDiff=function(e,n,r){t.forEachStatsPair(n,r,(function(n,r){var i;r.video?(i=new Yn(r.id),t.calculateRemoteVideoDiff(i,r,n),e[r.id]=i):(i=new Qn(r.id),t.calculateRemoteAudioDiff(i,r,n)),e.set(r.id,i)}))},t.calculateLocalDiff=function(e,n,r){t.forEachStatsPair(n,r,(function(n,r){var i;r.video?(i=new tr(r.id),t.calculateLocalVideoDiff(i,r,n)):(i=new ir(r.id),t.calculateLocalAudioDiff(i,r,n)),e.set(r.id,i)}))},t.calculateLocalAudioDiff=function(e,n,r){t.calculateCommonLocalMediaDiff(e,n,r)},t.calculateRemoteAudioDiff=function(e,n,r){t.calculateCommonRemoteMediaDiff(e,n,r),e.jitter=n.jitter,e.concealedSamples=n.concealedSamples-r.concealedSamples,e.concealmentEvents=n.concealmentEvents-r.concealmentEvents,e.codec=n.codec},t.calculateLocalVideoDiff=function(e,n,r){t.calculateCommonLocalMediaDiff(e,n,r),t.calculateCommonVideoLocalMediaDiff(e,n,r)},t.calculateRemoteVideoDiff=function(e,n,r){t.calculateCommonRemoteMediaDiff(e,n,r),t.calculateCommonVideoRemoteMediaDiff(e,n,r),e.codec=n.codec},t.calculateCommonLocalMediaDiff=function(t,e,n){t.bytesSent=e.bytesSent-n.bytesSent,t.packetsSent=e.packetsSent-n.packetsSent,t.retransmittedBytesSent=e.retransmittedBytesSent-n.retransmittedBytesSent,t.retransmittedPacketsSent=e.retransmittedPacketsSent-n.retransmittedPacketsSent},t.calculateCommonRemoteMediaDiff=function(t,e,n){t.bytesReceived=e.bytesReceived-n.bytesReceived,t.packetsReceived=e.packetsReceived-n.packetsReceived,t.packetsLost=e.packetsLost-n.packetsLost,t.jitterBufferDelay=e.jitterBufferDelay-n.jitterBufferDelay,t.jitterBufferEmittedCount=e.jitterBufferEmittedCount-n.jitterBufferEmittedCount,t.jitterBufferEmittedCount>0&&(t.averageJitterBufferDelay=Math.round(t.jitterBufferDelay/t.jitterBufferEmittedCount))},t.calculateCommonVideoLocalMediaDiff=function(t,e,n){t.frameHeight=e.frameHeight,t.frameWidth=e.frameWidth,t.framesSent=e.framesSent-n.framesSent,t.framesEncoded=e.framesEncoded-n.framesEncoded,t.keyFramesEncoded=e.keyFramesEncoded-n.keyFramesEncoded,t.nackCount=e.nackCount-n.nackCount,t.firCount=e.firCount-n.firCount,t.pliCount=e.pliCount-n.pliCount,t.qpSum=e.qpSum-n.qpSum,t.qualityLimitationReason=e.qualityLimitationReason,t.framesEncoded>0&&(t.averageQP=Math.round(t.qpSum/t.framesEncoded))},t.calculateCommonVideoRemoteMediaDiff=function(t,e,n){t.frameHeight=e.frameHeight,t.frameWidth=e.frameWidth,t.framesReceived=e.framesReceived-n.framesReceived,t.framesDecoded=e.framesDecoded-n.framesDecoded,t.keyFramesDecoded=e.keyFramesDecoded-n.keyFramesDecoded,t.framesDropped=e.framesDropped-n.framesDropped,t.nackCount=e.nackCount-n.nackCount,t.firCount=e.firCount-n.firCount,t.pliCount=e.pliCount-n.pliCount,t.qpSum=e.qpSum-n.qpSum,t.framesDecoded>0&&(t.averageQP=Math.round(t.qpSum/t.framesDecoded))},t}(),cr=function(){function t(){this.roundTripTime=0,this.packetsSent=0,this.bytesSent=0,this.retransmittedPacketsSent=0,this.retransmittedBytesSent=0,this.packetsReceived=0,this.bytesReceived=0,this.packetsLost=0,this.jitter=0}return t.prototype.toJSON=function(){return{codec:this.codec,roundTripTime:this.roundTripTime,packetsSent:this.packetsSent,bytesSent:this.bytesSent,retransmittedPacketsSent:this.retransmittedPacketsSent,retransmittedBytesSent:this.retransmittedBytesSent,packetsReceived:this.packetsReceived,bytesReceived:this.bytesReceived,packetsLost:this.packetsLost,jitter:this.jitter}},t}(),ur=function(){function t(){this.totalAudioStats=new cr}return t.prototype.toJSON=function(){return{totalAudioStats:this.totalAudioStats.toJSON()}},t}(),lr=function(){function t(){this.currentAudioStats=new cr,this.mos=5}return t.prototype.toJSON=function(){return{currentAudioStats:this.currentAudioStats.toJSON(),mos:this.mos}},t}(),dr=function(){function t(e,n,r,i,o,a){var s=this;this.callId=e,this.name=n,this.conferenceId=r,this.pc=i,this.isVideo=o,this.logger=a,this.previousConferenceStats=new Map,this.summaryInterval=setInterval((function(){return s.sendSummaryStats()}),t.DEFAULT_MONITOR_SUMMARY_INTERVAL),this.trackMonitoringInterval=setInterval((function(){return s.sendTrackStats()}),t.DEFAULT_MONITOR_TRACK_INTERVAL)}return t.prototype.setIsVideo=function(t){this.isVideo=t},t.prototype.stop=function(){var t=this.sendTotalCallStats();return clearInterval(this.summaryInterval),clearInterval(this.trackMonitoringInterval),t},t.prototype.onNetworkQualityStatistics=function(t){this.networkQualityStatisticsListener=t},t.prototype.sendSelectedCandidatePair=function(t){if(!this.selectedCandidatePair){var e=ar.extractSelectedCandidatePair(t);e&&(this.logger.log(new Nt(this.callId,e)),this.selectedCandidatePair=e)}},t.prototype.sendTotalCallStats=function(){var t=this,e=new ur;return this.previousConferenceStats.forEach((function(n,r){var i;r?(t.isVideo||t.fillAudioStats(n,e.totalAudioStats),t.sendExtractedStats(n,r,"Total")):(t.isVideo||(e.totalAudioStats.roundTripTime=null!==(i=n.callStats.currentRoundTripTime)&&void 0!==i?i:0),t.sendExtractedMediaStats(n,n.callStats.timestamp,null,"Total"))})),e},t.prototype.sendTrackStats=function(){var e=this;(this.callId||this.conferenceId)&&this.pc&&t.MONITOR_ICE_STATES.has(this.pc.iceConnectionState)&&(this.pc.getSenders().forEach((function(t){return e.sendStatsForTrack(t.track)})),this.pc.getReceivers().forEach((function(t){return e.sendStatsForTrack(t.track)})))},t.prototype.sendSummaryStats=function(){(this.callId||this.conferenceId)&&this.pc&&t.MONITOR_ICE_STATES.has(this.pc.iceConnectionState)&&this.sendSummaryStatsForPeerConnection()},t.prototype.sendStatsForTrack=function(t){if(t){var e=null==t?void 0:t.id,n=(null==t?void 0:t.label)||this.name+"_"+e;this.sendStatsForLabeledTrack(t,n||"unknown")}},t.prototype.emitNetworkQualityStats=function(t,e){var n=e.remoteAudio;if(n){var r=e.localAudio;if(r&&e.callStats.currentRoundTripTime){var i=Hn.forRTCStats(e.callStats.currentRoundTripTime,n.jitter,n.packetsReceived,n.packetsLost,n.codec||r.codec);if((t||1!==i.mos)&&(e.callStats.mos=i.mos,this.networkQualityStatisticsListener)){var o=this.getCurrentMediaStats(e);this.networkQualityStatisticsListener(i,o)}}}},t.prototype.getCurrentMediaStats=function(t){var e,n,r=new lr,i=new cr;return i.roundTripTime=null!==(e=t.callStats.currentRoundTripTime)&&void 0!==e?e:0,i.jitter=t.remoteAudio.jitter,i.codec=null!==(n=t.remoteAudio.codec)&&void 0!==n?n:t.localAudio.codec,i.packetsLost=t.remoteAudio.packetsLost,i.packetsReceived=t.remoteAudio.packetsReceived,i.bytesReceived=t.remoteAudio.bytesReceived,i.packetsSent=t.localAudio.packetsSent,i.retransmittedPacketsSent=t.localAudio.retransmittedPacketsSent,i.bytesSent=t.localAudio.bytesSent,i.retransmittedBytesSent=t.localAudio.retransmittedBytesSent,r.currentAudioStats=i,r},t.prototype.sendSummaryStatsForPeerConnection=function(){var t=this;this.pc.getStats().then((function(e){var n=ar.extract(e,t.isVideo),r=t.previousConferenceStats.get(null),i=sr.diff(r,n,t.isVideo);t.emitNetworkQualityStats(r,i),t.sendExtractedMediaStats(i,i.callStats.timestamp,null,t.name),t.previousConferenceStats.set(null,n),t.sendSelectedCandidatePair(e)}))},t.prototype.sendStatsForLabeledTrack=function(t,e){var n=this;this.pc.getStats(t).then((function(r){var i=ar.extract(r,n.isVideo),o=n.previousConferenceStats.get(t.id),a=sr.diff(o,i,n.isVideo);n.sendExtractedStats(a,t.id,e),n.previousConferenceStats.set(t.id,i),n.sendSelectedCandidatePair(r)}))},t.prototype.sendExtractedMediaStats=function(t,e,n,r){t.trackId=n||t.id,this.logger.log(new Mt(r,this.conferenceId,this.callId,this.name,t,e))},t.prototype.sendExtractedStats=function(t,e,n){var r=this;t.extractedRemoteStats.forEach((function(i){return r.sendExtractedMediaStats(i,t.callStats.timestamp,e,n)})),t.extractedLocalStats.forEach((function(i){return r.sendExtractedMediaStats(i,t.callStats.timestamp,e,n)}))},t.prototype.fillAudioStats=function(t,e){var n=t.localAudio;null!=n&&this.fillLocalAudioStats(e,n);var r=t.remoteAudio;null!=r&&this.fillRemoteAudioStats(e,r)},t.prototype.fillRemoteAudioStats=function(t,e){null==t.codec&&(t.codec=e.codec),t.bytesReceived=e.bytesReceived,t.packetsReceived=e.packetsReceived,t.packetsLost=e.packetsLost,t.jitter=e.jitter},t.prototype.fillLocalAudioStats=function(t,e){null==t.codec&&(t.codec=e.codec),t.bytesSent=e.bytesSent,t.packetsSent=e.packetsSent,t.retransmittedBytesSent=e.retransmittedBytesSent,t.retransmittedPacketsSent=e.retransmittedPacketsSent},t.MONITOR_ICE_STATES=new Set(["connected","completed"]),t.DEFAULT_MONITOR_SUMMARY_INTERVAL=1e3,t.DEFAULT_MONITOR_TRACK_INTERVAL=1e4,t}();!function(t){t[t.AUDIO=0]="AUDIO",t[t.VIDEO=1]="VIDEO"}(Fn||(Fn={})),function(t){t[t.AV=0]="AV",t[t.VideoPublisher=1]="VideoPublisher",t[t.VideoSubscription=2]="VideoSubscription",t[t.Audio=3]="Audio"}(Vn||(Vn={}));const pr=function(){function t(t,e){this.peerConnection=t,this.monitor=e}return t.create=function(e,n,r,i,o,a){var s=new RTCPeerConnection(e);return new t(s,new dr(n,t.PEER_CONNECTION_NAMING_MAPPING[r],i,s,o===Fn.VIDEO,a))},t.prototype.close=function(){return this.peerConnection.close(),this.monitor.stop()},t.PEER_CONNECTION_NAMING_MAPPING=((Un={})[Vn.AV]="AudioVideo",Un[Vn.VideoPublisher]="VideoPublisher",Un[Vn.VideoSubscription]="VideoSubscriber",Un[Vn.Audio]="Audio",Un),t}();var fr,hr;!function(t){t[t.IDLE=0]="IDLE",t[t.ADDING_VIDEO=1]="ADDING_VIDEO",t[t.REMOVING_VIDEO=2]="REMOVING_VIDEO"}(fr||(fr={}));var vr=new Uint8Array(16);function mr(){if(!hr&&!(hr="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return hr(vr)}const yr=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var gr=[],Er=0;Er<256;++Er)gr.push((Er+256).toString(16).substr(1));const _r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(gr[t[e+0]]+gr[t[e+1]]+gr[t[e+2]]+gr[t[e+3]]+"-"+gr[t[e+4]]+gr[t[e+5]]+"-"+gr[t[e+6]]+gr[t[e+7]]+"-"+gr[t[e+8]]+gr[t[e+9]]+"-"+gr[t[e+10]]+gr[t[e+11]]+gr[t[e+12]]+gr[t[e+13]]+gr[t[e+14]]+gr[t[e+15]]).toLowerCase();if(!function(t){return"string"==typeof t&&yr.test(t)}(n))throw TypeError("Stringified UUID is invalid");return n},Cr=function(t,e,n){var r=(t=t||{}).random||(t.rng||mr)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return _r(r)},br=function(){function t(){}return t.getHangupReason=function(t){return t?t.name&&t.message?"".concat(t.name," ").concat(t.message):t:"Unknown error."},t}(),Sr=Object.freeze({cameraEncodings:[{rid:"h",active:!0,maxBitrate:5e5},{rid:"m",active:!0,maxBitrate:25e4,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:15e4,scaleResolutionDownBy:4}],cameraEncodingsMobile:[{rid:"m",active:!0,maxBitrate:25e4},{rid:"l",active:!0,maxBitrate:15e4,scaleResolutionDownBy:2}],screenShareEncodings:[{rid:"s",active:!0,maxBitrate:3e5}]});var Rr;!function(t){t.CAMERA="CAMERA",t.SCREENSHARE="SCREENSHARE"}(Rr||(Rr={}));const Or=Rr;var Tr;!function(t){t.TRICKLE_ICE="trickle_ice",t.RINGING="ringing",t.CALL_RESPONSE="call_response",t.CALL_ACCEPTED="call_accepted",t.HANGUP="hangup",t.CALL_ERROR="call-error",t.JOINED_VIDEO_CALL="joined_video_call",t.PUBLISHED_VIDEO_CALL="published_video_call",t.UNPUBLISHED_VIDEO_CALL="unpublished_video_call",t.JOIN_VIDEO_CALL_ERROR="join_video_call_error",t.PUBLISH_VIDEO_CALL_ERROR="publish_video_call_error",t.JOINED_APPLICATION_CONFERENCE="joined_application_conference",t.PARTICIPANT_JOINING="participant_joining",t.PARTICIPANT_JOINED="participant_joined",t.PARTICIPANT_MEDIA_CHANGED="participant_media_changed",t.PARTICIPANT_STARTED_TALKING="participant_started_talking",t.PARTICIPANT_STOPPED_TALKING="participant_stopped_talking",t.PARTICIPANT_LEFT="participant_left",t.LEFT_APPLICATION_CONFERENCE="left_application_conference",t.JOINED_VIDEO_CONFERENCE="joined_video_conference",t.PUBLISHED_VIDEO_CONFERENCE="published_video_conference",t.UNPUBLISHED_VIDEO_CONFERENCE="unpublished_video_conference",t.PUBLISH_VIDEO_CONFERENCE_ERROR="publish_video_conference_error",t.JOIN_VIDEO_CONFERENCE_ERROR="join_video_conference_error",t.SUBSCRIBED_VIDEO="subscribed_video",t.UPDATED_VIDEO="updated_video",t.SUBSCRIBE_VIDEO_CONFERENCE_ERROR="subscribe_video_conference_error",t.DIALOG_CREATED="dialog_created",t.DIALOG_ESTABLISHED="dialog_established",t.DIALOG_FINISHED="dialog_finished",t.DIALOG_FAILED="dialog_failed",t.SETUP_DATA_CHANNEL="setup_data_channel",t.SETUP_DATA_CHANNEL_ERROR="setup_data_channel_error",t.PARTICIPANT_NETWORK_QUALITY="participant_network_quality"}(Tr||(Tr={}));var Ar=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ar(e,t),e.prototype.on=function(e,n){return t.prototype.on.call(this,e,Ir(n))},e.prototype.once=function(e,n){return t.prototype.once.call(this,e,Ir(n))},e}(n(343));function Ir(t){return function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{e=t.apply(void 0,n)}catch(t){Rn().error("An error has occurred in the handler function",t)}return e}}const Dr=500,Pr=50;var Nr,Mr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){t.WEBRTC="WEBRTC",t.SIP="SIP",t.PHONE="PHONE",t.VIBER="VIBER"}(Nr||(Nr={}));var kr,Lr=function(t){this.type=t},jr=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this,Nr.WEBRTC)||this;return n.identity=e,n}return Mr(e,t),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.identity},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayIdentifier",{get:function(){return this.displayName},enumerable:!1,configurable:!0}),e}(Lr),xr=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this,Nr.PHONE)||this;return n.phoneNumber=e,n}return Mr(e,t),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.phoneNumber},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayIdentifier",{get:function(){return this.phoneNumber},enumerable:!1,configurable:!0}),e}(Lr),Fr=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this,Nr.VIBER)||this;return n.phoneNumber=e,n}return Mr(e,t),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.phoneNumber},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayIdentifier",{get:function(){return this.phoneNumber},enumerable:!1,configurable:!0}),e}(Lr),Vr=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this,Nr.SIP)||this;return n.username=e,n}return Mr(e,t),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.username},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayIdentifier",{get:function(){return this.username},enumerable:!1,configurable:!0}),e}(Lr);!function(t){t.APP_CALL_DECLINE="application_call_decline",t.APP_CALL_ACCEPT="application_call_accept",t.MUTE="mute",t.DTMF_INFO="dtmf_info",t.HANGUP="hangup",t.ICE_CANDIDATE="ice_candidate",t.PUBLISH_VIDEO_CALL="publish_video_call",t.UNPUBLISH_VIDEO_CALL="unpublish_video_call",t.ICE_CANDIDATE_VIDEO_CALL="ice_candidate_video_call",t.PUBLISH_VIDEO_CONFERENCE="publish_video_conference",t.UNPUBLISH_VIDEO_CONFERENCE="unpublish_video_conference",t.PAUSE_INCOMING_VIDEO="pause_incoming_video",t.RESUME_INCOMING_VIDEO="resume_incoming_video",t.ICE_CANDIDATE_VIDEO_CONFERENCE="ice_candidate_video_conference",t.START_VIDEO_CONFERENCE="start_video_conference",t.ICE_CANDIDATE_DATA_CHANNEL="ice_candidate_data_channel",t.SETUP_ACK="setup_ack",t.NETWORK_QUALITY_CHANGED="network_quality_changed"}(kr||(kr={}));var Ur=function(){function t(){this.audioContext=new AudioContext,this.oscillator=this.audioContext.createOscillator(),this.mediaStreamDestination=this.audioContext.createMediaStreamDestination(),this.mediaStreamDestination.stream.getAudioTracks()[0].enabled=!1,this.oscillator.connect(this.mediaStreamDestination),this.oscillator.start()}return t.prototype.stream=function(){return this.mediaStreamDestination.stream},t.prototype.close=function(){this.audioContext.close().catch(),this.oscillator.stop()},t}(),Br=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},Hr=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Gr=function(){function t(t){this._delegate=t}return t.createWrapped=function(e){if(!e)return null;var n=e();return n?t.wrap(n):null},t.wrap=function(e){return e?new t(e):null},Object.defineProperty(t.prototype,"delegate",{get:function(){return this._delegate},enumerable:!1,configurable:!0}),t.prototype.apply=function(t,e){return Br(this,void 0,void 0,(function(){var n,r;return Hr(this,(function(i){switch(i.label){case 0:return(n=t.getVideoTracks()[e])?(this._sourceTrack&&this._sourceTrack.stop(),this._sourceTrack=n,t.removeTrack(n),r=this,[4,this.delegate.apply(n)]):[2];case 1:return r._filteredTrack=i.sent(),t.addTrack(this._filteredTrack),[2,this._filteredTrack]}}))}))},t.prototype.release=function(){var t,e;return null===(t=this._sourceTrack)||void 0===t||t.stop(),null===(e=this._filteredTrack)||void 0===e||e.stop(),this.delegate.release()},t.prototype.restore=function(t){return Br(this,void 0,void 0,(function(){return Hr(this,(function(e){return this._filteredTrack&&(t.removeTrack(this._filteredTrack),t.addTrack(this._sourceTrack),this._filteredTrack.stop(),delete this._filteredTrack,delete this._sourceTrack),[2]}))}))},t}(),Wr=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},Jr=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function zr(t,e,n){return Wr(this,void 0,void 0,(function(){return Jr(this,(function(r){switch(r.label){case 0:return t?[4,t.apply(e,n)]:[2];case 1:return r.sent(),[2]}}))}))}function Qr(t,e,n){return Wr(this,void 0,void 0,(function(){return Jr(this,(function(r){switch(r.label){case 0:return t?[4,t.apply(e,n)]:[2];case 1:return r.sent(),[2]}}))}))}var qr,Kr,Yr=function(){function t(){this.OBSERVE_INTERVAL=5,this.previousQuality=Hn.forMos(5),this.currentQuality=Hn.forMos(5),this.qualityMeasurementsBuffer=[]}return t.prototype.observe=function(t){var e=t.mos;if(null==e||e<=0||e>5)return Sn.warn("Invalid MOS value: ".concat(e," for statistics: ").concat(JSON.stringify(t)));this.isQualityMeasurementsBufferFull()&&(this.qualityMeasurementsBuffer=[]),this.qualityMeasurementsBuffer.push(t),this.isQualityMeasurementsBufferFull()&&(this.previousQuality=this.currentQuality,this.currentQuality=Hn.forMos(this.getCurrentMos()))},t.prototype.current=function(){return this.currentQuality},t.prototype.localNetworkChanged=function(){return!this.observationInProgress()&&this.previousQuality.networkQuality!==this.currentQuality.networkQuality},t.prototype.remoteNetworkChanged=function(){return!this.observationInProgress()&&(this.currentQuality.mos<=3.6&&this.previousQuality.mos>3.6||this.currentQuality.mos>3.6&&this.previousQuality.mos<=3.6)},t.prototype.isQualityMeasurementsBufferFull=function(){return this.qualityMeasurementsBuffer.length===this.OBSERVE_INTERVAL},t.prototype.getCurrentMos=function(){var t=this.qualityMeasurementsBuffer.map((function(t){return t.mos})).reduce((function(t,e){return t+e}));return Math.round(100*(t/this.OBSERVE_INTERVAL+Number.EPSILON))/100},t.prototype.observationInProgress=function(){return this.qualityMeasurementsBuffer.length<this.OBSERVE_INTERVAL},t}(),$r=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},Zr=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Xr=function(){function t(t){this._delegate=t}return t.createWrapped=function(e){if(!e)return null;var n=e();return n?t.wrap(n):null},t.wrap=function(e){return e?new t(e):null},Object.defineProperty(t.prototype,"delegate",{get:function(){return this._delegate},enumerable:!1,configurable:!0}),t.prototype.apply=function(t,e){return $r(this,void 0,void 0,(function(){var n,r;return Zr(this,(function(i){switch(i.label){case 0:return(n=t.getAudioTracks()[e])?(this._sourceTrack&&this._sourceTrack.stop(),this._sourceTrack=n,t.removeTrack(n),r=this,[4,this.delegate.apply(n)]):[2];case 1:return r._filteredTrack=i.sent(),t.addTrack(this._filteredTrack),[2,this._filteredTrack]}}))}))},t.prototype.release=function(){var t,e;return null===(t=this._sourceTrack)||void 0===t||t.stop(),null===(e=this._filteredTrack)||void 0===e||e.stop(),this.delegate.release()},t.prototype.restore=function(t){return $r(this,void 0,void 0,(function(){return Zr(this,(function(e){return this._filteredTrack&&(t.removeTrack(this._filteredTrack),t.addTrack(this._sourceTrack),this._filteredTrack.stop(),delete this._filteredTrack,delete this._sourceTrack),[2]}))}))},t}();!function(t){t.RINGING="ringing",t.EARLY_MEDIA="early-media",t.ESTABLISHED="established",t.HANGUP="hangup",t.ERROR="error",t.CAMERA_VIDEO_ADDED="camera-video-added",t.CAMERA_VIDEO_UPDATED="camera-video-updated",t.CAMERA_VIDEO_REMOVED="camera-video-removed",t.SCREEN_SHARE_ADDED="screen-share-added",t.SCREEN_SHARE_REMOVED="screen-share-removed",t.CONFERENCE_JOINED="conference-joined",t.CONFERENCE_LEFT="conference-left",t.PARTICIPANT_JOINING="participant-joining",t.PARTICIPANT_JOINED="participant-joined",t.PARTICIPANT_MUTED="participant-muted",t.PARTICIPANT_UNMUTED="participant-unmuted",t.PARTICIPANT_DEAF="participant-deaf",t.PARTICIPANT_UNDEAF="participant-undeaf",t.PARTICIPANT_STARTED_TALKING="participant-started-talking",t.PARTICIPANT_STOPPED_TALKING="participant-stopped-talking",t.PARTICIPANT_LEFT="participant-left",t.PARTICIPANT_CAMERA_VIDEO_ADDED="participant-camera-video-added",t.PARTICIPANT_CAMERA_VIDEO_REMOVED="participant-camera-video-removed",t.PARTICIPANT_SCREEN_SHARE_ADDED="participant-screen-share-added",t.PARTICIPANT_SCREEN_SHARE_REMOVED="participant-screen-share-removed",t.PARTICIPANT_NETWORK_QUALITY_CHANGED="participant-network-quality-changed",t.ROOM_JOINED="room-joined",t.ROOM_LEFT="room-left",t.REMOTE_MUTED="remote-muted",t.REMOTE_UNMUTED="remote-unmuted",t.REMOTE_CAMERA_VIDEO_ADDED="remote-camera-video-added",t.REMOTE_CAMERA_VIDEO_REMOVED="remote-camera-video-removed",t.REMOTE_SCREEN_SHARE_ADDED="remote-screen-share-added",t.REMOTE_SCREEN_SHARE_REMOVED="remote-screen-share-removed",t.NETWORK_QUALITY_CHANGED="network-quality-changed",t.REMOTE_NETWORK_QUALITY_CHANGED="remote-network-quality-changed",t.DIALOG_JOINED="dialog-joined",t.DIALOG_LEFT="dialog-left",t.RECONNECTING="reconnecting",t.RECONNECTED="reconnected",t.ROOM_REJOINED="room-rejoined",t.ROOM_REJOINING="room-rejoining"}(qr||(qr={})),function(t){t.GRID="GRID",t.PRESENTATION="PRESENTATION"}(Kr||(Kr={}));var ti,ei=function(){function t(t,e,n){this._cameraOrientation=t,this._videoFilterFactory=e,this._videoMode=n}return Object.defineProperty(t.prototype,"cameraOrientation",{get:function(){return this._cameraOrientation},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoFilterFactory",{get:function(){return this._videoFilterFactory},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoMode",{get:function(){return this._videoMode},enumerable:!1,configurable:!0}),t.builder=function(){return new ni},t}(),ni=function(){function t(){this._cameraOrientation=Cn.FRONT,this._videoMode=Kr.PRESENTATION}return t.prototype.setCameraOrientation=function(t){return this._cameraOrientation=t,this},t.prototype.setVideoFilterFactory=function(t){return this._videoFilterFactory=t,this},t.prototype.setVideoMode=function(t){return this._videoMode=t,this},t.prototype.build=function(){return new ei(this._cameraOrientation,this._videoFilterFactory,this._videoMode)},t}(),ri=function(){function t(t,e){this._audioFilterFactory=t,this._audioQualityMode=e}return Object.defineProperty(t.prototype,"audioFilterFactory",{get:function(){return this._audioFilterFactory},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioQualityMode",{get:function(){return this._audioQualityMode},enumerable:!1,configurable:!0}),t.builder=function(){return new ii},t}(),ii=function(){function t(){}return t.prototype.setAudioFilterFactory=function(t){return this._audioFilterFactory=t,this},t.prototype.setAudioQualityMode=function(t){return this._audioQualityMode=t,this},t.prototype.build=function(){return new ri(this._audioFilterFactory,this._audioQualityMode)},t}();!function(t){t[t.AUTO=0]="AUTO",t[t.LOW_DATA=1]="LOW_DATA",t[t.HIGH_QUALITY=2]="HIGH_QUALITY"}(ti||(ti={}));var oi,ai=function(){function t(t,e,n,r,i,o,a){this._audio=t,this._audioOptions=e,this._video=n,this._videoOptions=r,this._customData=i,this._entityId=o,this._dataChannel=a}return Object.defineProperty(t.prototype,"audio",{get:function(){return this._audio},set:function(t){this._audio=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioOptions",{get:function(){return this._audioOptions},set:function(t){this._audioOptions=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"video",{get:function(){return this._video},set:function(t){this._video=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoOptions",{get:function(){return this._videoOptions},set:function(t){this._videoOptions=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"customData",{get:function(){return this._customData},set:function(t){this._customData=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"entityId",{get:function(){return this._entityId},set:function(t){this._entityId=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataChannel",{get:function(){return this._dataChannel},set:function(t){this._dataChannel=t},enumerable:!1,configurable:!0}),t.builder=function(){return new si},t}(),si=function(){function t(){this._audio=!0,this._audioOptions=new ri(null,ti.AUTO),this._video=!1,this._videoOptions=new ei(Cn.FRONT,null,Kr.PRESENTATION),this._customData={},this._entityId=void 0,this._dataChannel=!1}return t.prototype.setAudio=function(t){return this._audio=t,this},t.prototype.setAudioOptions=function(t){return this._audioOptions=t,this},t.prototype.setVideo=function(t){return this._video=t,this},t.prototype.setVideoOptions=function(t){return this._videoOptions=t,this},t.prototype.setCustomData=function(t){return this._customData=t,this},t.prototype.setEntityId=function(t){return this._entityId=t,this},t.prototype.setDataChannel=function(t){return this._dataChannel=t,this},t.prototype.build=function(){return new ai(this._audio,this._audioOptions,this._video,this._videoOptions,this._customData,this._entityId,this._dataChannel)},t}();!function(t){t.USER_REQUEST="USER_REQUEST",t.ACTIVE_PRESENTER_CHANGED="ACTIVE_PRESENTER_CHANGED"}(oi||(oi={}));const ci=oi;var ui,li=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},di=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},pi=function(){function t(t,e,n,r,i){this.localCameraStream=t,this.localScreenShareStream=e,this.remotePeerConnection=n,this.mid=r,this.currentUserIdentity=i}return t.prototype.getCanvas=function(t,e){return li(this,void 0,void 0,(function(){var n;return di(this,(function(r){if(!(n=this.getVideoStream(t,e)))throw new Error("Video not found for identity ".concat(t," and video type ").concat(e));return[2,this.drawImage(n)]}))}))},t.prototype.drawImage=function(t){return li(this,void 0,void 0,(function(){var e,n;return di(this,(function(r){switch(r.label){case 0:return[4,this.getVideoElement(t)];case 1:return e=r.sent(),(n=document.createElement("canvas")).width=e.videoWidth,n.height=e.videoHeight,n.getContext("2d").drawImage(e,0,0,e.videoWidth,e.videoHeight),e.srcObject=null,[2,n]}}))}))},t.prototype.getVideoStream=function(t,e){var n;if(t===this.currentUserIdentity)return e===Or.CAMERA?this.localCameraStream():this.localScreenShareStream();for(var r=this.mid(t,e),i=0,o=null===(n=this.remotePeerConnection())||void 0===n?void 0:n.getTransceivers();i<o.length;i++){var a=o[i];if(a.mid===r)return new MediaStream([a.receiver.track])}return null},t.prototype.getVideoElement=function(t){return li(this,void 0,void 0,(function(){var e,n;return di(this,(function(r){switch(r.label){case 0:return e=document.createElement("video"),n=t.getVideoTracks()[0],e.width=n.getSettings().width,e.height=n.getSettings().height,e.autoplay=!0,e.playsInline=!0,e.srcObject=t,[4,e.play()];case 1:return r.sent(),[2,e]}}))}))},t}(),fi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fi(e,t),e.prototype.takeScreenshot=function(t,e){return n=this,r=void 0,o=function(){return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(n){switch(n.label){case 0:return[4,this.getCanvas(t,e)];case 1:return[2,n.sent().toDataURL()]}}))},new((i=void 0)||(i=Promise))((function(t,e){function a(t){try{c(o.next(t))}catch(t){e(t)}}function s(t){try{c(o.throw(t))}catch(t){e(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(a,s)}c((o=o.apply(n,r||[])).next())}));var n,r,i,o},e}(pi),vi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mi=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},yi=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},gi=function(t){function e(e,n,r,i,o,a,s,c){var u=t.call(this,e,n,r,i,o)||this;return u.token=a,u.apiUrl=s,u.logger=c,u.initializeHttpClient(),u}return vi(e,t),e.prototype.takeScreenshot=function(t,e){return mi(this,void 0,void 0,(function(){var n,r,i,o;return yi(this,(function(a){switch(a.label){case 0:return[4,this.getCanvas(t,e)];case 1:n=a.sent(),a.label=2;case 2:return a.trys.push([2,5,,6]),[4,this.toFile(n,"".concat(t,"_").concat(e.toString().toLowerCase(),"_").concat(Date.now(),".png"))];case 3:return r=a.sent(),[4,this.uploadImage(r)];case 4:return i=a.sent(),this.logger.info("Successfully uploaded file: "+JSON.stringify(i)),[2,i];case 5:throw o=a.sent(),new Error(this.getErrorMessage(o));case 6:return[2]}}))}))},e.prototype.initializeHttpClient=function(){this.httpClient=gn.create({baseURL:"https://".concat(this.apiUrl),headers:{Authorization:"Bearer ".concat(this.token)}})},e.prototype.uploadImage=function(t){return mi(this,void 0,void 0,(function(){var e;return yi(this,(function(n){switch(n.label){case 0:return(e=new FormData).append("file",t),e.append("fileFormat","PNG"),[4,this.httpClient.request({method:"POST",url:"webrtc/1/files",data:e,headers:{"Content-Type":"multipart/form-data"}})];case 1:return[2,n.sent().data]}}))}))},e.prototype.toFile=function(t,n){return mi(this,void 0,void 0,(function(){return yi(this,(function(r){return[2,new Promise((function(r,i){var o=setTimeout((function(){i("File generation timed out.")}),e.TIMEOUT);t.toBlob((function(t){clearTimeout(o),r(new File([t],n,{type:"image/png"}))}))}))]}))}))},e.prototype.getErrorMessage=function(t){var n,r,i,o;return(null===(o=null===(i=null===(r=null===(n=null==t?void 0:t.response)||void 0===n?void 0:n.data)||void 0===r?void 0:r.requestError)||void 0===i?void 0:i.serviceException)||void 0===o?void 0:o.text)===e.FILE_STORAGE_NOT_ENABLED_ERROR?e.FILE_STORAGE_NOT_ENABLED_ERROR:e.GENERIC_FILE_UPLOAD_ERROR},e.TIMEOUT=3e3,e.FILE_STORAGE_NOT_ENABLED_ERROR="File storage is not enabled for account.",e.GENERIC_FILE_UPLOAD_ERROR="File upload failed.",e}(pi);!function(t){t.TEXT_DELIVERED_EVENT="text-delivered",t.TEXT_RECEIVED_EVENT="text-received",t.BROADCAST_TEXT_RECEIVED_EVENT="broadcast-text-received"}(ui||(ui={}));var Ei,_i=function(){function t(){this.taskQueue=[],this.active=!1}return t.prototype.acquireLock=function(){var t=this;return new Promise((function(e){t.withLock((function(){return new Promise((function(t){e({release:function(){t(null)}})}))}))}))},t.prototype.withLock=function(t){var e,n,r=this,i=new Promise((function(t,r){e=t,n=r})),o=function(){return i=r,o=void 0,s=function(){return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(r){switch(r.label){case 0:return[4,t().then(e,n)];case 1:return r.sent(),this.taskQueue.length>0?this.taskQueue.shift()():this.active=!1,[2]}}))},new((a=void 0)||(a=Promise))((function(t,e){function n(t){try{c(s.next(t))}catch(t){e(t)}}function r(t){try{c(s.throw(t))}catch(t){e(t)}}function c(e){var i;e.done?t(e.value):(i=e.value,i instanceof a?i:new a((function(t){t(i)}))).then(n,r)}c((s=s.apply(i,o||[])).next())}));var i,o,a,s};return this.active?this.taskQueue.push(o):(this.active=!0,o()),i},t}(),Ci=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},bi=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Si=function(){function t(t,e,n,r,i,o,a,s,c){this.gateway=t,this.logger=e,this.callId=n,this.currentUserIdentity=r,this.participantResolver=i,this.iceCandidateHandler=o,this.canSendMessage=a,this.apiEventEmitter=s,this.conferenceId=c,this.dataEventEmitter=new ot.EventEmitter,this.textRoomParticipants={},this.availabilityLock=new _i,this.timeLock=new _i,this.bufferLock=new _i,this.pendingMessages={},this.setupAvailabilityLock()}return t.prototype.setupAvailabilityLock=function(){var t=this;this.availabilityLock.acquireLock().then((function(e){var n=t.currentAvailabilityLock;t.currentAvailabilityLock=e,null==n||n.release()}))},t.prototype.initialize=function(t,e){var n=this;this.textRoomId=t.id,this.dataChannelPc=new RTCPeerConnection(e),this.dataChannelPc.ondatachannel=function(t){return n.onDataChannel(t)},this.dataChannelPc.onicecandidate=function(t){return n.iceCandidateHandler(t)},this.dataChannel=this.dataChannelPc.createDataChannel(this.conferenceId),this.initializeDataChannelListeners(),this.sendAnswer(t.description)},t.prototype.on=function(t,e){if(!Object.values(ui).find((function(e){return e===t})))throw new Error("Unknown event: ".concat(t,"!"));this.dataEventEmitter.on(t,e)},t.prototype.send=function(t,e){return Ci(this,void 0,void 0,(function(){var n=this;return bi(this,(function(r){switch(r.label){case 0:if(!this.canSendMessage())throw this.logger.warn("Data channel is unavailable until a call is added to a conference or a dialog!"),{id:"10103",name:"MEDIA_ERROR",description:"Data channel is unavailable until a call is added to a conference or a dialog"};return[4,this.availabilityLock.withLock((function(){return Ci(n,void 0,void 0,(function(){var n,r,i,o,a,s;return bi(this,(function(c){switch(c.label){case 0:if(!this.dataChannel||"open"!==this.dataChannel.readyState)throw this.logger.warn("Data channel is unavailable!"),{id:"10103",name:"MEDIA_ERROR",description:"Data channel is unavailable"};return(null===(a=this.dataChannel)||void 0===a?void 0:a.bufferedAmount)>=8192?(null===(s=this.currentBufferLock)||void 0===s||s.release(),n=this,[4,this.bufferLock.acquireLock()]):[3,2];case 1:n.currentBufferLock=c.sent(),c.label=2;case 2:return[4,this.timeLock.acquireLock()];case 3:return r=c.sent(),setTimeout((function(){return r.release()}),20),i=Cr(),o=this.getMessageRecipient(e),this.sendTextMessage(i,o,t),[2,i]}}))}))}))];case 1:return[2,r.sent()]}}))}))},t.prototype.destroy=function(){var t,e;null===(t=this.dataChannel)||void 0===t||t.close(),null===(e=this.dataChannelPc)||void 0===e||e.close(),this.dataChannelPc=null,this.dataChannel=null},t.prototype.getMessageRecipient=function(t){if(!t)return null;var e=t.identifier;if(!this.participantResolver(e))throw this.logger.warn("Unknown recipient! ".concat(e),this.callId),{id:"10103",name:"MEDIA_ERROR",description:"Recipient cannot be found"};if(!this.textRoomParticipants[e])throw this.logger.warn("Recipient data channel is unavailable! ".concat(e),this.callId),{id:"10103",name:"MEDIA_ERROR",description:"Recipient's data channel is unavailable"};return e},t.prototype.onDataChannel=function(t){var e=this;t.channel.onmessage=function(t){var n=JSON.parse(t.data);"join"===n.textroom?e.handleJoinMessage(n):"success"===n.textroom?e.handleSuccessMessage(n):"message"===n.textroom?e.handleDataMessage(n):"announcement"===n.textroom?e.handleAnnouncementData(n):"leave"===n.textroom?e.handleLeaveMessage(n):"error"===n.textroom&&e.handleErrorMessage(n)}},t.prototype.handleErrorMessage=function(t){var e=t.transaction;this.pendingMessages[e]?(this.emitDataSent(e,!1),delete this.pendingMessages[e]):(this.logger.error("Received TextRoom Plugin error from Janus: ".concat(JSON.stringify(t)),this.callId),this.apiEventEmitter.emit(qr.ERROR,{errorCode:{name:"EC_INTERNAL_SERVER_ERROR",description:"Internal Server Error."}}))},t.prototype.handleDataMessage=function(t){var e=t.text,n=!!t.whisper,r=this.textRoomParticipants[t.from];t.from!==this.currentUserIdentity&&this.emitDataReceived(e,r.endpoint,n,new Date(t.date))},t.prototype.handleAnnouncementData=function(t){var e=t.text,n=t.date;this.emitBroadcastTextReceived(e,new Date(n))},t.prototype.emitDataSent=function(t,e){this.dataEventEmitter.emit(ui.TEXT_DELIVERED_EVENT,{id:t,date:new Date,delivered:e})},t.prototype.emitDataReceived=function(t,e,n,r){this.dataEventEmitter.emit(ui.TEXT_RECEIVED_EVENT,{text:t,isDirect:n,from:e,date:r})},t.prototype.emitBroadcastTextReceived=function(t,e){this.dataEventEmitter.emit(ui.BROADCAST_TEXT_RECEIVED_EVENT,{text:t,date:e})},t.prototype.handleLeaveMessage=function(t){var e=t.username;delete this.textRoomParticipants[e]},t.prototype.handleSuccessMessage=function(t){var e,n=this,r=t.participants;if(r){for(var i=0,o=r;i<o.length;i++){var a=o[i].username;this.textRoomParticipants[a]=this.participantResolver(a)}null===(e=this.currentAvailabilityLock)||void 0===e||e.release()}var s=t.sent;s?Object.keys(s).forEach((function(e){var r=s[e];n.emitDataSent(t.transaction,r)})):this.emitDataSent(t.transaction,!0)},t.prototype.handleJoinMessage=function(t){var e=t.username;this.textRoomParticipants[e]=this.participantResolver(e)},t.prototype.initializeDataChannelListeners=function(){var t=this;this.dataChannel.onopen=function(){return t.sendJoinMessage()},this.dataChannel.onerror=function(e){var n;"data-channel-failure"===e.error.errorDetail&&(t.logger.warn("Data channel failure! ".concat(null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.message)),t.apiEventEmitter.emit(qr.ERROR,{errorCode:Dn.MEDIA_ERROR}))},this.dataChannel.bufferedAmountLowThreshold=4096,this.dataChannel.onbufferedamountlow=function(){var e;null===(e=t.currentBufferLock)||void 0===e||e.release()}},t.prototype.sendAnswer=function(t){return Ci(this,void 0,void 0,(function(){var e;return bi(this,(function(n){switch(n.label){case 0:return[4,this.dataChannelPc.setRemoteDescription(t)];case 1:return n.sent(),[4,this.dataChannelPc.createAnswer()];case 2:return e=n.sent(),[4,this.dataChannelPc.setLocalDescription(e)];case 3:return n.sent(),this.gateway.send({action:kr.SETUP_ACK,description:e}),[2]}}))}))},t.prototype.sendJoinMessage=function(){if(this.dataChannel&&"open"===this.dataChannel.readyState){var t={textroom:"join",transaction:Cr(),room:this.textRoomId,username:this.currentUserIdentity};this.sendDataChannelMessage(t)}else this.logger.warn("Data channel is not open!",this.callId)},t.prototype.sendTextMessage=function(t,e,n){this.pendingMessages[t]=e;var r={textroom:"message",transaction:t,room:this.textRoomId,to:e||void 0,text:n};this.sendDataChannelMessage(r)},t.prototype.sendDataChannelMessage=function(t){try{this.dataChannel.send(JSON.stringify(t))}catch(t){throw this.logger.warn("Failed sending message through data channel! ".concat(null==t?void 0:t.code," ").concat(null==t?void 0:t.message),this.callId),Dn.MEDIA_ERROR}},t}(),Ri=function(t,e,n,r){this.deviceId=t,this.groupId=e,this.kind=n,this.label=r},Oi=function(){function t(){}return t.getAudioInputDevices=function(){return t.requestPermission({audio:!0,video:!1}).then((function(){return t.getDevices((function(t){return"audioinput"===t.kind}))}))},t.getAudioOutputDevices=function(){return t.getDevices((function(t){return"audiooutput"===t.kind}))},t.getVideoInputDevices=function(){return t.requestPermission({audio:!1,video:!0}).then((function(){return t.getDevices((function(t){return"videoinput"===t.kind}))}))},t.getMediaStream=function(e){return t.getDevices((function(t){return t.deviceId===e})).then((function(e){return t.getMediaStreamForDevice(e[0])}))},t.getAudioMediaStream=function(t){var e={audio:{deviceId:null!=t?t:void 0},video:!1};return navigator.mediaDevices.getUserMedia(e)},t.getVideoMediaStream=function(t,e){var n={audio:!1,video:{deviceId:null!=t?t:void 0,facingMode:e}};return navigator.mediaDevices.getUserMedia(n)},t.closeMediaStream=function(t){t.getTracks().forEach((function(t){return t.stop()}))},t.getDevices=function(e){return navigator.mediaDevices.enumerateDevices().then((function(t){return An().uniqBy(t,"deviceId")})).then((function(n){return n.filter(e).map(t.toMediaDevice)}))},t.getMediaStreamForDevice=function(e){return e.kind.endsWith("output")?Promise.reject("Cannot get media stream for output device."):e.kind.startsWith("video")?t.getVideoMediaStream(e.deviceId):t.getAudioMediaStream(e.deviceId)},t.toMediaDevice=function(t){return new Ri(t.deviceId,t.groupId,t.kind,t.label)},t.requestPermission=function(e){return n=this,r=void 0,o=function(){var n;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=r.sent(),t.closeMediaStream(n),[2]}}))},new((i=void 0)||(i=Promise))((function(t,e){function a(t){try{c(o.next(t))}catch(t){e(t)}}function s(t){try{c(o.throw(t))}catch(t){e(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(a,s)}c((o=o.apply(n,r||[])).next())}));var n,r,i,o},t}(),Ti=function(){return Ti=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ti.apply(this,arguments)},Ai=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},wi=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Ii=Ot.isMobile()?Sr.cameraEncodingsMobile:Sr.cameraEncodings,Di=function(){function t(t,e,n,r,i,o,a,s,c,u,l){void 0===l&&(l=null);var d,p,f,h,v,m,y,g=this;this.eventEmitter=t,this.gateway=e,this.logger=n,this.rtcConfig=r,this.device=i,this._applicationId=o,this.applicationCallOptions=a,this.currentUserIdentity=s,this.token=c,this.apiUrl=u,this.hasRemoteDescription=!1,this.remoteCandidates=[],this.isEarlyMedia=!1,this.joinedConference=!1,this.joinedDialog=!1,this.participants={},this.remoteVideos={},this.dtmfUnavailable=!1,this._videoFilter=null,this._audioFilter=null,this.reconnecting=!1,this.reconnectingHandler=function(t){return g.handleReconnecting(t)},this.reconnectedHandler=function(t){return g.handleReconnected(t)},this.callStartTime=new Date,this.callStatus=Nn.INITIALIZED,this.mediaUpdateStatus=fr.IDLE,this.apiEventEmitter=new wr,this.callId=l||Cr(),this.localScreenShare={active:!1},this.networkQualityMonitor=new Yr,this._videoFilter=Gr.createWrapped(null===(p=null===(d=this.applicationCallOptions)||void 0===d?void 0:d.videoOptions)||void 0===p?void 0:p.videoFilterFactory),this._audioFilter=Xr.createWrapped(null===(h=null===(f=this.applicationCallOptions)||void 0===f?void 0:f.audioOptions)||void 0===h?void 0:h.audioFilterFactory),this._audioQualityMode=(null===(m=null===(v=this.applicationCallOptions)||void 0===v?void 0:v.audioOptions)||void 0===m?void 0:m.audioQualityMode)||ti.AUTO,(null===(y=this.applicationCallOptions)||void 0===y?void 0:y.dataChannel)&&this.createDataChannel(),this.initEventHandlers(),this.handleDeviceChange()}return t.prototype.on=function(t,e){if(!Object.values(qr).find((function(e){return e===t})))throw new Error("Unknown event: ".concat(t,"!"));this.apiEventEmitter.on(t,e)},t.prototype.id=function(){return this.callId},t.prototype.options=function(){return this.applicationCallOptions},t.prototype.customData=function(){var t;return null===(t=this.applicationCallOptions)||void 0===t?void 0:t.customData},t.prototype.applicationId=function(){return this._applicationId},t.prototype.duration=function(){return this.callEstablishTime?this.callEndTime?this.getDurationInSeconds(this.callEndTime):this.getDurationInSeconds(new Date):0},t.prototype.endTime=function(){return this.callEndTime},t.prototype.establishTime=function(){return this.callEstablishTime},t.prototype.hangup=function(){this.callStatus!==Nn.FINISHED&&(this.callStatus=Nn.FINISHED,this.dataChannelCleanup(),this.scheduleHangup({callId:this.callId,status:{id:"0",name:"NO_ERROR",description:"No Error."}}),this.gateway.send({action:kr.HANGUP,callId:this.callId,reason:"Normal call clearing"}))},t.prototype.startTime=function(){return this.callStartTime},t.prototype.status=function(){return this.callStatus},t.prototype.mute=function(t){return Ai(this,void 0,void 0,(function(){var e,n,r,i,o;return wi(this,(function(a){switch(a.label){case 0:if(!this.localAudioStream)throw Dn.MEDIA_ERROR;if(!this.emptyAudioStream||t)return[3,6];this.localAudio.active=!0,this.emptyAudioStream.close(),delete this.emptyAudioStream,a.label=1;case 1:return a.trys.push([1,5,,6]),[4,this.getLocalAudioStream(!0,!1)];case 2:return e=a.sent(),[4,zr(this._audioFilter,e,0)];case 3:return a.sent(),n=this.setAudioStream(e),[4,this.replaceTrack(this.localAudio,n)];case 4:return a.sent(),this.sendInfo(t),[3,6];case 5:return r=a.sent(),[2,this.throwMediaError(r)];case 6:if(0===(i=this.localAudioStream.getAudioTracks()).length)throw Dn.MEDIA_ERROR;return o=i[0],this.localAudio.active=!t,o.enabled=this.localAudio.active,this.sendInfo(t),[2]}}))}))},t.prototype.setAudioStream=function(t){return this.localAudioStream=t,t.getAudioTracks()[0]},t.prototype.sendInfo=function(t){this.gateway.send({action:kr.MUTE,muted:t,callId:this.callId})},t.prototype.muted=function(){return!this.localAudio.active},t.prototype.sendDTMF=function(t){return Ai(this,void 0,void 0,(function(){return wi(this,(function(e){switch(e.label){case 0:if(!t||t.toString().match(/[^0-9*#A-D]/))throw Dn.MEDIA_ERROR;return this.dtmfSender?[3,2]:[4,this.createDTMFSender()];case 1:e.sent(),e.label=2;case 2:if(this.dtmfSender&&!this.dtmfUnavailable)try{this.dtmfSender.insertDTMF(t,Dr,Pr)}catch(e){this.dtmfUnavailable=!0,this.sendDTMFInfo(t,Dr)}else this.sendDTMFInfo(t,Dr);return[2]}}))}))},t.prototype.pauseIncomingVideo=function(){(this.joinedConference||this.joinedDialog)&&this.gateway.send({action:kr.PAUSE_INCOMING_VIDEO})},t.prototype.resumeIncomingVideo=function(){(this.joinedConference||this.joinedDialog)&&this.gateway.send({action:kr.RESUME_INCOMING_VIDEO})},t.prototype.setAudioInputDevice=function(t){var e;return Ai(this,void 0,void 0,(function(){var n,r,i;return wi(this,(function(o){switch(o.label){case 0:this.device.setAudioInputDevice(t),null===(e=this.localAudioStream)||void 0===e||e.getAudioTracks().forEach((function(t){return t.stop()})),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,this.getLocalAudioStream(!0,!1)];case 2:return n=o.sent(),[4,zr(this._audioFilter,n,0)];case 3:return o.sent(),(r=this.setAudioStream(n)).enabled=this.localAudio.active,[2,this.replaceTrack(this.localAudio,r)];case 4:return i=o.sent(),[2,this.throwMediaError(i)];case 5:return[2]}}))}))},t.prototype.audioFilter=function(){var t;return null===(t=this._audioFilter)||void 0===t?void 0:t.delegate},t.prototype.setAudioFilter=function(t){var e,n,r;return Ai(this,void 0,void 0,(function(){var i,o,a;return wi(this,(function(s){switch(s.label){case 0:return(null===(e=this._audioFilter)||void 0===e?void 0:e.delegate)===t?[2]:[4,null===(n=this._audioFilter)||void 0===n?void 0:n.restore(this.localAudioStream)];case 1:return s.sent(),[4,null===(r=this._audioFilter)||void 0===r?void 0:r.release()];case 2:s.sent(),this._audioFilter=Xr.wrap(t),s.label=3;case 3:return s.trys.push([3,7,,8]),this.localAudioStream&&this.localAudioStream.getAudioTracks().forEach((function(t){return t.stop()})),[4,this.getLocalAudioStream(!0,!1)];case 4:return i=s.sent(),[4,zr(this._audioFilter,i,0)];case 5:return s.sent(),(o=this.setAudioStream(i)).enabled=this.localAudio.active,[4,this.replaceTrack(this.localAudio,o)];case 6:return s.sent(),[3,8];case 7:return a=s.sent(),[2,this.throwMediaError(a)];case 8:return[2]}}))}))},t.prototype.clearAudioFilter=function(){return this.setAudioFilter(null)},t.prototype.videoFilter=function(){var t;return null===(t=this._videoFilter)||void 0===t?void 0:t.delegate},t.prototype.setVideoFilter=function(t){var e,n,r;return Ai(this,void 0,void 0,(function(){return wi(this,(function(i){switch(i.label){case 0:return(null===(e=this._videoFilter)||void 0===e?void 0:e.delegate)===t?[2]:this.hasCameraVideo()?[4,null===(n=this._videoFilter)||void 0===n?void 0:n.restore(this.localCameraVideoStream)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[4,null===(r=this._videoFilter)||void 0===r?void 0:r.release()];case 3:return i.sent(),this._videoFilter=Gr.wrap(t),this.hasCameraVideo()?[4,Qr(this._videoFilter,this.localCameraVideoStream,0)]:[3,6];case 4:return i.sent(),[4,this.updateTransceiver(this.localCameraVideo,this.localCameraVideoStream,Ii)];case 5:i.sent(),this.apiEventEmitter.emit(qr.CAMERA_VIDEO_UPDATED,{stream:this.localCameraVideoStream}),i.label=6;case 6:return[2]}}))}))},t.prototype.clearVideoFilter=function(){return this.setVideoFilter(null)},t.prototype.setVideoInputDevice=function(t){return Ai(this,void 0,void 0,(function(){return wi(this,(function(e){switch(e.label){case 0:return this.device.setVideoInputDevice(t),[4,this.updateCameraStream(this.cameraOrientation())];case 1:return e.sent(),[2]}}))}))},t.prototype.cameraOrientation=function(){return this.device.getCameraOrientation()},t.prototype.setCameraOrientation=function(t){return this.updateCameraStream(t)},t.prototype.localCapturer=function(){var t,e=this;return null!==(t=this.defaultLocalCaputuer)&&void 0!==t?t:this.defaultLocalCaputuer=new hi((function(){return e.localCameraVideoStream}),(function(){return e.localScreenShareStream}),(function(){var t;return null===(t=e.videoSubscriberPC)||void 0===t?void 0:t.peerConnection}),(function(t,n){return e.getMidByIdentityAndVideoType(t,n)}),this.currentUserIdentity)},t.prototype.serverCapturer=function(){var t,e=this;return null!==(t=this.defaultServerCapturer)&&void 0!==t?t:this.defaultServerCapturer=new gi((function(){return e.localCameraVideoStream}),(function(){return e.localScreenShareStream}),(function(){var t;return null===(t=e.videoSubscriberPC)||void 0===t?void 0:t.peerConnection}),(function(t,n){return e.getMidByIdentityAndVideoType(t,n)}),this.currentUserIdentity,this.token,this.apiUrl,this.logger)},t.prototype.dataChannel=function(){return this._dataChannel},t.prototype.audioQualityMode=function(t){var e=this;this._audioQualityMode=t,this.audioPC.peerConnection.getSenders().forEach((function(n){var r;if("audio"===n.track.kind){var i=n.getParameters();null!==(r=i.encodings)&&void 0!==r||(i.encodings=[{}]),i.encodings.forEach((function(e){switch(t){case ti.AUTO:e.maxBitrate=void 0,e.networkPriority="low";break;case ti.LOW_DATA:e.maxBitrate=1e4,e.networkPriority="high";break;case ti.HIGH_QUALITY:e.maxBitrate=void 0,e.networkPriority="high"}})),n.setParameters(i).catch((function(t){return e.logger.error("Changing data consumption mode failed: ".concat(null==t?void 0:t.message))}))}}))},t.prototype.getMidByIdentityAndVideoType=function(t,e){var n;return null===(n=Object.values(this.remoteVideos).find((function(n){return n.participant.endpoint.identifier===t&&n.type===e})))||void 0===n?void 0:n.mid},t.prototype.hasCameraVideo=function(){return this.localCameraVideo&&this.localCameraVideo.active},t.prototype.hasScreenShare=function(){return this.localScreenShare&&this.localScreenShare.active},t.prototype.cameraVideo=function(t){return Ai(this,void 0,void 0,(function(){return wi(this,(function(e){return this.validateMediaUpdateStatus(),t!==this.localCameraVideo.active?(this.localCameraVideo.active=t,[2,t?this.addCameraVideo():this.removeCameraVideo()]):[2]}))}))},t.prototype.screenShare=function(t){return Ai(this,void 0,void 0,(function(){return wi(this,(function(e){return this.validateMediaUpdateStatus(),t!==this.localScreenShare.active?(this.localScreenShare.active=t,[2,t?this.addScreenShareVideo():this.removeScreenShareVideo(ci.USER_REQUEST)]):[2]}))}))},t.prototype.startScreenShare=function(t){return Ai(this,void 0,void 0,(function(){return wi(this,(function(e){return this.validateMediaUpdateStatus(),this.localScreenShare.active=!0,[2,this.addScreenShareVideo(t)]}))}))},t.prototype.stopScreenShare=function(){return Ai(this,void 0,void 0,(function(){return wi(this,(function(t){return this.validateMediaUpdateStatus(),this.localScreenShare.active=!1,[2,this.removeScreenShareVideo(ci.USER_REQUEST)]}))}))},t.prototype.removeScreenShareVideoWithReason=function(t){return Ai(this,void 0,void 0,(function(){return wi(this,(function(e){return this.validateMediaUpdateStatus(),this.localScreenShare.active?(this.localScreenShare.active=!1,[2,this.removeScreenShareVideo(t)]):[2]}))}))},t.prototype.createDataChannel=function(){var t=this;this._dataChannel=new Si(this.gateway,this.logger,this.callId,this.currentUserIdentity,(function(e){return t.participants[e]}),(function(e){return t.onIceCandidate(kr.ICE_CANDIDATE_DATA_CHANNEL,e)}),(function(){return t.joinedDialog||t.joinedConference}),this.apiEventEmitter,this.conferenceId)},t.prototype.initEventHandlers=function(){var t=this;this.eventEmitter.on(Tr.TRICKLE_ICE,(function(e){return t.handleTrickleIce(e)})),this.eventEmitter.once(Tr.RINGING,(function(){return t.ringingHandler()})),this.eventEmitter.on(Tr.CALL_RESPONSE,(function(e){return t.responseHandler(e)})),this.eventEmitter.once(Tr.CALL_ACCEPTED,(function(e){return t.callAcceptedHandler(e)})),this.eventEmitter.once(Tr.HANGUP,(function(e){return t.hangupHandler(e)})),this.eventEmitter.once(Tr.CALL_ERROR,(function(e){return t.errorHandler(e)})),this.eventEmitter.on(Tr.JOINED_VIDEO_CALL,(function(){return t.videoCallJoinedHandler()})),this.eventEmitter.on(Tr.PUBLISHED_VIDEO_CALL,(function(e){return t.videoCallPublishedHandler(e)})),this.eventEmitter.on(Tr.UNPUBLISHED_VIDEO_CALL,(function(){return t.videoCallUnpublishedHandler()})),this.eventEmitter.on(Tr.JOIN_VIDEO_CALL_ERROR,(function(e){return t.handleJoinVideoCallError(e)})),this.eventEmitter.on(Tr.PUBLISH_VIDEO_CALL_ERROR,(function(e){return t.publishVideoCallErrorHandler(e)})),this.eventEmitter.on(Tr.JOINED_APPLICATION_CONFERENCE,(function(e){return t.handleJoinedApplicationConference(e)})),this.eventEmitter.on(Tr.PARTICIPANT_JOINING,(function(e){return t.handleParticipantJoining(e)})),this.eventEmitter.on(Tr.PARTICIPANT_JOINED,(function(e){return t.handleParticipantJoined(e)})),this.eventEmitter.on(Tr.PARTICIPANT_MEDIA_CHANGED,(function(e){return t.handleParticipantMediaChanged(e)})),this.eventEmitter.on(Tr.PARTICIPANT_STARTED_TALKING,(function(e){return t.handleParticipantStartedTalking(e)})),this.eventEmitter.on(Tr.PARTICIPANT_STOPPED_TALKING,(function(e){return t.handleParticipantStoppedTalking(e)})),this.eventEmitter.on(Tr.PARTICIPANT_LEFT,(function(e){return t.handleParticipantLeft(e)})),this.eventEmitter.on(Tr.LEFT_APPLICATION_CONFERENCE,(function(e){return t.handleLeftApplicationConference(e)})),this.eventEmitter.on(Tr.JOINED_VIDEO_CONFERENCE,(function(){return t.handleJoinedVideoConference()})),this.eventEmitter.on(Tr.PUBLISHED_VIDEO_CONFERENCE,(function(e){return t.videoConferencePublishedHandler(e)})),this.eventEmitter.on(Tr.UNPUBLISHED_VIDEO_CONFERENCE,(function(){return t.videoConferenceUnpublishedHandler()})),this.eventEmitter.on(Tr.JOIN_VIDEO_CONFERENCE_ERROR,(function(e){return t.handleJoinVideoConferenceError(e)})),this.eventEmitter.on(Tr.PUBLISH_VIDEO_CONFERENCE_ERROR,(function(e){return t.publishVideoConferenceErrorHandler(e)})),this.eventEmitter.on(Tr.SUBSCRIBED_VIDEO,(function(e){return t.subscribedVideoHandler(e)})),this.eventEmitter.on(Tr.SUBSCRIBE_VIDEO_CONFERENCE_ERROR,(function(e){return t.subscribeVideoConferenceError(e)})),this.eventEmitter.on(Tr.UPDATED_VIDEO,(function(e){return t.updatedVideoHandler(e)})),this.eventEmitter.on(Tr.DIALOG_CREATED,(function(e){return t.handleDialogCreated(e)})),this.eventEmitter.on(Tr.DIALOG_ESTABLISHED,(function(e){return t.handleDialogEstablished(e)})),this.eventEmitter.on(Tr.DIALOG_FINISHED,(function(e){return t.handleDialogFinished(e)})),this.eventEmitter.on(Tr.DIALOG_FAILED,(function(e){return t.handleDialogFailed(e)})),this.eventEmitter.on("reconnecting",this.reconnectingHandler),this.eventEmitter.on("reconnected",this.reconnectedHandler),this.eventEmitter.on(Tr.SETUP_DATA_CHANNEL,(function(e){return t.handleSetupDataChannel(e)})),this.eventEmitter.on(Tr.SETUP_DATA_CHANNEL_ERROR,(function(e){return t.setupDataChannelError(e)})),this.eventEmitter.on(Tr.PARTICIPANT_NETWORK_QUALITY,(function(e){return t.handleParticipantNetworkQuality(e)}))},t.prototype.handleDeviceChange=function(){var t=this;navigator.mediaDevices.ondevicechange=function(){return Ai(t,void 0,void 0,(function(){return wi(this,(function(t){switch(t.label){case 0:return"default"!==(this.device.getAudioInputDevice()||"default")?[3,1]:(this.switchToDefaultDevice(),[3,3]);case 1:return[4,this.device.audioInputDeviceShouldChange()];case 2:t.sent()&&this.switchToDefaultDevice(),t.label=3;case 3:return[2]}}))}))}},t.prototype.switchToDefaultDevice=function(){var t=this;this.setAudioInputDevice("default").catch((function(e){t.logger.error("Switching audio input device failed (".concat(null==e?void 0:e.message,")"),t.callId)}))},t.prototype.createAudioPeerConnection=function(){var t=this;this.audioPC=pr.create(this.rtcConfig,this.callId,Vn.Audio,this.conferenceId||this.dialogId,Fn.AUDIO,this.logger),this.audioPC.peerConnection.onicecandidate=function(e){return t.onIceCandidate(kr.ICE_CANDIDATE,e)},this.audioPC.peerConnection.ontrack=function(e){return t.onAudioPcTrack(e)},this.audioPC.peerConnection.onconnectionstatechange=function(){return t.onConnectionStateChanged()},this.audioPC.monitor.onNetworkQualityStatistics((function(e,n){return t.onNetworkQualityStatisticsChanged(e,n)}))},t.prototype.onConnectionStateChanged=function(){"connected"===this.audioPC.peerConnection.connectionState&&this._audioQualityMode!==ti.AUTO&&this.audioQualityMode(this._audioQualityMode)},t.prototype.setLocalAudioStream=function(t){this.localAudioStream=t;var e=this.localAudioStream.getAudioTracks()[0];e?e.enabled=this.localAudio.active:this.emptyAudioStream=new Ur},t.prototype.createAudioTransceiver=function(){var t=this.emptyAudioStream?this.emptyAudioStream.stream():this.localAudioStream,e=t.getAudioTracks()[0];this.localAudio.transceiver=this.audioPC.peerConnection.addTransceiver(e,{streams:[t],direction:"sendrecv"})},t.prototype.setLocalDescription=function(t,e){return Ai(this,void 0,void 0,(function(){return wi(this,(function(n){switch(n.label){case 0:return[4,t.setLocalDescription(e)];case 1:return n.sent(),[2,e]}}))}))},t.prototype.ringingHandler=function(){this.callStatus=Nn.RINGING,this.apiEventEmitter.emit(qr.RINGING,{})},t.prototype.responseHandler=function(t){var e=this;this.isEarlyMedia=t.isEarlyMedia,this.audioPC.peerConnection.setRemoteDescription(t.description).then((function(){return e.setRemoteCandidates()})).catch((function(t){return e.handleCallFlowError(t,!0)}))},t.prototype.callAcceptedHandler=function(t){this.callStatus=Nn.ESTABLISHED,this.callEstablishTime=new Date,this.apiEventEmitter.emit(qr.ESTABLISHED,{stream:this.remoteAudioStream})},t.prototype.videoCallJoinedHandler=function(){this.joinedConference||this.joinedDialog||(this.hasCameraVideo()||this.hasScreenShare())&&(this.validateMediaUpdateStatus(),this.mediaUpdateStatus=fr.ADDING_VIDEO,this.publishVideo(!1))},t.prototype.changeMonitorConferenceId=function(t){this.audioPC&&(this.audioPC.monitor.conferenceId=t),this.videoPublisherPC&&(this.videoPublisherPC.monitor.conferenceId=t),this.videoSubscriberPC&&(this.videoSubscriberPC.monitor.conferenceId=t)},t.prototype.handleSetupDataChannel=function(t){var e;return Ai(this,void 0,void 0,(function(){return wi(this,(function(n){return null===(e=this._dataChannel)||void 0===e||e.initialize(t,this.rtcConfig),[2]}))}))},t.prototype.handleJoinedApplicationConference=function(t){this.joinedConference=!0,this.conferenceId=t.id,this.changeMonitorConferenceId(t.id),this.participants=this.createParticipantMap(t.participants),this.apiEventEmitter.emit(qr.CONFERENCE_JOINED,{id:t.id,name:t.name,participants:Object.values(this.participants)})},t.prototype.handleDialogCreated=function(t){var e=this;this.joinedDialog=!0,this.dialogId=t.id,this.changeMonitorConferenceId(t.id),this.participants=this.createParticipantMap(t.participants);var n=Object.values(this.participants).find((function(t){return t.endpoint.identifier!==e.currentUserIdentity}));this.apiEventEmitter.emit(qr.DIALOG_JOINED,{id:t.id,remote:n})},t.prototype.createParticipantMap=function(t){var e=this;return t.reduce((function(t,n){var r=e.loadParticipant(n);return t[r.endpoint.identifier]=r,t}),{})},t.prototype.handleDialogEstablished=function(t){var e=this;this.participants=this.createParticipantMap(t.participants);var n=Object.values(this.participants).find((function(t){return t.endpoint.identifier!==e.currentUserIdentity}));this.joinedDialog||(this.joinedDialog=!0,this.dialogId=t.id,this.changeMonitorConferenceId(t.id),this.apiEventEmitter.emit(qr.DIALOG_JOINED,{id:t.id,remote:n})),n.media.audio.muted&&this.apiEventEmitter.emit(qr.PARTICIPANT_MUTED,{participant:n})},t.prototype.handleParticipantJoining=function(t){if(this.joinedConference){var e=this.loadParticipant(t.participant),n=e.endpoint.identifier;this.participants[n]||(this.participants[n]=e,this.apiEventEmitter.emit(qr.PARTICIPANT_JOINING,{participant:e}))}},t.prototype.handleParticipantJoined=function(t){if(this.joinedConference){var e=this.loadParticipant(t.participant),n=e.endpoint.identifier;this.participants[n]&&this.participants[n].state!==Mn.JOINING||(this.participants[n]=e,this.apiEventEmitter.emit(qr.PARTICIPANT_JOINED,{participant:e}))}},t.prototype.handleParticipantMediaChanged=function(t){var e,n;if(this.joinedConference||this.joinedDialog){var r=this.getEndpoint(t.endpoint).identifier;if(this.participants[r]){var i=this.participants[r];void 0!==(null===(e=t.media.audio)||void 0===e?void 0:e.muted)&&(i.media.audio.muted=t.media.audio.muted,this.emitMutedEvent(t,i)),void 0===(null===(n=t.media.audio)||void 0===n?void 0:n.deaf)||this.joinedDialog||(i.media.audio.deaf=t.media.audio.deaf,this.emitDeafEvent(t,i))}}},t.prototype.emitDeafEvent=function(t,e){var n=t.media.audio.deaf?qr.PARTICIPANT_DEAF:qr.PARTICIPANT_UNDEAF;this.apiEventEmitter.emit(n,{participant:e})},t.prototype.emitMutedEvent=function(t,e){var n=t.media.audio.muted?qr.PARTICIPANT_MUTED:qr.PARTICIPANT_UNMUTED;this.apiEventEmitter.emit(n,{participant:e})},t.prototype.handleParticipantStartedTalking=function(t){if(this.joinedConference){var e=this.getEndpoint(t.endpoint).identifier;if(this.participants[e]){var n=this.participants[e];n.media.audio.talking=!0,this.apiEventEmitter.emit(qr.PARTICIPANT_STARTED_TALKING,{participant:n})}}},t.prototype.handleParticipantStoppedTalking=function(t){if(this.joinedConference){var e=this.getEndpoint(t.endpoint).identifier;if(this.participants[e]){var n=this.participants[e];n.media.audio.talking=!1,this.apiEventEmitter.emit(qr.PARTICIPANT_STOPPED_TALKING,{participant:n})}}},t.prototype.handleParticipantLeft=function(t){if(this.joinedConference){var e=this.loadParticipant(t.participant),n=e.endpoint.identifier;delete this.participants[n],this.apiEventEmitter.emit(qr.PARTICIPANT_LEFT,{participant:e})}},t.prototype.handleJoinedVideoConference=function(){return Ai(this,void 0,void 0,(function(){var t;return wi(this,(function(e){switch(e.label){case 0:return this.videoPublisherCleanup(!0),this.hasCameraVideo()||this.hasScreenShare()?[4,this.migrateLocalVideos()]:[3,5];case 1:e.sent(),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,this.negotiateVideoPublisher(!0)];case 3:return e.sent(),[3,5];case 4:return t=e.sent(),this.handlePublishVideoFlowError(t),[3,5];case 5:return[2]}}))}))},t.prototype.subscribedVideoHandler=function(t){var e=this;this.remoteVideos=this.mapStreamEvent(t.streams),this.createVideoSubscriberPC(),this.videoSubscriberPC.peerConnection.setRemoteDescription(t.description).then((function(){return e.videoSubscriberPC.peerConnection.createAnswer()})).then((function(t){return e.setLocalDescription(e.videoSubscriberPC.peerConnection,t)})).then((function(t){e.gateway.send({action:kr.START_VIDEO_CONFERENCE,description:t})})).catch((function(t){return e.handleSubscribeVideoFlowError(t)}))},t.prototype.handleSubscribeVideoFlowError=function(t){this.logger.error("Subscribe video flow error occurred: ".concat(t),this.callId),this.videoSubscriberCleanup();var e=Pn.getApplicationHangupStatus(t);this.apiEventEmitter.emit(qr.ERROR,{errorCode:e})},t.prototype.updatedVideoHandler=function(t){var e=this;Object.keys(this.remoteVideos).filter((function(e){return!t.streams[e]})).forEach((function(t){var n=e.remoteVideos[t];delete e.remoteVideos[t],e.apiEventEmitter.emit(n.type===Or.CAMERA?qr.PARTICIPANT_CAMERA_VIDEO_REMOVED:qr.PARTICIPANT_SCREEN_SHARE_REMOVED,{participant:n.participant})})),this.remoteVideos=this.mapStreamEvent(t.streams),this.videoSubscriberPC.peerConnection.setRemoteDescription(t.description).then((function(){return e.videoSubscriberPC.peerConnection.createAnswer()})).then((function(t){return e.setLocalDescription(e.videoSubscriberPC.peerConnection,t)})).then((function(t){e.gateway.send({action:kr.START_VIDEO_CONFERENCE,description:t})})).catch((function(t){return e.handleSubscribeVideoFlowError(t)}))},t.prototype.updateCameraStream=function(t){var e;return void 0===t&&(t=Cn.FRONT),Ai(this,void 0,void 0,(function(){var n,r;return wi(this,(function(i){switch(i.label){case 0:if(!this.hasCameraVideo())throw new Error("Camera video is not enabled.");null===(e=this.localCameraVideoStream)||void 0===e||e.getVideoTracks().forEach((function(t){return t.stop()})),i.label=1;case 1:return i.trys.push([1,4,,5]),[4,this.getCameraVideoStream(t)];case 2:return n=i.sent(),this.localCameraVideoStream=n,this.apiEventEmitter.emit(qr.CAMERA_VIDEO_UPDATED,{stream:n}),[4,Qr(this._videoFilter,n,0)];case 3:return i.sent(),[2,this.replaceTrack(this.localCameraVideo,n.getVideoTracks()[0])];case 4:return r=i.sent(),this.throwMediaError(r),[3,5];case 5:return[2]}}))}))},t.prototype.handleLeftApplicationConference=function(t){return Ai(this,void 0,void 0,(function(){return wi(this,(function(e){switch(e.label){case 0:return this.joinedConference=!1,this.conferenceId=null,this.changeMonitorConferenceId(null),this.participants={},this.remoteVideos={},this.videoPublisherCleanup(!0),this.videoSubscriberCleanup(),this.dataChannelCleanup(),this.hasCameraVideo()||this.hasScreenShare()?[4,this.migrateLocalVideos()]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.apiEventEmitter.emit(qr.CONFERENCE_LEFT,{errorCode:t.status}),[2]}}))}))},t.prototype.handleDialogFinished=function(t){return Ai(this,void 0,void 0,(function(){return wi(this,(function(e){switch(e.label){case 0:return this.joinedDialog=!1,this.dialogId=null,this.changeMonitorConferenceId(null),this.participants={},this.remoteVideos={},this.videoPublisherCleanup(!0),this.videoSubscriberCleanup(),this.dataChannelCleanup(),this.hasCameraVideo()||this.hasScreenShare()?[4,this.migrateLocalVideos()]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.apiEventEmitter.emit(qr.DIALOG_LEFT,{errorCode:t.status}),[2]}}))}))},t.prototype.handleReconnecting=function(t){return Ai(this,void 0,void 0,(function(){return wi(this,(function(t){return this.reconnectHandler?(this.audioCleanup(),this.videoPublisherCleanup(!0),this.videoSubscriberCleanup(),this.dataChannelCleanup(),this.reconnecting=!0,this.apiEventEmitter.emit(qr.RECONNECTING,{}),[2]):(this.logger.debug("Websocket is reconnecting, but the active call doesn't support reconnect. Hanging up..."),this.hangupHandler({callId:this.callId,status:Dn.NETWORK_ERROR}),[2])}))}))},t.prototype.handleReconnected=function(t){return Ai(this,void 0,void 0,(function(){var t,e;return wi(this,(function(n){switch(n.label){case 0:return this.reconnectHandler?(t=Cr(),e=this.callId,this.logger.info("Reconnected call ".concat(e," with new call ").concat(t),e),this.callId=t,this.createAudioPeerConnection(),[4,this.negotiateAudio(this.reconnectHandler(e,this.createCallOptions()))]):[2];case 1:return n.sent(),[2]}}))}))},t.prototype.createCallOptions=function(){var t,e,n,r=this.options()||ai.builder().build();return ai.builder().setAudioOptions(ri.builder().setAudioFilterFactory(null===(t=r.audioOptions)||void 0===t?void 0:t.audioFilterFactory).setAudioQualityMode(this._audioQualityMode).build()).setVideoOptions(ei.builder().setVideoMode(null===(e=r.videoOptions)||void 0===e?void 0:e.videoMode).setVideoFilterFactory(null===(n=r.videoOptions)||void 0===n?void 0:n.videoFilterFactory).setCameraOrientation(this.cameraOrientation()).build()).setAudio(!this.muted()).setVideo(this.hasCameraVideo()).setCustomData(r.customData).setDataChannel(r.dataChannel).setEntityId(r.entityId).build()},t.prototype.handleDialogFailed=function(t){return Ai(this,void 0,void 0,(function(){return wi(this,(function(e){switch(e.label){case 0:return this.joinedDialog=!1,this.dialogId=null,this.changeMonitorConferenceId(null),this.participants={},this.remoteVideos={},this.videoPublisherCleanup(!0),this.videoSubscriberCleanup(),this.dataChannelCleanup(),this.hasCameraVideo()||this.hasScreenShare()?[4,this.migrateLocalVideos()]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.apiEventEmitter.emit(qr.DIALOG_LEFT,{errorCode:t.status}),[2]}}))}))},t.prototype.videoSubscriberCleanup=function(){this.videoSubscriberPC&&(this.videoSubscriberPC.close(),this.videoSubscriberPC=null)},t.prototype.dataChannelCleanup=function(){var t;null===(t=this._dataChannel)||void 0===t||t.destroy()},t.prototype.handleJoinVideoCallError=function(t){this.joinedConference||this.joinedDialog||(this.apiEventEmitter.emit(qr.ERROR,{errorCode:t.status}),this.videoSubscriberCleanup(),this.videoPublisherCleanup())},t.prototype.handleJoinVideoConferenceError=function(t){(this.joinedConference||this.joinedDialog)&&(this.apiEventEmitter.emit(qr.ERROR,{errorCode:t.status}),this.dataChannelCleanup(),this.videoSubscriberCleanup(),this.videoPublisherCleanup())},t.prototype.subscribeVideoConferenceError=function(t){this.apiEventEmitter.emit(qr.ERROR,{errorCode:t.status}),this.videoSubscriberCleanup()},t.prototype.setupDataChannelError=function(t){this.apiEventEmitter.emit(qr.ERROR,{errorCode:t.status}),this.dataChannelCleanup()},t.prototype.handleParticipantNetworkQuality=function(t){var e=this.participants[t.endpoint.identity];this.apiEventEmitter.emit(qr.PARTICIPANT_NETWORK_QUALITY_CHANGED,{networkQuality:t.networkQuality,participant:e})},t.prototype.mapStreamEvent=function(t){var e=this;return Object.keys(t).reduce((function(n,r){var i;return Ti(Ti({},n),((i={})[r]={mid:r,participant:e.participants[t[r].participant],type:Or[t[r].type]},i))}),{})},t.prototype.createVideoSubscriberPC=function(){var t=this;this.videoSubscriberPC=pr.create(this.rtcConfig,this.callId,Vn.VideoSubscription,this.conferenceId||this.dialogId,Fn.VIDEO,this.logger),this.videoSubscriberPC.peerConnection.onicecandidate=function(e){return t.onIceCandidate(kr.ICE_CANDIDATE_VIDEO_CONFERENCE,e,"subscriber")},this.videoSubscriberPC.peerConnection.ontrack=function(e){return t.onVideoPcTrack(e)}},t.prototype.onVideoPcTrack=function(t){if("video"===t.track.kind){var e=this.remoteVideos[t.transceiver.mid];e.type===Or.SCREENSHARE&&this.hasScreenShare()&&this.removeScreenShareVideoWithReason(ci.ACTIVE_PRESENTER_CHANGED),e.type===Or.CAMERA?this.apiEventEmitter.emit(qr.PARTICIPANT_CAMERA_VIDEO_ADDED,{participant:e.participant,stream:new MediaStream([t.track])}):this.apiEventEmitter.emit(qr.PARTICIPANT_SCREEN_SHARE_ADDED,{participant:e.participant,stream:new MediaStream([t.track])})}},t.prototype.videoCallPublishedHandler=function(t){var e=this;this.joinedConference||this.joinedDialog||this.videoPublisherPC.peerConnection.setRemoteDescription(t.description).then((function(){e.mediaUpdateStatus=fr.IDLE})).catch((function(t){return e.handlePublishVideoFlowError(t)}))},t.prototype.videoConferencePublishedHandler=function(t){var e=this;(this.joinedConference||this.joinedDialog)&&this.videoPublisherPC.peerConnection.setRemoteDescription(t.description).then((function(){e.mediaUpdateStatus=fr.IDLE})).catch((function(t){return e.handlePublishVideoFlowError(t)}))},t.prototype.publishVideoCallErrorHandler=function(t){this.joinedConference||this.joinedDialog||(this.videoPublisherCleanup(),this.apiEventEmitter.emit(qr.ERROR,{errorCode:t.status}))},t.prototype.publishVideoConferenceErrorHandler=function(t){(this.joinedConference||this.joinedDialog)&&(this.videoPublisherCleanup(),this.apiEventEmitter.emit(qr.ERROR,{errorCode:t.status}))},t.prototype.videoCallUnpublishedHandler=function(){this.joinedConference||this.joinedDialog||this.videoPublisherCleanup()},t.prototype.videoConferenceUnpublishedHandler=function(){(this.joinedConference||this.joinedDialog)&&this.videoPublisherCleanup()},t.prototype.hangupHandler=function(t){this.callStatus=Nn.FINISHED,this.callEndTime=new Date,this.eventEmitter.emit("call_finished",{});var e=this.audioCleanup();this.apiEventEmitter.emit(qr.HANGUP,{errorCode:t.status,totalMediaStats:e}),this.cleanup()},t.prototype.errorHandler=function(t){this.logger.log(new kt(this.callId,t.status)),this.callStatus=Nn.FINISHED,this.callEndTime=new Date,this.eventEmitter.emit("call_finished",{});var e=this.audioCleanup();this.apiEventEmitter.emit(qr.HANGUP,{errorCode:t.status,totalMediaStats:e}),this.cleanup()},t.prototype.cleanup=function(){var t,e;return Ai(this,void 0,void 0,(function(){var n=this;return wi(this,(function(r){switch(r.label){case 0:return this.dataChannelCleanup(),this.videoPublisherCleanup(),this.videoSubscriberCleanup(),Object.values(Tr).forEach((function(t){return n.eventEmitter.removeAllListeners(t)})),this.eventEmitter.removeListener("reconnected",this.reconnectedHandler),this.eventEmitter.removeListener("reconnecting",this.reconnectingHandler),Object.values(qr).forEach((function(t){return n.apiEventEmitter.removeAllListeners(t)})),navigator.mediaDevices.ondevicechange=null,[4,null===(t=this._videoFilter)||void 0===t?void 0:t.release()];case 1:return r.sent(),[4,null===(e=this._audioFilter)||void 0===e?void 0:e.release()];case 2:return r.sent(),[2]}}))}))},t.prototype.handleTrickleIce=function(t){this.hasRemoteDescription?this.addIceCandidate(t.candidate):this.remoteCandidates.push(t.candidate)},t.prototype.addIceCandidate=function(t){var e=this,n=t.completed?null:t;this.audioPC.peerConnection.addIceCandidate(n).catch((function(n){return e.logger.log(new kt(e.callId,"Error adding ice candidate ".concat(t,": ").concat(n)))}))},t.prototype.setRemoteCandidates=function(){var t=this;this.hasRemoteDescription=!0,this.remoteCandidates.length>0&&(this.remoteCandidates.forEach((function(e){return t.addIceCandidate(e)})),this.remoteCandidates=[])},t.prototype.addCameraVideo=function(){return Ai(this,void 0,void 0,(function(){var t,e;return wi(this,(function(n){switch(n.label){case 0:this.mediaUpdateStatus=fr.ADDING_VIDEO,n.label=1;case 1:return n.trys.push([1,4,,5]),t=this,[4,this.getCameraVideoStream(this.cameraOrientation())];case 2:return t.localCameraVideoStream=n.sent(),[4,Qr(this._videoFilter,this.localCameraVideoStream,0)];case 3:return n.sent(),this.apiEventEmitter.emit(qr.CAMERA_VIDEO_ADDED,{stream:this.localCameraVideoStream}),[3,5];case 4:return e=n.sent(),this.localCameraVideo.active=!1,this.handleGetUserMediaError(e,"camera"),[2];case 5:return[4,this.publishVideo(this.joinedConference||this.joinedDialog)];case 6:return n.sent(),[2]}}))}))},t.prototype.publishVideo=function(t){return Ai(this,void 0,void 0,(function(){var e;return wi(this,(function(n){switch(n.label){case 0:this.videoPublisherPC||this.createVideoPublisherPC(t),n.label=1;case 1:return n.trys.push([1,4,,5]),[4,this.updateTransceiver(this.localCameraVideo,this.localCameraVideoStream,Ii)];case 2:return n.sent(),[4,this.negotiateVideoPublisher(t)];case 3:return n.sent(),[3,5];case 4:return e=n.sent(),this.handlePublishVideoFlowError(e),[3,5];case 5:return[2]}}))}))},t.prototype.addScreenShareVideo=function(t){return Ai(this,void 0,void 0,(function(){var e,n,r,i;return wi(this,(function(o){switch(o.label){case 0:this.mediaUpdateStatus=fr.ADDING_VIDEO,e=this.joinedConference||this.joinedDialog,this.videoPublisherPC||this.createVideoPublisherPC(e),o.label=1;case 1:return o.trys.push([1,3,,4]),n=this,[4,this.getScreenShareVideoStream(t)];case 2:return n.localScreenShareStream=o.sent(),[3,4];case 3:return r=o.sent(),this.handleGetUserMediaError(r,"screen-share"),[2];case 4:return o.trys.push([4,7,,8]),[4,this.updateTransceiver(this.localScreenShare,this.localScreenShareStream,Sr.screenShareEncodings)];case 5:return o.sent(),[4,this.negotiateVideoPublisher(e)];case 6:return o.sent(),this.apiEventEmitter.emit(qr.SCREEN_SHARE_ADDED,{stream:this.localScreenShareStream}),[3,8];case 7:return i=o.sent(),this.handlePublishVideoFlowError(i),[3,8];case 8:return[2]}}))}))},t.prototype.updateTransceiver=function(t,e,n){return Ai(this,void 0,void 0,(function(){var r;return wi(this,(function(i){switch(i.label){case 0:return r=e.getVideoTracks()[0],t.transceiver?[4,t.transceiver.sender.replaceTrack(r)]:[3,2];case 1:return i.sent(),t.transceiver.direction="sendonly",[3,3];case 2:this.addTransceiver(t,r,e,n),i.label=3;case 3:return[2]}}))}))},t.prototype.migrateLocalVideos=function(){return Ai(this,void 0,void 0,(function(){return wi(this,(function(t){return this.createVideoPublisherPC(this.joinedConference||this.joinedDialog),this.hasCameraVideo()&&this.addTransceiver(this.localCameraVideo,this.localCameraVideoStream.getVideoTracks()[0],this.localCameraVideoStream,Ot.isMobile()?Sr.cameraEncodingsMobile:Sr.cameraEncodings),this.hasScreenShare()&&this.addTransceiver(this.localScreenShare,this.localScreenShareStream.getVideoTracks()[0],this.localScreenShareStream,Sr.screenShareEncodings),[2]}))}))},t.prototype.addTransceiver=function(t,e,n,r){var i,o;if(t.transceiver){var a=null===(o=null===(i=t.transceiver)||void 0===i?void 0:i.sender)||void 0===o?void 0:o.track;a&&a!==e&&a.stop()}t.transceiver=this.videoPublisherPC.peerConnection.addTransceiver(e,{streams:[n],direction:"sendonly",sendEncodings:r})},t.prototype.negotiateVideoPublisher=function(t){return Ai(this,void 0,void 0,(function(){var e,n,r;return wi(this,(function(i){switch(i.label){case 0:return[4,this.videoPublisherPC.peerConnection.createOffer()];case 1:return e=i.sent(),[4,this.setLocalDescription(this.videoPublisherPC.peerConnection,e)];case 2:return i.sent(),n=[],this.localCameraVideo.active&&n.push({mid:this.localCameraVideo.transceiver.mid,description:Or.CAMERA}),this.localScreenShare.active&&n.push({mid:this.localScreenShare.transceiver.mid,description:Or.SCREENSHARE}),r=t?kr.PUBLISH_VIDEO_CONFERENCE:kr.PUBLISH_VIDEO_CALL,this.gateway.send({action:r,callId:this.callId,description:e,labels:n}),[2]}}))}))},t.prototype.removeCameraVideo=function(){var t;return Ai(this,void 0,void 0,(function(){return wi(this,(function(e){switch(e.label){case 0:return this.localCameraVideo.transceiver?(this.mediaUpdateStatus=fr.REMOVING_VIDEO,[4,this.disableLocalMedia(this.localCameraVideo)]):[2];case 1:return e.sent(),[4,null===(t=this._videoFilter)||void 0===t?void 0:t.release()];case 2:return e.sent(),this.apiEventEmitter.emit(qr.CAMERA_VIDEO_REMOVED,{}),[2]}}))}))},t.prototype.removeScreenShareVideo=function(t){return Ai(this,void 0,void 0,(function(){return wi(this,(function(e){switch(e.label){case 0:return this.localScreenShare.transceiver?(this.mediaUpdateStatus=fr.REMOVING_VIDEO,[4,this.disableLocalMedia(this.localScreenShare)]):[2];case 1:return e.sent(),this.apiEventEmitter.emit(qr.SCREEN_SHARE_REMOVED,{reason:t}),[2]}}))}))},t.prototype.disableLocalMedia=function(t){return Ai(this,void 0,void 0,(function(){var e;return wi(this,(function(n){switch(n.label){case 0:return[4,this.disableTransceiver(t)];case 1:return n.sent(),this.localCameraVideo.active||this.localScreenShare.active?[3,2]:(e=this.joinedConference||this.joinedDialog?kr.UNPUBLISH_VIDEO_CONFERENCE:kr.UNPUBLISH_VIDEO_CALL,this.gateway.send({action:e,callId:this.callId}),[3,4]);case 2:return[4,this.negotiateVideoPublisher(this.joinedConference||this.joinedDialog)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))},t.prototype.disableTransceiver=function(t){var e;return Ai(this,void 0,void 0,(function(){return wi(this,(function(n){switch(n.label){case 0:return null===(e=t.transceiver.sender.track)||void 0===e||e.stop(),[4,t.transceiver.sender.replaceTrack(null)];case 1:return n.sent(),t.transceiver.direction="inactive",[2]}}))}))},t.prototype.replaceTrack=function(t,e){var n;return Ai(this,void 0,void 0,(function(){return wi(this,(function(r){switch(r.label){case 0:return t.transceiver?t.transceiver.sender.track===e?[2]:(null===(n=t.transceiver.sender.track)||void 0===n||n.stop(),[4,t.transceiver.sender.replaceTrack(e)]):[2];case 1:return r.sent(),[2]}}))}))},t.prototype.throwMediaError=function(t){switch(t.name){case"NotAllowedError":throw Dn.DEVICE_FORBIDDEN;case"NotFoundError":throw Dn.DEVICE_NOT_FOUND;case"NotReadableError":throw Dn.DEVICE_UNAVAILABLE;default:throw t}},t.prototype.getDurationInSeconds=function(t){return Math.floor((t.getTime()-this.callEstablishTime.getTime())/1e3)},t.prototype.onIceCandidate=function(t,e,n){void 0===t&&(t=kr.ICE_CANDIDATE),void 0===n&&(n=void 0);var r=e.candidate?e.candidate:{completed:!0};this.gateway.send({action:t,callId:this.callId,type:n,ice:r})},t.prototype.emitReconnected=function(t){this.remoteAudioStream=t,this.callStatus=Nn.ESTABLISHED,this.reconnecting=!1,this.apiEventEmitter.emit(qr.RECONNECTED,{stream:this.remoteAudioStream})},t.prototype.emitEstablished=function(t){this.remoteAudioStream=t,this.callStatus=Nn.ESTABLISHED,this.callEstablishTime=new Date,this.apiEventEmitter.emit(qr.ESTABLISHED,{stream:this.remoteAudioStream})},t.prototype.emitEarlyMedia=function(t){this.remoteAudioStream=t,this.apiEventEmitter.emit(qr.EARLY_MEDIA,{stream:this.remoteAudioStream})},t.prototype.onAudioPcTrack=function(t){this.isEarlyMedia?this.emitEarlyMedia(t.streams[0]):this.reconnecting?this.emitReconnected(t.streams[0]):this.emitEstablished(t.streams[0])},t.prototype.scheduleHangup=function(t){var e=this,n=setTimeout((function(){e.eventEmitter.emit("hangup",{status:t.status})}),3e3);this.eventEmitter.once(Tr.HANGUP,(function(t){return clearTimeout(n)}))},t.prototype.handleCallFlowError=function(t,e){if(void 0===e&&(e=!1),this.logger.log(new kt(this.callId,t)),e){var n=br.getHangupReason(t);this.gateway.send({action:kr.HANGUP,callId:this.callId,reason:n})}var r=Pn.getApplicationHangupStatus(t);this.eventEmitter.emit("call-error",{status:r})},t.prototype.validateMediaUpdateStatus=function(){if(this.mediaUpdateStatus!==fr.IDLE)throw new Error("User media already updating.")},t.prototype.createVideoPublisherPC=function(t){var e=this;this.videoPublisherPC=pr.create(this.rtcConfig,this.callId,Vn.VideoPublisher,this.conferenceId||this.dialogId,Fn.VIDEO,this.logger);var n=t?kr.ICE_CANDIDATE_VIDEO_CONFERENCE:kr.ICE_CANDIDATE_VIDEO_CALL;this.videoPublisherPC.peerConnection.onicecandidate=function(t){return e.onIceCandidate(n,t,"publisher")},this.videoPublisherPC.peerConnection.onsignalingstatechange=function(){"stable"===e.videoPublisherPC.peerConnection.signalingState&&(e.mediaUpdateStatus=fr.IDLE)}},t.prototype.handlePublishVideoFlowError=function(t){this.logger.error("Publish video flow error occurred: ".concat(t),this.callId),this.videoPublisherCleanup();var e=Pn.getApplicationHangupStatus(t);this.apiEventEmitter.emit(qr.ERROR,{errorCode:e})},t.prototype.handleGetUserMediaError=function(t,e){this.logger.error("Get user media flow error occurred: ".concat(t),this.callId),this.hasCameraVideo()?"screen-share"===e&&(this.localScreenShare.active=!1,this.mediaUpdateStatus=fr.IDLE):this.videoPublisherCleanup();var n=Pn.getApplicationHangupStatus(t);this.apiEventEmitter.emit(qr.ERROR,{errorCode:n})},t.prototype.getLocalAudioStream=function(t,e,n){return Ai(this,void 0,void 0,(function(){var r,i;return wi(this,(function(o){switch(o.label){case 0:return t||e?[4,this.device.getLocalStream(t,e,n,!0)]:[2,new MediaStream];case 1:return r=o.sent(),e&&r.getVideoTracks().length>0?(i=r.getVideoTracks()[0],this.localCameraVideoStream=new MediaStream([i]),[4,Qr(this._videoFilter,this.localCameraVideoStream,0)]):[3,3];case 2:o.sent(),this.apiEventEmitter.emit(qr.CAMERA_VIDEO_ADDED,{stream:this.localCameraVideoStream}),o.label=3;case 3:return[2,t?new MediaStream([r.getAudioTracks()[0]]):new MediaStream]}}))}))},t.prototype.getCameraVideoStream=function(t){return void 0===t&&(t=Cn.FRONT),this.device.getLocalStream(!1,!0,t,!0)},t.prototype.getScreenShareVideoStream=function(t){return Ai(this,void 0,void 0,(function(){var e;return wi(this,(function(n){switch(n.label){case 0:return t&&this.checkDisplaySurfaceSupported(),[4,this.device.getDisplayMedia(t)];case 1:return e=n.sent(),t&&this.checkAllowedDisplaySurface(e,t),[2,this.setScreenShareInactive(e)]}}))}))},t.prototype.checkAllowedDisplaySurface=function(t,e){t.getVideoTracks().forEach((function(n){if(!e.allowedDisplayOptions.includes(n.getCapabilities().displaySurface))throw Oi.closeMediaStream(t),{id:"10103",name:"MEDIA_ERROR",description:"Forbidden screenshare option chosen"}}))},t.prototype.checkDisplaySurfaceSupported=function(){if(!("displaySurface"in navigator.mediaDevices.getSupportedConstraints()))throw{id:"10103",name:"MEDIA_ERROR",description:"Browser does not support screenshare control"}},t.prototype.setScreenShareInactive=function(t){var e=this;return t.getVideoTracks()[0].onended=function(){return e.screenShare(!1)},t},t.prototype.audioCleanup=function(){var t;return this.audioPC&&(t=this.audioPC.close(),this.audioPC=null,this.hasRemoteDescription=!1),this.emptyAudioStream&&this.emptyAudioStream.close(),this.localAudioStream&&this.localAudioStream.getAudioTracks().forEach((function(t){return t.stop()})),t},t.prototype.onNetworkQualityStatisticsChanged=function(t,e){if(this.networkQualityMonitor.observe(t),this.networkQualityMonitor.localNetworkChanged()&&this.callStatus===Nn.ESTABLISHED){var n=this.networkQualityMonitor.current();e.mos=n.mos,this.emitNetworkQualityChanged({networkQuality:this.currentNetworkQuality(),currentMediaStats:e})}},t.prototype.emitNetworkQualityChanged=function(t){this.apiEventEmitter.emit(qr.NETWORK_QUALITY_CHANGED,t),this.gateway.send({action:kr.NETWORK_QUALITY_CHANGED,callId:this.callId,networkQuality:t.networkQuality})},t.prototype.currentNetworkQuality=function(){return this.networkQualityMonitor.current().networkQuality},t.prototype.videoPublisherCleanup=function(t){var e,n,r,i,o,a;if(void 0===t&&(t=!1),!t){for(var s=0,c=[this.localCameraVideo,this.localScreenShare];s<c.length;s++){var u=c[s];u&&(u.active=!1,null===(n=null===(e=u.transceiver)||void 0===e?void 0:e.sender.track)||void 0===n||n.stop(),"closed"!==(null===(r=this.videoPublisherPC)||void 0===r?void 0:r.peerConnection.connectionState)&&(null===(i=u.transceiver)||void 0===i||i.stop()),u.transceiver=null)}this.localCameraVideoStream&&(null===(o=this.localCameraVideoStream)||void 0===o||o.getVideoTracks().forEach((function(t){return t.stop()}))),this.localScreenShareStream&&(null===(a=this.localScreenShareStream)||void 0===a||a.getVideoTracks().forEach((function(t){return t.stop()})))}this.videoPublisherPC&&(this.videoPublisherPC.close(),this.videoPublisherPC=null),this.mediaUpdateStatus=fr.IDLE},t.prototype.loadParticipant=function(t){var e=new kn;return Object.assign(e,t),e.media=Object.assign(new jn(Object.assign(new Audio,e.media.audio)),e.media),e.endpoint=this.getEndpoint(e.endpoint),e},t.prototype.getEndpoint=function(t){switch(t.type){case Nr.PHONE:return Object.assign(new xr,t);case Nr.WEBRTC:return Object.assign(new jr,t);case Nr.VIBER:return Object.assign(new Fr,t);default:return Object.assign(new Vr,t)}},t.prototype.createDTMFSender=function(){return Ai(this,void 0,void 0,(function(){var t;return wi(this,(function(e){if(!this.audioPC.peerConnection)throw Dn.MEDIA_ERROR;if(t=this.audioPC.peerConnection.getSenders().find((function(t){var e;return"audio"===(null===(e=t.track)||void 0===e?void 0:e.kind)})),!t)throw Dn.MEDIA_ERROR;return this.dtmfSender=t.dtmf,"canInsertDTMF"in this.dtmfSender&&!1===this.dtmfSender.canInsertDTMF?(this.dtmfUnavailable=!0,[2]):[2]}))}))},t.prototype.sendDTMFInfo=function(t,e){this.gateway.send({action:kr.DTMF_INFO,callId:this.callId,digit:t,duration:e})},t.prototype.setReconnectHandler=function(t){this.reconnectHandler=t},t}();!function(t){t.BUSY="BUSY",t.ERROR="ERROR"}(Ei||(Ei={}));var Pi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ni=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},Mi=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},ki=function(t){function e(e,n,r,i,o,a,s,c,u,l,d,p){var f=t.call(this,e,n,r,i,o,s,null,u,l,d,p)||this;return f.caller=a,f.remoteOffer=c,f.callStatus=Nn.RINGING,f}return Pi(e,t),e.prototype.from=function(){return this.caller.identity},e.prototype.fromDisplayName=function(){return this.caller.displayName},e.prototype.accept=function(t){var e,n,r,i,o;this.callStatus===Nn.RINGING&&(this.callStatus=Nn.CONNECTING,this.applicationCallOptions=t||ai.builder().build(),this.localAudio={active:null===(n=null===(e=this.applicationCallOptions)||void 0===e?void 0:e.audio)||void 0===n||n},this.localCameraVideo={active:null!==(i=null===(r=this.applicationCallOptions)||void 0===r?void 0:r.video)&&void 0!==i&&i},this.createAudioPeerConnection(),this.negotiateAudio(this.applicationCallOptions),(null===(o=this.applicationCallOptions)||void 0===o?void 0:o.dataChannel)&&this.createDataChannel())},e.prototype.negotiateAudio=function(t){var e;return Ni(this,void 0,void 0,(function(){var n,r,i;return Mi(this,(function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),[4,this.getLocalAudioStream(null==t?void 0:t.audio,null==t?void 0:t.video,null===(e=null==t?void 0:t.videoOptions)||void 0===e?void 0:e.cameraOrientation)];case 1:return n=o.sent(),this.setLocalAudioStream(n),[4,this.setRemoteDescription()];case 2:return o.sent(),this.setRemoteCandidates(),this.addTracks(),[4,this.audioPC.peerConnection.createAnswer()];case 3:return r=o.sent(),[4,this.setLocalDescription(this.audioPC.peerConnection,r)];case 4:return r=o.sent(),this.sendAnswer(r),[3,6];case 5:return i=o.sent(),this.handleIncomingCallFlowError(i),[3,6];case 6:return[2]}}))}))},e.prototype.decline=function(t){this.callStatus===Nn.RINGING&&(this.callStatus=Nn.FINISHED,this.declineCall(Ei.BUSY,"Busy Here",null==t?void 0:t.declineOnAllDevices))},e.prototype.setRemoteDescription=function(){return Ni(this,void 0,void 0,(function(){return Mi(this,(function(t){switch(t.label){case 0:return[4,this.audioPC.peerConnection.setRemoteDescription(this.remoteOffer)];case 1:return[2,t.sent()]}}))}))},e.prototype.addTracks=function(){var t=this;(this.emptyAudioStream?this.emptyAudioStream.stream():this.localAudioStream).getTracks().forEach((function(e){return t.audioPC.peerConnection.addTrack(e,t.localAudioStream)})),this.localAudio.transceiver=this.audioPC.peerConnection.getTransceivers().find((function(t){return"audio"===t.receiver.track.kind}))},e.prototype.sendAnswer=function(t){this.gateway.send({action:kr.APP_CALL_ACCEPT,callId:this.callId,description:t,media:{audio:{muted:!this.localAudio.active},video:{camera:this.localCameraVideo.active}}})},e.prototype.handleIncomingCallFlowError=function(t){this.logger.error("Call flow error occurred: ".concat(t),this.callId);var e=br.getHangupReason(t);this.declineCall(Ei.ERROR,e);var n=Pn.getApplicationHangupStatus(t);this.eventEmitter.emit("call-error",{status:n})},e.prototype.declineCall=function(t,e,n){void 0===n&&(n=!1);var r={action:kr.APP_CALL_DECLINE,callId:this.callId,declineType:t,reason:e,declineOnAllDevices:n};this.gateway.send(r)},e}(Di);const Li="application_call";var ji,xi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fi=function(t){function e(e){var n=t.call(this,e.audio,e.audioOptions,e.video,e.videoOptions,e.customData,e.entityId,e.dataChannel)||this;return n._applicationCallOptions=e,n}return xi(e,t),e}(ai),Vi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ui=function(){return Ui=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ui.apply(this,arguments)},Bi=function(t){function e(e,n,r,i,o,a,s,c,u,l){var d,p,f=this;return(f=t.call(this,e,n,r,i,o,a,s,c,u,l)||this).localAudio={active:null===(d=null==s?void 0:s.audio)||void 0===d||d},f.localCameraVideo={active:null!==(p=null==s?void 0:s.video)&&void 0!==p&&p},f.createAudioPeerConnection(),f.negotiateAudio(s),f}return Vi(e,t),e.prototype.negotiateAudio=function(t){var e,n,r,i,o,a,s,c;return o=this,a=void 0,c=function(){var o,a,s;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(c){switch(c.label){case 0:return c.trys.push([0,4,,5]),[4,this.getLocalAudioStream(null===(e=this.applicationCallOptions)||void 0===e?void 0:e.audio,null===(n=this.applicationCallOptions)||void 0===n?void 0:n.video,null===(i=null===(r=this.applicationCallOptions)||void 0===r?void 0:r.videoOptions)||void 0===i?void 0:i.cameraOrientation)];case 1:return o=c.sent(),this.setLocalAudioStream(o),this.createAudioTransceiver(),[4,this.audioPC.peerConnection.createOffer()];case 2:return a=c.sent(),[4,this.setLocalDescription(this.audioPC.peerConnection,a)];case 3:return a=c.sent(),this.sendOffer(a,t),[3,5];case 4:return s=c.sent(),this.handleCallFlowError(s),[3,5];case 5:return[2]}}))},new((s=void 0)||(s=Promise))((function(t,e){function n(t){try{i(c.next(t))}catch(t){e(t)}}function r(t){try{i(c.throw(t))}catch(t){e(t)}}function i(e){var i;e.done?t(e.value):(i=e.value,i instanceof s?i:new s((function(t){t(i)}))).then(n,r)}i((c=c.apply(o,a||[])).next())}))},e.prototype.sendOffer=function(t,n){var r,i,o=n instanceof Fi,a=null==n?void 0:n.customData;this.callStatus=Nn.CALLING,this.gateway.send(Ui(Ui(Ui({action:Li,callId:this.callId,destination:this._applicationId,applicationId:o?e.WEBRTC_APPLICATION_ID:this._applicationId},(null==n?void 0:n.entityId)&&{entityId:null==n?void 0:n.entityId}),(null===(r=null==n?void 0:n.videoOptions)||void 0===r?void 0:r.videoMode)&&{videoMode:null===(i=null==n?void 0:n.videoOptions)||void 0===i?void 0:i.videoMode}),{description:t,customData:a,media:{audio:{muted:!this.localAudio.active},video:{camera:this.localCameraVideo.active}}}))},e.WEBRTC_APPLICATION_ID="WEBRTC",e}(Di),Hi=function(){function t(t,e){this._incomingCall=t,this._customData=e}return Object.defineProperty(t.prototype,"incomingCall",{get:function(){return this._incomingCall},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"customData",{get:function(){return this._customData},enumerable:!1,configurable:!0}),t}();!function(t){t.ROOM="ROOM",t.PHONE_NUMBER="PHONE_NUMBER",t.WEBRTC="WEBRTC",t.SIP="SIP"}(ji||(ji={}));const Gi=function(){function t(){}return t.validateCustomData=function(t){if(JSON.stringify(t).length>this.CUSTOM_DATA_LENGTH_LIMIT)throw new Error("Custom data length limit exceeded.")},t.CUSTOM_DATA_LENGTH_LIMIT=920,t}();var Wi,Ji=function(){return Ji=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ji.apply(this,arguments)},zi=function(){function t(t,e,n,r){this.roomOptions=n,this.roomName=r,this.reconnectedEvent=null,this.establishedEvent=null,this.conferenceJoinedEvent=null,this.apiEventEmitter=new wr;var i=this.mapOptions(this.roomName,this.roomOptions);this.applicationCall=t.callApplication(r,i),(null==n?void 0:n.autoRejoin)&&this.applicationCall.setReconnectHandler(this.createCustomDataForReconnect.bind(this)),this.initEventHandlers()}return t.prototype.mapOptions=function(t,e){var n=0!==Object.keys(e.customData).length;n&&Gi.validateCustomData(e.customData);var r=Ji({type:ji.ROOM.toString(),roomName:t,recordingOptions:e.recordingOptions&&JSON.stringify(e.recordingOptions)},n&&{client:JSON.stringify(e.customData)});return new Fi(ai.builder().setAudio(e.audio).setAudioOptions(e.audioOptions).setVideo(e.video).setVideoOptions(e.videoOptions).setCustomData(r).setDataChannel(e.dataChannel).build())},t.prototype.name=function(){return this.roomName},t.prototype.cameraOrientation=function(){return this.applicationCall.cameraOrientation()},t.prototype.cameraVideo=function(t){return this.applicationCall.cameraVideo(t)},t.prototype.duration=function(){return null==this.joinTime?0:this.getDurationInSeconds(null!=this.leaveTime()?this.leaveTime():new Date)},t.prototype.joinTime=function(){return this.roomJoinTime},t.prototype.leaveTime=function(){return this.applicationCall.endTime()},t.prototype.leave=function(){return this.applicationCall.hangup()},t.prototype.hasCameraVideo=function(){return this.applicationCall.hasCameraVideo()},t.prototype.hasScreenShare=function(){return this.applicationCall.hasScreenShare()},t.prototype.id=function(){return this.applicationCall.id()},t.prototype.muted=function(){return this.applicationCall.muted()},t.prototype.on=function(t,e){if(!Object.values(qr).find((function(e){return e===t})))throw new Error("Unknown event: ".concat(t,"!"));this.apiEventEmitter.on(t,e)},t.prototype.options=function(){return this.roomOptions},t.prototype.customData=function(){return this.options().customData},t.prototype.pauseIncomingVideo=function(){this.applicationCall.pauseIncomingVideo()},t.prototype.resumeIncomingVideo=function(){this.applicationCall.resumeIncomingVideo()},t.prototype.screenShare=function(t){return this.applicationCall.screenShare(t)},t.prototype.startScreenShare=function(t){return this.applicationCall.startScreenShare(t)},t.prototype.stopScreenShare=function(){return this.applicationCall.stopScreenShare()},t.prototype.sendDTMF=function(t){return this.applicationCall.sendDTMF(t)},t.prototype.audioFilter=function(){return this.applicationCall.audioFilter()},t.prototype.setAudioFilter=function(t){return this.applicationCall.setAudioFilter(t)},t.prototype.clearAudioFilter=function(){return this.applicationCall.clearAudioFilter()},t.prototype.setAudioInputDevice=function(t){return this.applicationCall.setAudioInputDevice(t)},t.prototype.setCameraOrientation=function(t){return this.applicationCall.setCameraOrientation(t)},t.prototype.localCapturer=function(){return this.applicationCall.localCapturer()},t.prototype.serverCapturer=function(){return this.applicationCall.serverCapturer()},t.prototype.dataChannel=function(){return this.applicationCall.dataChannel()},t.prototype.audioQualityMode=function(t){return this.applicationCall.audioQualityMode(t)},t.prototype.videoFilter=function(){return this.applicationCall.videoFilter()},t.prototype.setVideoFilter=function(t){return this.applicationCall.setVideoFilter(t)},t.prototype.clearVideoFilter=function(){return this.applicationCall.clearVideoFilter()},t.prototype.setVideoInputDevice=function(t){return this.applicationCall.setVideoInputDevice(t)},t.prototype.status=function(){return this.applicationCall.status()},t.prototype.mute=function(t){return this.applicationCall.mute(t)},t.prototype.getDurationInSeconds=function(t){return Math.floor((t.getTime()-this.roomJoinTime.getTime())/1e3)},t.prototype.emitRoomJoinedEvent=function(){if(this.conferenceJoinedEvent&&this.establishedEvent){var t=this.createRoomJoinedEvent(this.establishedEvent,this.conferenceJoinedEvent);this.conferenceJoinedEvent=null,this.establishedEvent=null,this.roomJoinTime=new Date,this.apiEventEmitter.emit(qr.ROOM_JOINED,t)}},t.prototype.emitRoomRejoinedEvent=function(){if(this.conferenceJoinedEvent&&this.reconnectedEvent){var t=this.createRoomRejoinedEvent(this.establishedEvent,this.conferenceJoinedEvent);this.conferenceJoinedEvent=null,this.reconnectedEvent=null,this.apiEventEmitter.emit(qr.ROOM_REJOINED,t)}},t.prototype.initEventHandlers=function(){var t=this;this.applicationCall.on(qr.CONFERENCE_JOINED,(function(e){t.conferenceJoinedEvent=e,t.emitRoomJoinedEvent(),t.emitRoomRejoinedEvent()})),this.applicationCall.on(qr.ESTABLISHED,(function(e){t.establishedEvent=e,t.emitRoomJoinedEvent()})),this.applicationCall.on(qr.HANGUP,(function(e){t.apiEventEmitter.emit(qr.ROOM_LEFT,e)})),this.applicationCall.on(qr.ERROR,(function(e){t.apiEventEmitter.emit(qr.ERROR,e)})),this.applicationCall.on(qr.CAMERA_VIDEO_ADDED,(function(e){t.apiEventEmitter.emit(qr.CAMERA_VIDEO_ADDED,e)})),this.applicationCall.on(qr.CAMERA_VIDEO_UPDATED,(function(e){t.apiEventEmitter.emit(qr.CAMERA_VIDEO_UPDATED,e)})),this.applicationCall.on(qr.CAMERA_VIDEO_REMOVED,(function(){t.apiEventEmitter.emit(qr.CAMERA_VIDEO_REMOVED,{})})),this.applicationCall.on(qr.SCREEN_SHARE_ADDED,(function(e){t.apiEventEmitter.emit(qr.SCREEN_SHARE_ADDED,e)})),this.applicationCall.on(qr.SCREEN_SHARE_REMOVED,(function(e){t.apiEventEmitter.emit(qr.SCREEN_SHARE_REMOVED,e)})),this.applicationCall.on(qr.PARTICIPANT_JOINING,(function(e){t.apiEventEmitter.emit(qr.PARTICIPANT_JOINING,e)})),this.applicationCall.on(qr.PARTICIPANT_JOINED,(function(e){t.apiEventEmitter.emit(qr.PARTICIPANT_JOINED,e)})),this.applicationCall.on(qr.PARTICIPANT_MUTED,(function(e){t.apiEventEmitter.emit(qr.PARTICIPANT_MUTED,e)})),this.applicationCall.on(qr.PARTICIPANT_UNMUTED,(function(e){t.apiEventEmitter.emit(qr.PARTICIPANT_UNMUTED,e)})),this.applicationCall.on(qr.PARTICIPANT_DEAF,(function(e){t.apiEventEmitter.emit(qr.PARTICIPANT_DEAF,e)})),this.applicationCall.on(qr.PARTICIPANT_UNDEAF,(function(e){t.apiEventEmitter.emit(qr.PARTICIPANT_UNDEAF,e)})),this.applicationCall.on(qr.PARTICIPANT_STARTED_TALKING,(function(e){t.apiEventEmitter.emit(qr.PARTICIPANT_STARTED_TALKING,e)})),this.applicationCall.on(qr.PARTICIPANT_STOPPED_TALKING,(function(e){t.apiEventEmitter.emit(qr.PARTICIPANT_STOPPED_TALKING,e)})),this.applicationCall.on(qr.PARTICIPANT_CAMERA_VIDEO_ADDED,(function(e){t.apiEventEmitter.emit(qr.PARTICIPANT_CAMERA_VIDEO_ADDED,e)})),this.applicationCall.on(qr.PARTICIPANT_CAMERA_VIDEO_REMOVED,(function(e){t.apiEventEmitter.emit(qr.PARTICIPANT_CAMERA_VIDEO_REMOVED,e)})),this.applicationCall.on(qr.PARTICIPANT_SCREEN_SHARE_ADDED,(function(e){t.apiEventEmitter.emit(qr.PARTICIPANT_SCREEN_SHARE_ADDED,e)})),this.applicationCall.on(qr.PARTICIPANT_SCREEN_SHARE_REMOVED,(function(e){t.apiEventEmitter.emit(qr.PARTICIPANT_SCREEN_SHARE_REMOVED,e)})),this.applicationCall.on(qr.PARTICIPANT_LEFT,(function(e){t.apiEventEmitter.emit(qr.PARTICIPANT_LEFT,e)})),this.applicationCall.on(qr.NETWORK_QUALITY_CHANGED,(function(e){t.apiEventEmitter.emit(qr.NETWORK_QUALITY_CHANGED,e)})),this.applicationCall.on(qr.PARTICIPANT_NETWORK_QUALITY_CHANGED,(function(e){t.apiEventEmitter.emit(qr.PARTICIPANT_NETWORK_QUALITY_CHANGED,e)})),this.applicationCall.on(qr.RECONNECTING,(function(){t.apiEventEmitter.emit(qr.ROOM_REJOINING,{})})),this.applicationCall.on(qr.RECONNECTED,(function(e){t.reconnectedEvent=e,t.emitRoomRejoinedEvent()}))},t.prototype.createRoomJoinedEvent=function(t,e){var n={id:void 0,name:void 0,participants:void 0,stream:void 0};return Object.assign(n,t,e),n},t.prototype.createRoomRejoinedEvent=function(t,e){var n={id:void 0,name:void 0,participants:void 0,stream:void 0};return Object.assign(n,t,e),n},t.prototype.createCustomDataForReconnect=function(t,e){return e.customData.reconnectingCallId=t,new Fi(e)},t}(),Qi=function(){function t(t,e,n,r){this._audio=t,this._audioOptions=e,this._recordingOptions=n,this._customData=r}return Object.defineProperty(t.prototype,"audio",{get:function(){return this._audio},set:function(t){this._audio=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioOptions",{get:function(){return this._audioOptions},set:function(t){this._audioOptions=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"recordingOptions",{get:function(){return this._recordingOptions},set:function(t){this._recordingOptions=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"customData",{get:function(){return this._customData},set:function(t){this._customData=t},enumerable:!1,configurable:!0}),t}(),qi=function(){function t(t){void 0===t&&(t="UNDEFINED"),this._recordingType=t}return Object.defineProperty(t.prototype,"recordingType",{get:function(){return this._recordingType},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{recordingType:this._recordingType}},t}(),Ki=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yi=function(t){function e(e){return void 0===e&&(e="UNDEFINED"),t.call(this,e)||this}return Ki(e,t),e}(qi),$i=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zi=function(t){function e(e,n,r,i,o){var a=t.call(this,n,r,i,o)||this;return a._from=e,a}return $i(e,t),Object.defineProperty(e.prototype,"from",{get:function(){return this._from},enumerable:!1,configurable:!0}),e.builder=function(){return new Xi},e}(Qi),Xi=function(){function t(){this._from=null,this._audio=!0,this._audioOptions=new ri(null,ti.AUTO),this._recordingOptions=new Yi,this._customData={}}return t.prototype.setFrom=function(t){return this._from=t,this},t.prototype.setAudio=function(t){return this._audio=t,this},t.prototype.setAudioOptions=function(t){return this._audioOptions=t,this},t.prototype.setRecordingOptions=function(t){return this._recordingOptions=t,this},t.prototype.setCustomData=function(t){return this._customData=t,this},t.prototype.build=function(){return new Zi(this._from,this._audio,this._audioOptions,this._recordingOptions,this._customData)},t}(),to=function(){function t(t,e,n){this.basicCallOptions=t,this.sourceEndpoint=e,this.destinationEndpoint=n,this.apiEventEmitter=new wr}return t.prototype.on=function(t,e){if(!Object.values(qr).find((function(e){return e===t})))throw new Error("Unknown event: ".concat(t,"!"));this.apiEventEmitter.on(t,e)},t.prototype.id=function(){return this.applicationCall.id()},t.prototype.options=function(){return this.basicCallOptions},t.prototype.customData=function(){return this.options().customData},t.prototype.duration=function(){return this.applicationCall.duration()},t.prototype.status=function(){return this.applicationCall.status()},t.prototype.startTime=function(){return this.applicationCall.startTime()},t.prototype.establishTime=function(){return this.applicationCall.establishTime()},t.prototype.endTime=function(){return this.applicationCall.endTime()},t.prototype.mute=function(t){return this.applicationCall.mute(t)},t.prototype.muted=function(){return this.applicationCall.muted()},t.prototype.sendDTMF=function(t){return this.applicationCall.sendDTMF(t)},t.prototype.setAudioInputDevice=function(t){return this.applicationCall.setAudioInputDevice(t)},t.prototype.audioFilter=function(){return this.applicationCall.audioFilter()},t.prototype.setAudioFilter=function(t){return this.applicationCall.setAudioFilter(t)},t.prototype.clearAudioFilter=function(){return this.applicationCall.clearAudioFilter()},t.prototype.counterpart=function(){},t.prototype.source=function(){return this.sourceEndpoint},t.prototype.destination=function(){return this.destinationEndpoint},t.prototype.hangup=function(){return this.applicationCall.hangup()},t.prototype.audioQualityMode=function(t){return this.applicationCall.audioQualityMode(t)},t}(),eo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),no=function(){return no=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},no.apply(this,arguments)},ro=function(t){function e(e,n,r,i){var o=t.call(this,n,new jr(r),new xr(i))||this,a=o.mapOptions(i,n);return o.applicationCall=e.callApplication(i,a),o.initEventHandlers(),o}return eo(e,t),e.prototype.counterpart=function(){return this.destination()},e.prototype.options=function(){return this.basicCallOptions},e.prototype.mapOptions=function(t,e){var n=0!==Object.keys(null==e?void 0:e.customData).length;n&&Gi.validateCustomData(e.customData);var r=no(no({to:t,from:e.from,type:ji.PHONE_NUMBER.toString(),recordingOptions:e.recordingOptions&&JSON.stringify(e.recordingOptions)},n&&{client:JSON.stringify(e.customData)}),{withDialog:"true"});return new Fi(ai.builder().setAudio(e.audio).setAudioOptions(e.audioOptions).setCustomData(r).build())},e.prototype.initEventHandlers=function(){var t=this;this.applicationCall.on(qr.RINGING,(function(){t.apiEventEmitter.emit(qr.RINGING,{})})),this.applicationCall.on(qr.EARLY_MEDIA,(function(e){t.apiEventEmitter.emit(qr.EARLY_MEDIA,e)})),this.applicationCall.on(qr.ESTABLISHED,(function(e){t.apiEventEmitter.emit(qr.ESTABLISHED,e)})),this.applicationCall.on(qr.HANGUP,(function(e){t.apiEventEmitter.emit(qr.HANGUP,e)})),this.applicationCall.on(qr.ERROR,(function(e){t.apiEventEmitter.emit(qr.ERROR,e)})),this.applicationCall.on(qr.NETWORK_QUALITY_CHANGED,(function(e){t.apiEventEmitter.emit(qr.NETWORK_QUALITY_CHANGED,e)}))},e}(to),io=function(){function t(t,e,n){this.capturer=t,this.currentUserIdentity=e,this.counterpartIdentity=n}return t.prototype.takeLocalScreenshot=function(t){return this.capturer.takeScreenshot(this.currentUserIdentity,t)},t.prototype.takeRemoteScreenshot=function(t){return this.capturer.takeScreenshot(this.counterpartIdentity,t)},t}(),oo=function(){function t(t,e,n){this.capturer=t,this.currentUserIdentity=e,this.counterpartIdentity=n}return t.prototype.takeLocalScreenshot=function(t){return this.capturer.takeScreenshot(this.currentUserIdentity,t)},t.prototype.takeRemoteScreenshot=function(t){return this.capturer.takeScreenshot(this.counterpartIdentity,t)},t}(),ao=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),so=function(t){function e(e,n,r){var i=t.call(this,e,n,r)||this;return i.isRemoteCameraVideo=!1,i.isRemoteScreenShare=!1,i}return ao(e,t),e.prototype.pauseIncomingVideo=function(){this.applicationCall.pauseIncomingVideo()},e.prototype.resumeIncomingVideo=function(){this.applicationCall.resumeIncomingVideo()},e.prototype.cameraVideo=function(t){return this.applicationCall.cameraVideo(t)},e.prototype.hasCameraVideo=function(){return this.applicationCall.hasCameraVideo()},e.prototype.hasRemoteCameraVideo=function(){return this.isRemoteCameraVideo},e.prototype.screenShare=function(t){return this.applicationCall.screenShare(t)},e.prototype.startScreenShare=function(t){return this.applicationCall.startScreenShare(t)},e.prototype.stopScreenShare=function(){return this.applicationCall.stopScreenShare()},e.prototype.hasScreenShare=function(){return this.applicationCall.hasScreenShare()},e.prototype.hasRemoteScreenShare=function(){return this.isRemoteScreenShare},e.prototype.setVideoInputDevice=function(t){return this.applicationCall.setVideoInputDevice(t)},e.prototype.cameraOrientation=function(){return this.applicationCall.cameraOrientation()},e.prototype.setCameraOrientation=function(t){return this.applicationCall.setCameraOrientation(t)},e.prototype.options=function(){return this.basicCallOptions},e.prototype.videoFilter=function(){return this.applicationCall.videoFilter()},e.prototype.setVideoFilter=function(t){return this.applicationCall.setVideoFilter(t)},e.prototype.clearVideoFilter=function(){return this.applicationCall.clearVideoFilter()},e.prototype.localCapturer=function(){var t,e=this;return null!==(t=this.localWebrtcCapturer)&&void 0!==t?t:this.localWebrtcCapturer=new io(this.applicationCall.localCapturer(),[this.sourceEndpoint,this.destinationEndpoint].filter((function(t){return t!==e.counterpart()}))[0].identifier,this.counterpart().identifier)},e.prototype.serverCapturer=function(){var t,e=this;return null!==(t=this.serverWebrtcCapturer)&&void 0!==t?t:this.serverWebrtcCapturer=new oo(this.applicationCall.serverCapturer(),[this.sourceEndpoint,this.destinationEndpoint].filter((function(t){return t!==e.counterpart()}))[0].identifier,this.counterpart().identifier)},e.prototype.dataChannel=function(){return this.applicationCall.dataChannel()},e.prototype.initEventHandlers=function(){var t=this;this.applicationCall.on(qr.RINGING,(function(){t.apiEventEmitter.emit(qr.RINGING,{})})),this.applicationCall.on(qr.EARLY_MEDIA,(function(e){t.apiEventEmitter.emit(qr.EARLY_MEDIA,e)})),this.applicationCall.on(qr.ESTABLISHED,(function(e){t.apiEventEmitter.emit(qr.ESTABLISHED,e)})),this.applicationCall.on(qr.HANGUP,(function(e){t.apiEventEmitter.emit(qr.HANGUP,e)})),this.applicationCall.on(qr.ERROR,(function(e){t.apiEventEmitter.emit(qr.ERROR,e)})),this.applicationCall.on(qr.CAMERA_VIDEO_ADDED,(function(e){t.apiEventEmitter.emit(qr.CAMERA_VIDEO_ADDED,e)})),this.applicationCall.on(qr.CAMERA_VIDEO_UPDATED,(function(e){t.apiEventEmitter.emit(qr.CAMERA_VIDEO_UPDATED,e)})),this.applicationCall.on(qr.CAMERA_VIDEO_REMOVED,(function(){t.apiEventEmitter.emit(qr.CAMERA_VIDEO_REMOVED,{})})),this.applicationCall.on(qr.SCREEN_SHARE_ADDED,(function(e){t.apiEventEmitter.emit(qr.SCREEN_SHARE_ADDED,e)})),this.applicationCall.on(qr.SCREEN_SHARE_REMOVED,(function(e){t.apiEventEmitter.emit(qr.SCREEN_SHARE_REMOVED,e)})),this.applicationCall.on(qr.PARTICIPANT_MUTED,(function(){t.apiEventEmitter.emit(qr.REMOTE_MUTED,{})})),this.applicationCall.on(qr.PARTICIPANT_UNMUTED,(function(){t.apiEventEmitter.emit(qr.REMOTE_UNMUTED,{})})),this.applicationCall.on(qr.PARTICIPANT_CAMERA_VIDEO_ADDED,(function(e){t.isRemoteCameraVideo=!0,t.apiEventEmitter.emit(qr.REMOTE_CAMERA_VIDEO_ADDED,{stream:e.stream})})),this.applicationCall.on(qr.PARTICIPANT_CAMERA_VIDEO_REMOVED,(function(){t.isRemoteCameraVideo=!1,t.apiEventEmitter.emit(qr.REMOTE_CAMERA_VIDEO_REMOVED,{})})),this.applicationCall.on(qr.PARTICIPANT_SCREEN_SHARE_ADDED,(function(e){t.isRemoteScreenShare=!0,t.apiEventEmitter.emit(qr.REMOTE_SCREEN_SHARE_ADDED,{stream:e.stream})})),this.applicationCall.on(qr.PARTICIPANT_SCREEN_SHARE_REMOVED,(function(){t.isRemoteScreenShare=!1,t.apiEventEmitter.emit(qr.REMOTE_SCREEN_SHARE_REMOVED,{})})),this.applicationCall.on(qr.NETWORK_QUALITY_CHANGED,(function(e){t.apiEventEmitter.emit(qr.NETWORK_QUALITY_CHANGED,e)})),this.applicationCall.on(qr.PARTICIPANT_NETWORK_QUALITY_CHANGED,(function(e){t.apiEventEmitter.emit(qr.REMOTE_NETWORK_QUALITY_CHANGED,{networkQuality:e.networkQuality})})),this.applicationCall.on(qr.DIALOG_JOINED,(function(e){var n=e.remote;n.endpoint.identifier===t.counterpart().identifier&&n.media.audio.muted&&t.apiEventEmitter.emit(qr.REMOTE_MUTED,{})}))},e}(to),co=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),uo=function(){return uo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},uo.apply(this,arguments)},lo=function(t){function e(e,n,r,i){var o=t.call(this,n,new jr(r),new jr(i))||this,a=o.mapOptions(i,n);return o.applicationCall=e.callApplication(i,a),o.initEventHandlers(),o}return co(e,t),e.prototype.counterpart=function(){return this.destinationEndpoint},e.prototype.mapOptions=function(t,e){var n=0!==Object.keys(e.customData).length;n&&Gi.validateCustomData(e.customData);var r=uo(uo({to:t,type:ji.WEBRTC.toString(),recordingOptions:e.recordingOptions&&JSON.stringify(e.recordingOptions),withDialog:"true"},e.video&&{isVideo:"true"}),n&&{client:JSON.stringify(e.customData)});return new Fi(ai.builder().setAudio(e.audio).setAudioOptions(e.audioOptions).setVideo(e.video).setVideoOptions(e.videoOptions).setCustomData(r).setDataChannel(e.dataChannel).build())},e}(so),po=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fo=function(t){function e(e){return void 0===e&&(e="UNDEFINED"),t.call(this,e)||this}return po(e,t),e}(qi),ho=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vo=function(t){function e(e,n,r,i,o,a,s){var c=t.call(this,e,n,r,i)||this;return c._video=o,c._videoOptions=a,c._dataChannel=s,c}return ho(e,t),Object.defineProperty(e.prototype,"video",{get:function(){return this._video},set:function(t){this._video=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"videoOptions",{get:function(){return this._videoOptions},set:function(t){this._videoOptions=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataChannel",{get:function(){return this._dataChannel},set:function(t){this._dataChannel=t},enumerable:!1,configurable:!0}),e.builder=function(){return new mo},e}(Qi),mo=function(){function t(){this._audio=!0,this._audioOptions=new ri(null,ti.AUTO),this._recordingOptions=new fo,this._customData={},this._video=!1,this._videoOptions=new ei(Cn.FRONT,null,Kr.PRESENTATION),this._dataChannel=!1}return t.prototype.setAudio=function(t){return this._audio=t,this},t.prototype.setAudioOptions=function(t){return this._audioOptions=t,this},t.prototype.setRecordingOptions=function(t){return this._recordingOptions=t,this},t.prototype.setCustomData=function(t){return this._customData=t,this},t.prototype.setVideo=function(t){return this._video=t,this},t.prototype.setVideoOptions=function(t){return this._videoOptions=t,this},t.prototype.setDataChannel=function(t){return this._dataChannel=t,this},t.prototype.build=function(){return new vo(this._audio,this._audioOptions,this._recordingOptions,this._customData,this._video,this._videoOptions,this._dataChannel)},t}(),yo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),go=function(t){function e(e){return void 0===e&&(e="UNDEFINED"),t.call(this,e)||this}return yo(e,t),e}(qi),Eo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_o=function(t){function e(e,n,r,i){return t.call(this,e,n,r,i)||this}return Eo(e,t),e.builder=function(){return new Co},e}(Qi),Co=function(){function t(){this._audio=!0,this._audioOptions=new ri(null,ti.AUTO),this._recordingOptions=new go,this._customData={}}return t.prototype.setAudio=function(t){return this._audio=t,this},t.prototype.setAudioOptions=function(t){return this._audioOptions=t,this},t.prototype.setRecordingOptions=function(t){return this._recordingOptions=t,this},t.prototype.setCustomData=function(t){return this._customData=t,this},t.prototype.build=function(){return new _o(this._audio,this._audioOptions,this._recordingOptions,this._customData)},t}(),bo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),So=function(){return So=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},So.apply(this,arguments)},Ro=function(t){function e(e,n,r,i,o){var a=t.call(this,n,new jr(r),new Fr(i))||this,s=a.mapOptions(i,o,n);return a.applicationCall=e.callApplication(i,s),a.initEventHandlers(),a}return bo(e,t),e.prototype.counterpart=function(){return this.destination()},e.prototype.options=function(){return this.basicCallOptions},e.prototype.mapOptions=function(t,e,n){var r=0!==Object.keys(null==n?void 0:n.customData).length;r&&Gi.validateCustomData(n.customData);var i=So(So({to:t,from:e,type:ji.PHONE_NUMBER.toString(),recordingOptions:n.recordingOptions&&JSON.stringify(n.recordingOptions),viber:(!0).toString()},r&&{client:JSON.stringify(n.customData)}),{withDialog:"true"});return new Fi(ai.builder().setAudio(n.audio).setAudioOptions(n.audioOptions).setCustomData(i).build())},e.prototype.initEventHandlers=function(){var t=this;this.applicationCall.on(qr.RINGING,(function(){t.apiEventEmitter.emit(qr.RINGING,{})})),this.applicationCall.on(qr.EARLY_MEDIA,(function(e){t.apiEventEmitter.emit(qr.EARLY_MEDIA,e)})),this.applicationCall.on(qr.ESTABLISHED,(function(e){t.apiEventEmitter.emit(qr.ESTABLISHED,e)})),this.applicationCall.on(qr.HANGUP,(function(e){t.apiEventEmitter.emit(qr.HANGUP,e)})),this.applicationCall.on(qr.ERROR,(function(e){t.apiEventEmitter.emit(qr.ERROR,e)})),this.applicationCall.on(qr.NETWORK_QUALITY_CHANGED,(function(e){t.apiEventEmitter.emit(qr.NETWORK_QUALITY_CHANGED,e)}))},e}(to);(Wi||(Wi={})).WEBRTC_APPLICATION_ID="WEBRTC";var Oo,To=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ao=function(t){function e(e,n,r,i,o,a,s,c,u,l,d,p){var f=t.call(this,vo.builder().build(),new jr(c),new jr(s))||this;return f.eventEmitter=e,f.gateway=n,f.logger=r,f.rtcConfig=i,f.device=o,f.hasRemoteVideo=a,f.applicationCall=new ki(f.eventEmitter,f.gateway,f.logger,f.rtcConfig,f.device,c,Wi.WEBRTC_APPLICATION_ID,u,s,l,d,p),f.initEventHandlers(),f}return To(e,t),e.mapOptions=function(t){return ai.builder().setAudio(t.audio).setAudioOptions(t.audioOptions).setVideo(t.video).setVideoOptions(t.videoOptions).setCustomData(t.customData).setDataChannel(t.dataChannel).build()},e.prototype.hasRemoteCameraVideo=function(){return this.status()===Nn.RINGING||this.status()===Nn.CONNECTING?this.hasRemoteVideo:t.prototype.hasRemoteCameraVideo.call(this)},e.prototype.counterpart=function(){return this.sourceEndpoint},e.prototype.accept=function(t){this.basicCallOptions=t||this.basicCallOptions,this.applicationCall.accept(e.mapOptions(this.basicCallOptions))},e.prototype.decline=function(t){this.applicationCall.decline(t)},e}(so),wo=function(){function t(t,e){this._incomingCall=t,this._customData=e}return Object.defineProperty(t.prototype,"incomingCall",{get:function(){return this._incomingCall},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"customData",{get:function(){return this._customData},enumerable:!1,configurable:!0}),t}(),Io=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Do=function(t){function e(e){return void 0===e&&(e="UNDEFINED"),t.call(this,e)||this}return Io(e,t),e}(qi),Po=function(){function t(t,e,n,r,i,o,a,s){this._audio=t,this._audioOptions=e,this._video=n,this._videoOptions=r,this._recordingOptions=i,this._customData=o,this._dataChannel=a,this._autoRejoin=s}return Object.defineProperty(t.prototype,"audio",{get:function(){return this._audio},set:function(t){this._audio=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioOptions",{get:function(){return this._audioOptions},set:function(t){this._audioOptions=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"video",{get:function(){return this._video},set:function(t){this._video=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoOptions",{get:function(){return this._videoOptions},set:function(t){this._videoOptions=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"recordingOptions",{get:function(){return this._recordingOptions},set:function(t){this._recordingOptions=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"customData",{get:function(){return this._customData},set:function(t){this._customData=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataChannel",{get:function(){return this._dataChannel},set:function(t){this._dataChannel=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoRejoin",{get:function(){return this._autoRejoin},set:function(t){this._autoRejoin=t},enumerable:!1,configurable:!0}),t.builder=function(){return new No},t}(),No=function(){function t(){this._audio=!0,this._audioOptions=new ri(null,ti.AUTO),this._video=!1,this._videoOptions=new ei(Cn.FRONT,null,Kr.PRESENTATION),this._recordingOptions=new Do,this._customData={},this._dataChannel=!1,this._autoRejoin=!1}return t.prototype.setAudio=function(t){return this._audio=t,this},t.prototype.setAudioOptions=function(t){return this._audioOptions=t,this},t.prototype.setVideo=function(t){return this._video=t,this},t.prototype.setVideoOptions=function(t){return this._videoOptions=t,this},t.prototype.setRecordingOptions=function(t){return this._recordingOptions=t,this},t.prototype.setCustomData=function(t){return this._customData=t,this},t.prototype.setAutoRejoin=function(t){return this._autoRejoin=t,this},t.prototype.setDataChannel=function(t){return this._dataChannel=t,this},t.prototype.build=function(){return new Po(this._audio,this._audioOptions,this._video,this._videoOptions,this._recordingOptions,this._customData,this._dataChannel,this._autoRejoin)},t}(),Mo=function(){function t(t,e){this._identity=t,this._displayName=e}return Object.defineProperty(t.prototype,"identity",{get:function(){return this._identity},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"displayName",{get:function(){return this._displayName},enumerable:!1,configurable:!0}),t}();!function(t){t.CONNECTED="connected",t.RECONNECTING="reconnecting",t.RECONNECTED="reconnected",t.DISCONNECTED="disconnected",t.INCOMING_APPLICATION_CALL="incoming-application-call",t.INCOMING_WEBRTC_CALL="incoming-webrtc-call"}(Oo||(Oo={}));var ko,Lo,jo=function(){function t(t,e){if(void 0===e&&(e={}),this.token=t,this.rtcOptions=e,!this.isWebRTCSupported())throw new Error("Browser does not support WebRTC.");e.debug?Sn.enableAll():Sn.setLevel(Sn.levels.ERROR),this.eventEmitter=new(at().EventEmitter),this.apiEventEmitter=new wr,this.logger=new On(t,new _n,this.rtcOptions.statsUrl),this.currentUser=this.getUserFromToken(dt(this.token)),this.gateway=new wt(this.eventEmitter,this.logger,this.token),this.device=new In,this.rtcConfig={},this.configureEventHandlers.call(this)}return t.prototype.connect=function(){this.validateStatus(gt.OFFLINE,"connect"),this.gateway.connect(!1)},t.prototype.disconnect=function(){this.logger&&this.logger.stop(),this.gateway.disconnect()},t.prototype.connectedUser=function(){return this.currentUser},t.prototype.on=function(t,e){if(!Object.values(Oo).find((function(e){return e===t})))throw new Error("Unknown event: ".concat(t,"!"));this.apiEventEmitter.on(t,e)},t.prototype.callApplication=function(t,e){this.validateStatus(gt.CONNECTED,"callApplication"),this.checkIfAnythingIsActive(),(null==e?void 0:e.customData)&&Gi.validateCustomData(e.customData),null!=e||(e=ai.builder().build());var n=new Bi(this.eventEmitter,this.gateway,this.logger,this.rtcConfig,this.device,t,e,this.currentUser.identity,this.token,this.apiUrl);return this.callActive=!0,n},t.prototype.callWebrtc=function(e,n){if(!t.IDENTITY_PATTERN.test(e))throw Error("Invalid destination.");return null!=n||(n=vo.builder().build()),new lo(this,n,this.currentUser.identity,e)},t.prototype.callPhone=function(e,n){if(!t.PHONE_NUMBER_PATTERN.test(e))throw new Error("Invalid destination");return null!=n||(n=Zi.builder().build()),new ro(this,n,this.currentUser.identity,e)},t.prototype.callViber=function(e,n,r){if(!t.PHONE_NUMBER_PATTERN.test(e))throw new Error("Invalid destination");if(!t.PHONE_NUMBER_PATTERN.test(n))throw Error("Invalid caller identifier.");return null!=r||(r=_o.builder().build()),new Ro(this,r,this.currentUser.identity,e,n)},t.prototype.joinRoom=function(e,n){if(!e||!t.CONFERENCE_ID_PATTERN.test(e))throw Error("Invalid room name.");return null!=n||(n=Po.builder().build()),new zi(this,this.currentUser.identity,n,e)},t.prototype.debug=function(t){t?Sn.enableAll():Sn.setLevel(Sn.levels.ERROR)},t.prototype.getAudioInputDevices=function(){return this.device.getAudioInputDevices()},t.prototype.setAudioInputDevice=function(t){this.device.setAudioInputDevice(t)},t.prototype.unsetAudioInputDevice=function(t){this.device.unsetAudioInputDevice(t)},t.prototype.getAudioOutputDevices=function(){return this.device.getAudioOutputDevices()},t.prototype.getVideoInputDevices=function(){return this.device.getVideoInputDevices()},t.prototype.setVideoInputDevice=function(t){this.device.setVideoInputDevice(t)},t.prototype.unsetVideoInputDevice=function(t){this.device.unsetVideoInputDevice(t)},t.prototype.validateStatus=function(t,e){var n=this.gateway.status;if(t!==n)throw new Error("Cannot ".concat(e,", required status is ").concat(_t.get(t),", current status is ").concat(_t.get(n),"."))},t.prototype.configureEventHandlers=function(){this.eventEmitter.once("registered",this.handleRegistered.bind(this)),this.eventEmitter.on("registration_failed",this.handleDisconnect.bind(this)),this.eventEmitter.once("disconnected",this.handleDisconnect.bind(this)),this.eventEmitter.on("reconnecting",this.handleReconnecting.bind(this)),this.eventEmitter.on("reconnected",this.handleReconnected.bind(this)),this.eventEmitter.on("application_call",this.handleIncomingApplicationCall.bind(this)),this.eventEmitter.on("call_finished",this.handleHangup.bind(this))},t.prototype.handleRegistered=function(t){var e;t.iceServers&&(this.rtcConfig.iceServers=t.iceServers);var n=this.rtcOptions.statsUrl||t.apiUrl;this.apiUrl=t.apiUrl,this.logger.setOptions(null!==(e=t.loggerOptions)&&void 0!==e?e:new _n),this.logger.setLogLevel(t.logLevel),this.logger.setApiUrl(n),this.apiEventEmitter.emit(Oo.CONNECTED,{identity:t.identity})},t.prototype.handleIncomingApplicationCall=function(t){var e;if(this.callActive)return this.apiEventEmitter.emit("call-error",{status:Dn.BUSY});var n=this.currentUser.identity;if(this.callActive=!0,t.applicationId===Wi.WEBRTC_APPLICATION_ID)if((null===(e=t.customData)||void 0===e?void 0:e.type)===ji.WEBRTC.toString()){var r=new Ao(this.eventEmitter,this.gateway,this.logger,this.rtcConfig,this.device,this.hasRemoteVideo(t.customData),n,t.caller.identity,t.description,this.token,this.apiUrl,t.correlationId),i=this.extractClientCustomData(t.customData);this.apiEventEmitter.emit(Oo.INCOMING_WEBRTC_CALL,new wo(r,i))}else this.logger.warn("Received incoming basic call without matching flow type: ".concat(JSON.stringify(t)));else r=new ki(this.eventEmitter,this.gateway,this.logger,this.rtcConfig,this.device,t.caller,t.applicationId,t.description,n,this.token,this.apiUrl,t.correlationId),this.apiEventEmitter.emit(Oo.INCOMING_APPLICATION_CALL,new Hi(r,t.customData))},t.prototype.extractClientCustomData=function(t){try{return t.client?JSON.parse(t.client):{}}catch(t){this.logger.error("Failed to parse client's custom data: ".concat(t))}},t.prototype.hasRemoteVideo=function(t){return"true"===t.isVideo},t.prototype.handleHangup=function(t){this.callActive=!1},t.prototype.handleReconnecting=function(t){this.apiEventEmitter.emit(Oo.RECONNECTING,{})},t.prototype.handleReconnected=function(t){this.apiEventEmitter.emit(Oo.RECONNECTED,{})},t.prototype.handleConnectionClosed=function(t){if(this.callActive){var e;e=4e3===(null==t?void 0:t.code)?Dn.NORMAL_HANGUP:Dn.NETWORK_ERROR,this.eventEmitter.emit("hangup",{status:e})}},t.prototype.handleDisconnect=function(t){var e=this;this.handleConnectionClosed(t),this.apiEventEmitter.emit(Oo.DISCONNECTED,{reason:t.reason}),this.eventEmitter.removeAllListeners("registered"),this.eventEmitter.removeAllListeners("registration_failed"),this.eventEmitter.removeAllListeners("disconnected"),this.eventEmitter.removeAllListeners("reconnecting"),this.eventEmitter.removeAllListeners("reconnected"),this.eventEmitter.removeAllListeners("application_call"),this.eventEmitter.removeAllListeners("hangup"),this.eventEmitter.removeAllListeners("call_finished"),Object.values(Oo).forEach((function(t){return e.apiEventEmitter.removeAllListeners(t)}))},t.prototype.isWebRTCSupported=function(){return RTCPeerConnection&&(navigator.getUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)},t.prototype.getUserFromToken=function(t){var e=t.identity,n=t.name;return new Mo(e,n)},t.prototype.checkIfAnythingIsActive=function(){if(this.callActive)throw Error("Call already in progress.")},t.IDENTITY_PATTERN=/^[\p{L}\p{N}\w.\-_+=/]{3,64}$/u,t.CONFERENCE_ID_PATTERN=/^[\p{L}\p{N}\w.\-_+=/]{3,250}$/u,t.PHONE_NUMBER_PATTERN=/^[+]?\p{N}+$/u,t}(),xo=function(t,e){return void 0===e&&(e={}),new jo(t,e)},Fo=function(){function t(t){this._declineOnAllDevices=t}return Object.defineProperty(t.prototype,"declineOnAllDevices",{get:function(){return this._declineOnAllDevices},enumerable:!1,configurable:!0}),t.builder=function(){return new Vo},t}(),Vo=function(){function t(){this._declineOnAllDevices=!1}return t.prototype.setDeclineOnAllDevices=function(t){return this._declineOnAllDevices=t,this},t.prototype.build=function(){return new Fo(this._declineOnAllDevices)},t}();!function(t){t.CONVERSATIONS="conversations"}(ko||(ko={})),function(t){t.PNG="image/png",t.JPEG="image/jpeg"}(Lo||(Lo={}))})();var i=self;for(var o in r)i[o]=r[o];r.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();
//# sourceMappingURL=infobip.rtc.js.map